define("core",["lodash","santa-components","coreUtils","componentsCore","prop-types","reactDOM","zepto","experiment","warmupUtils","create-react-class","react","utils","components","mobx","compUtils","layout","mobx-react","platformInit","santaProps","pmrpc","thirdPartyAnalytics","dataFixer","wix-ui-santa/viewerComponentService.bundle.min","wix-ui-santa/overrides.bundle","santa-site-auth-module"],(function(e,t,i,n,s,a,o,r,c,u,p,l,d,g,h,f,m,v,y,A,S,P,I,_,D){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=541)}([function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){e.exports=n},function(e,t){e.exports=s},,function(e,t){e.exports=a},function(e,t){e.exports=o},function(e,t){e.exports=r},function(e,t){e.exports=c},,,,function(e,t){e.exports=u},function(e,t){e.exports=p},,function(e,t){e.exports=l},,function(e,t){e.exports=d},,function(e,t){e.exports=g},,function(e,t){e.exports=h},,function(e,t){e.exports=f},,,,,,,,,function(e,t){e.exports=m},function(e,t){e.exports=v},,,,,function(e,t){e.exports=y},,,,,,,function(e,t){e.exports=A},,,,,,,,,,,,,,function(e,t,i){var n,s;n=[i(195)],void 0===(s=function(e){"use strict";return e}.apply(t,n))||(e.exports=s)},,,,,,,,,,,function(e,t){e.exports=S},function(e,t,i){var n,s;n=[i(546),i(0),i(2)],void 0===(s=function(e,t,i){"use strict";var n=i.loggingUtils.logger;return t.forEach(e,(function(e,t){e.errorName=t})),n.register("core","error",e),e}.apply(t,n))||(e.exports=s)},,,,,,,,,,,,,,,,,,,,function(e,t,i){var n,s;n=[i(0),i(2),i(3),i(196)],void 0===(s=function(e,t,i,n){"use strict";var s={Image:"wysiwyg.components.imageZoom",PermaLink:"wixapps.integration.components.AppPartZoom"},a=new t.SiteDataPrivates;function o(){this._comps={}}function r(e,i){if(e.selectiveCompDownload){(function(e){var t=a.get(e);return t||(t=new o,a.set(e,t)),t})(e).remember(i);var s=e.currentUrl.query.listComponents;if("all"===s&&t.log.info("Using component",i),!n.isComponentLoaded(i)&&n.exists(i,e))return"requested"!==s&&"true"!==s||t.log.info("Requesing component",i),{customDownload:function(){var t=this;n.loadAndRegister(i,e).then((function(){t.done()}))}}}}return o.prototype={remember:function(e){this._comps[e]=!0},getAndClear:function(){var t=e.keys(this._comps);return this._comps={},t}},{get:r,forDataItem:function(e,t){var i=s[t];if(i)return r(e,i)},allButNativeComponents:t.allButNativeComponents,callNativePackageCallback:function(n,s){var a=t.getAllPackagesForAllComponents(),o=t.nativeComponents(s);e.forEach(o,(function(e){var t=e.type;return a[t](n[t],i.compRegistrar.register,i.siteAspectsRegistry.registerHostLibsAspect)}))},requested:function(e){var t=a.get(e);return t?t.getAndClear():[]},all:t.allPackages,callAllRequiredPackagesCallbacks:function(n){var s=t.getAllPackagesForAllComponents(),a=e.keys(s);e.forEach(a,(function(e){return s[e](n[e],i.compRegistrar.register,i.siteAspectsRegistry.registerHostLibsAspect,n.skins.skinsMap.addBatch)}))}}}.apply(t,n))||(e.exports=s)},function(e,t){e.exports=P},function(e,t,i){var n,s;n=[i(0),i(16)],void 0===(s=function(e,t){"use strict";var i=t.triggerTypesConsts;function n(t){this._aspectSiteAPI=t,this._siteData=t.getSiteData(),this.animations=this._siteData.animations,this._isEnabled=!1,this._triggeredOnce={},e.bindAll(this,e.functionsIn(this))}return n.prototype=e.create(Object.prototype,{constructor:n,ACTION_TRIGGERS:[],ACTION_NAME:"BASE_ACTION",ACTIONS_SUPPORTED:["BASE_ACTION"],shouldEnable:function(){var e=this._siteData;return"undefined"!=typeof window&&!e.isMobileDevice()&&!e.isMobileView()&&!e.isTabletDevice()},enableAction:function(){this._isEnabled||(this._triggeredOnce={},this._currentActions={},this._delayActionByTransitionDuration=0,this._executeOnNextTick=[],this.resetActionState(),this._tickerCallback=this._executeActionOnTick,this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._executeOnNextTick=[],this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this._isEnabled=!1,this._delayActionByTransitionDuration=0,this.resetActionState())},isEnabled:function(){return this._isEnabled},triggerActions:function(t,i){var n=this._aspectSiteAPI.getSiteAspect("behaviorsAspect"),s=this._triggeredOnce;return e.forEach(t,(function(e){s[e]=!0})),i=e.defaults(i||{},{action:this.ACTION_NAME}),n.handleActions(e(this._currentActions).pick(t).values().value(),i)},registerPageTransitionDuration:function(e){this._delayActionByTransitionDuration=e},handleBehaviorsUpdate:e.noop,executeAction:e.noop,_executeActionOnTick:function(){if(!e.isEmpty(this._executeOnNextTick)){var t=this._executeOnNextTick;this._executeOnNextTick=[],e.forEach(t,(function(e){e()}))}},executeOnNextTick:function(t){this._executeOnNextTick=e(this._executeActionOnTick).concat([t]).uniq().value()},handleTrigger:function(t){var n=e.toArray(arguments),s=this.ACTIONS_SUPPORTED;switch(t){case i.ACTIONS_ADDED_LAYOUTED:n[1]=e.pickBy(n[1],(function(t){return e.includes(s,t.name)})),e.assign(this._currentActions,n[1]);break;case i.ACTIONS_REMOVED:n[1]=e.pickBy(n[1],(function(t){return e.includes(s,t.name)})),this._currentActions=e.omit(this._currentActions,e.keys(n[1]))}this._isEnabled&&this.handleActionTrigger.apply(this,n)},handleActionTrigger:function(){throw new Error("Need to implement handleTrigger in specific actions")},resetActionState:function(){throw new Error("Need to implement resetActionState in specific actions")}}),n}.apply(t,n))||(e.exports=s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n,s;n=[i(0),i(7),i(16),i(2),i(39),i(71),i(72),i(3),i(8)],void 0===(s=function(e,t,i,n,s,a,o,r,c){"use strict";var u=i.logger,p=new WeakMap,l=["wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPAWidget"];function d(t,i){!t&&arguments.length&&"undefined"!=typeof window&&(i=i||"unknown",window.wixBiSession&&window.wixBiSession.sendError(o.NULL_SITE_ERROR,i)),this._site=t,e.bindAll(this,e.functionsIn(this));var n=s.fetchers.get(this);p.set(this,{fetchers:n});var a=this.getActionQueue();a&&(a.registerPreFlushOperation(this.setQueueFlushStart),a.registerPostFlushOperation(this.setQueueFlushEnd))}function g(e,t,i){var n=this.getPointers().platform.getControllerStageDataPointer(e,t,i);return this.getDisplayedDAL().get(n)}function h(t){var n=this.getRootIdsWhichShouldBeRendered(),s=this.getSiteDataAPI(),a=t?i.constants.VIEW_MODES.MOBILE:i.constants.VIEW_MODES.DESKTOP,o=this.getSiteData().anchorsMap;e.forEach(n,(function(i){e.has(o,[i,a])||s.anchors.createPageAnchors(i,{forceMobileStructure:t})}))}function f(e){return["siteApi",e,"globalData"]}function m(t){var i=this.getDisplayedDAL(),n=this.getPointers(),s=this.getSiteData(),a=s.getCurrentUrlPageId(),o=n.data.getDataItem(a,s.MASTER_PAGE_ID),r=e.pick(i.get(o),e.keys(t));e.isEqual(r,t)||i.merge(o,t)}function v(t){if(!e.isEmpty(t)){var i=this.getDisplayedDAL(),n=this.getPointers(),s=this.getSiteData(),a=s.getCurrentUrlPageId(),o=n.data.getDataItem(a,s.MASTER_PAGE_ID),r=i.get(o),c=i.get(o);e.forEach(t,(function(t){return e.unset(c,t)})),e.isEqual(r,c)||i.set(o,c)}}function y(e){var t=i.linkRenderer.isExternalLink(this.getSiteData(),e.href),n="mail"===e["data-type"],s="_self"===e.target;return!this.getRenderFlag("isExternalNavigationAllowed")&&(t&&s||n)}function A(t){var s=i.linkRenderer.isExternalLink(this.getSiteData(),t.href);switch(t["data-type"]=s?"external":t["data-type"],t.target=t.target||"_self",t["data-type"]){case"external":window.open(t.href,t.target);break;case"mail":case"phone":window.open(t.href,"_self");break;case"document":t.docId=t.href;var a=n.linkUtils.getDocumentLink(t,this.getSiteData());window.open(a,"_blank");break;default:var o=t["data-no-physical-url"]?t["data-no-physical-url"]:t.href,r=i.wixUrlParser.parseUrl(this.getSiteData(),o);r&&(e.assign(r,{pageItemAdditionalData:t["data-page-item-context"],anchorData:t["data-anchor"]}),this.handleNavigation(r,t,!0))}}return d.prototype={setSite:function(e){this._site=e},reLayout:function(){this._site.reLayout()},registerReLayoutPending:function(e){this._site.registerReLayoutPending(e)},cancelReLayoutPending:function(e){this._site.cancelReLayoutPending(e)},reLayoutIfPending:function(){this._site.reLayoutIfPending()},getSiteAspect:function(e){var t=this._site;return t&&(t.siteAspects&&t.siteAspects[e]||t.props.aspects&&t.props.aspects[e])},getSiteData:function(){return this._site.props.siteData},getLoadedStyles:function(){return this._site.loadedStyles},setBiParam:function(e,t){var i=this.getSiteData();i&&i.wixBiSession&&void 0===i.wixBiSession[e]&&(i.wixBiSession[e]=t)},addPrefetchPages:function(t){var i=this.getDisplayedDAL(),n=i.getByPath(["prefetchPages"]);i.setByPath(["prefetchPages"],e.union(n,t))},markVisitedPage:function(t){var i=this.getDisplayedDAL(),n=i.getByPath(["visitedPages"]);i.setByPath(["visitedPages"],e.union(n,[t]))},setNoEnforceAnchors:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getNoEnforceAnchorsPointer();t.set(i,e)},getNoEnforceAnchors:function(){var e=this.getDisplayedDAL(),t=this.getPointers().general.getNoEnforceAnchorsPointer();return e.get(t)},requestEnforceAnchors:function(){this.getSiteData().enforceAndPatchRequested=!0},setBiMarker:function(t){this.setBiParam(t,e.now())},onSiteUnmount:function(){setTimeout(function(){delete this._site}.bind(this))},isZoomOpened:function(){var e=this._site.props.siteData;return!(!e.getExistingRootNavigationInfo(e.getFocusedRootId()).pageItemId&&!e.getNonPageItemZoomData())},openPopup:function(e,t,i){window.open(e,t,i)},href:function(e){window.location.href=e},navigateToRenderedLink:function(e){return!y.call(this,e)&&(A.call(this,e),!0)},isPageLandingPage:function(e){return this.getSiteData().isPageLandingPage(e)},getMasterPageLayoutSettings:function(){return this.getSiteData().getMasterPageLayoutSettings()},isPageAllowedAndLoaded:function(e){return this.isPageAllowed(e)&&n.siteDataUtils.isPageLoaded(this.getSiteData(),e.pageId)},isPageAllowed:function(e){return this.getSiteAspect("siteMembers").isPageAllowed(e)},scrollToAnchor:function(e,t){var n=i.scrollAnchors.calcAnchorScrollToPosition(e,this);return this._site.scrollToAnchor(n,t)},scrollToComponent:function(t,i){var n=this.getSiteData(),s=n.measureMap||{},a=function(t,i){var n=t.getAllRenderedRootIds();return e.includes(n,i)?i:e.find(n,(function(e){return function(e,t,i){var n=e.getPointers(),s=n.components.getPage(i,e.getSiteData().getViewMode()),a=n.components.getComponent(t,s);return e.getDisplayedDAL().isExist(a)&&n.components.getPageOfComponent(a).id===i}(t,i,e)}))}(this,t);if(a)if(function(t,i){return e.get(t,["shownInFixed",i],!1)}(s,t))i&&e.forEach(i,(function(t){e.isFunction(t)&&t()}));else{var o=e.get(s,["absoluteTop",t])||e.get(s,["top",t]),r=n.isPopupPage(a)?n.getPopupsContainer():this._site.props.getSiteContainer();this._site.scrollTo({y:o},i,r)}},getRenderRealtimeConfigItem:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getRenderRealtimeConfigItem(e);return t.get(i)},getAllRenderedRootIds:function(){return this._site.getAllRenderedRootIds()},getRootIdsWhichShouldBeRendered:function(){return this._site.getRootIdsWhichShouldBeRendered()},navigateToPage:function(e,t,i,n){this._site.tryToNavigate(e,t,!1,i,n)},updateUrlIfNeeded:function(e){this._site.updateUrlIfNeeded(e)},handleNavigation:function(e,t,i){this._site.handleNavigation(e,t,i)},getDynamicPageRealPageAndReloadLoadApps:function(e){var t=this.getSiteData();this._site.props.getDynamicPageRealPage(t,e,function(){this.getSiteAspect("WidgetAspect").restartApps()}.bind(this))},updatePageNavInfo:function(e,t,i,n){var s=this.getSiteData();if(e.pageId!==s.getPrimaryPageId()&&e.pageId!==s.getCurrentPopupId())throw new Error("you need to navigate to page if it's a different page");this._site.tryToNavigate(e,t,!0,i,n)},forceUpdate:function(e){this._site.forceUpdate(e)},getComponentsByPageId:function(e){return this._site.getComponentsByPageId(e)},getComponentsOnFocusedPage:function(){return this._site.getComponentsByPageId(this.getSiteData().getFocusedRootId())},getPageUrl:function(t){var i=e.get(this.getSiteData().getRootNavigationInfo(),"routerDefinition.routerId");return this.getPageUrlFor(this.getSiteData().getCurrentUrlPageId(),t,i,"CURRENT_INNER_ROUTE")},getPageData:function(){return this.getSiteData().getDataByQuery(this.getSiteData().getCurrentUrlPageId())},setPageTitle:function(e,t,i){m.call(this,{title:e,descriptionSEO:t,pageTitleSEO:i})},setRunTimePageTitle:function(e,t,i){this.setPageTitle(e,t,i),this._site.updateSiteHeadTag(),this._site.notifyAspects(this._site.supportedEvents.siteMetadataChange,{title:this.getSiteData().getCurrentUrlPageTitle(),description:t})},setRunTimeLinkTags:function(e){m.call(this,e),this._site.updateSiteHeadTag()},removePageSEORuntimeData:function(e){v.call(this,e),this._site.updateSiteHeadTag()},setPageMetaKeywords:function(e){m.call(this,{metaKeywordsSEO:e})},setPageMetaOgTags:function(e){var t=this.getSiteData();t.setPageOgTags(t.getCurrentUrlPageId(),e),this._site.updateSiteHeadTag()},setPageJsonld:function(e){var t=this.getSiteData();t.setJsonLd(t.getCurrentUrlPageId(),e)},setPageJsonldImmediate:function(e){var t=this.getSiteData();t.setJsonLd(t.getCurrentUrlPageId(),e),this._site.updateSiteHeadTag(["ld+json"])},setPageLinkTag:function(e){var t=this.getSiteData();t.setPageLinkTag(t.getCurrentUrlPageId(),e)},setPageTwitterMetaTags:function(e){var t=this.getSiteData();t.setPageTwitterTags(t.getCurrentUrlPageId(),e)},getPageUrlFor:function(e,t,n,s){var a=this.getSiteData().getDataByQuery(e);if(!a)return"";var o={pageId:e,title:a.pageUriSEO};return n&&(o.routerId=n,o.innerRoute=s),i.wixUrlParser.getUrl(this.getSiteData(),o,t)},initFacebookRemarketing:function(e){e?a.initFacebookRemarketingPixelId(this.getSiteData(),e):a.initFacebookRemarketingUserPixel(this.getSiteData())},fireFacebookRemarketingPixel:function(e,t){a.fireFacebookRemarketingPixel(this.getSiteData(),e,t)},initGoogleRemarketing:function(){a.initGoogleRemarketingPixel(this.getSiteData())},fireGoogleRemarketing:function(){a.fireGoogleRemarketingPixel()},reportGoogleAnalytics:function(){a.reportGoogleAnalytics.apply(a,[this.getSiteData()].concat(Array.prototype.slice.call(arguments)))},reportGoogleTagManager:function(e){a.reportGoogleTagManager(this.getSiteData(),e)},reportBiAnalytics:function(e){a.reportBiAnalytics(this.getSiteData(),e)},fireFacebookCustomEvent:function(e,t,i){a.fireFacebookCustomEvent(this.getSiteData(),e,t,i)},initYandexMetrika:function(){a.initYandexMetrika(this.getSiteData())},reportYandexPageHit:function(e){a.reportYandexPageHit(e)},reportBI:function(e,t){u.reportBI(this._site.props.siteData,e,t)},getBiVisitorId:function(){return e.get(this.getSiteData(),"wixBiSession.visitorId")},setBiVisitorId:function(t){e.set(this.getSiteData(),["wixBiSession","visitorId"],t)},getBiSiteMemberId:function(){return e.get(this.getSiteData(),"wixBiSession.siteMemberId")},setBiSiteMemberId:function(t){e.set(this.getSiteData(),["wixBiSession","siteMemberId"],t)},reportCurrentPageEvent:function(t,i){var n=this._site.props.siteData;t||(t=e.isString(n.currentUrl)?n.currentUrl:n.currentUrl.full),i||(i=n.getCurrentUrlPageId());var s=n.getExternalBaseUrl().replace(/\/$/,""),a=t.replace(s,"");this.reportPageEvent(a,i)},reportPageEvent:function(e,t){var n=this._site.props.siteData;a.reportPageEvent(n,e),i.integrations.promoteAnalytics.reportPageView(this,{pagePath:e,pageTitle:n.getPageTitle(t),pageId:t,pageNumber:n.biData.getPageNumber()})},reportBeatEvent:function(e,t){u.reportBeatEvent(this._site.props.siteData,e,t)},reportBeatStart:function(e){this.getSiteData().biData.switchPage(e),this.reportBeatEvent("start",e)},reportBeatFinish:function(e){this.reportBeatEvent("finish",e);var t=this.getSiteData();i.integrations.promoteAnalytics.trackEvent(this,"WAPageView",{page_number:t.biData.getPageNumber(),page_id:e})},reportPageBI:function(){u.reportBI(this._site.props.siteData)},getUserSession:function(){return this._site.props.siteData.getSvSession()},setUserSession:function(e){if(e!==this.getUserSession()){var t=this.getSiteData();t.pubSvSession(e),i.cookieUtils.deleteCookie("svSession",t.currentUrl.hostname,t.getMainPagePath()),i.cookieUtils.setCookie("svSession",e,null,t.currentUrl.hostname,t.getMainPagePath()),this._site.notifyAspects(this._site.supportedEvents.svSessionChange,e)}},triggerFakeModeChange:function(e,t){this._site.notifyAspects(this._site.supportedEvents.fakeModeChange,e,t)},isSiteBusy:function(){return this._site.isBusy},isSiteBusyIncludingTransition:function(){return this.isSiteBusy()||this._site.isDuringTransition},startingPageTransition:function(t){var i=this.getSiteData().getRootNavigationInfo(),n=!e.isEqual(i.routerDefinition,t.routerDefinition)||i.innerRoute!==t.innerRoute,s=t.isLanguageChange;(t.pageId&&this.getSiteData().getFocusedRootId()!==t.pageId||n||s)&&(this._site.isDuringTransition=!0)},endingPageTransition:function(){this._site.isDuringTransition=!1},setSiteScrollingEnabled:function(e){e?t("html").removeClass("disableSiteScroll"):t("html").addClass("disableSiteScroll")},enterFullScreenMode:function(e){var i,n=this.getSiteData();if(n.isInSSR()){var s=n.ssr.bodyClasses=n.ssr.bodyClasses||[];i=s.push.bind(s)}else{var a=t("body");i=a.addClass.bind(a)}i("fullScreenMode"),e&&!e.scrollable||i("fullScreenMode-scrollable")},exitFullScreenMode:function(){"undefined"!=typeof window?(t("body").removeClass("fullScreenMode"),t("body").removeClass("fullScreenMode-scrollable")):i.log.warn("SiteAPI.exitFullScreenMode should only be called from client specific code!")},enterOverflowHiddenMode:function(){var e,i=this.getSiteData();if(i.isInSSR()){var n=i.ssr.bodyClasses=i.ssr.bodyClasses||[];e=n.push.bind(n)}else{var s=t("body");e=s.addClass.bind(s)}e("overflowHidden")},exitOverflowHiddenMode:function(){"undefined"!=typeof window?t("body").removeClass("overflowHidden"):i.log.warn("SiteAPI.exitOverflowHiddenMode should only be called from client specific code!")},enterMediaZoomMode:function(){var e,i=this.getSiteData();if(i.isInSSR()){var n=i.ssr.htmlClasses=i.ssr.htmlClasses||[];e=n.push.bind(n)}else{var s=t("html");e=s.addClass.bind(s)}e("media-zoom-mode")},exitMediaZoomMode:function(){"undefined"!=typeof window?t("html").removeClass("media-zoom-mode"):i.log.warn("SiteAPI.exitMediaZoomMode should only be called from client specific code!")},forceBackground:function(e){window.document.body.style.background=e},disableForcedBackground:function(){window.document.body.style.background=""},passClickEvent:function(e){this._site.clickHandler(e)},getRuntimeDal:function(){return this.getSiteDataAPI().runtime},hasPendingFonts:function(){return this.getSiteAspect("fontsLoaderAspect").hasPendingFonts()},getCurrentPopupId:function(){return this.getSiteData().getCurrentPopupId()},openPopupPage:function(e){this.getActionQueue().runImmediately(function(){this.navigateToPage({pageId:e},!0)}.bind(this))},closePopupPage:function(){this.getActionQueue().runImmediately(function(){this.navigateToPage(this.getSiteData().getRootNavigationInfo(),!0)}.bind(this))},isPopupOpened:function(){return this.getSiteData().isPopupOpened()},getSiteDataAPI:function(){return e.get(this,"_site.props.viewerPrivateServices.siteDataAPI")},getPointers:function(){return this._site.props.viewerPrivateServices.pointers},getDisplayedDAL:function(){return this._site.props.viewerPrivateServices.displayedDAL},getActiveModes:function(){return this.getSiteDataAPI().modes.getActiveModes()},updateActiveSOSPModes:function(e){return this.getSiteDataAPI().updateActiveSOSPModes(e)},getPrevRenderActiveModes:function(){return this._site.prevActiveModes},activateModeById:function(e,t,i){var n=this.getPointers(),s=n.components.getPage(t,this.getSiteData().getViewMode()),a=n.components.getComponent(e,s);this.activateMode(a,i)},activateMode:function(t,i){var n=this.getPointers(),s=n.components.getPageOfComponent(t);(function(t,i,n){for(;i;){if(e.get(n,[i.id,"isCurrentlyAnimating"]))return!0;i=t.components.getParent(i)}return!1})(n,t,this._site.getComponentsByPageId(s.id))||this.getSiteDataAPI().modes.activateMode(t,i)},deactivateModeById:function(e,t,i){this.getSiteDataAPI().modes.deactivateModeById(e,t,i)},deactivateMode:function(e,t){this.getSiteDataAPI().modes.deactivateMode(e,t)},resetRuntimeOverrides:function(e,t){this.getSiteDataAPI().resetRuntimeOverrides(e,t)},switchModesByIds:function(e,t,i,n){this.getSiteDataAPI().modes.switchModesByIds(e,t,i,n)},resetAllActiveModes:function(){this.getSiteDataAPI().modes.resetAllActiveModes()},setMobileView:function(e){var t=this.getSiteData();if(t.isMobileView()!==e){h.call(this,e),t.setMobileView(e),e||t.updateScreenSize();var i=t.getRootNavigationInfo();i.routerDefinition?this.getDynamicPageRealPageAndReloadLoadApps(i):this.getSiteAspect("WidgetAspect").restartApps()}},showSelectionSharer:function(e,t){this._site.refs.selectionSharer.show(e,t)},hideSelectionSharer:function(){this._site.refs.selectionSharer.isVisible()&&this._site.refs.selectionSharer.hide()},isSelectionSharerVisible:function(){return e.get(this._site,"refs.selectionSharer")&&this._site.refs.selectionSharer.isVisible()},getWixCodeAppApi:function(){return this._site.props.wixCodeAppApi},getControllerStageData:function(t,i,n){var s=g.call(this,t,i,n);if("default"===n)return s;var a=g.call(this,t,i,"default");return e.defaults({},s,a)},getControllerState:function(e){var t=this.getPointers().platform.getControllerStatePointer(e);return this.getDisplayedDAL().get(t)||"default"},getAppManifest:function(e){var t=this.getPointers().platform.getAppManifestPointer(e);return this.getDisplayedDAL().get(t)},getComponentByPageAndCompId:function(e,t){return this._site.getComponentByPageAndCompId(e,t)},getAspectGlobalData:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().siteAspects.getAspectGlobalData(e);return t.get(i)},getAspectComponentData:function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers(),s=t?n.siteAspects.getAspectComponentData(e,t):n.siteAspects.getAspectAllComponentsData(e);return i.get(s)},setAspectComponentData:function(e,t,i){var n=this.getDisplayedDAL(),s=this.getPointers().siteAspects.getAspectComponentData(e,t);n.set(s,i)},getRenderFlag:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getRenderFlag(e);return t.get(i)},isLoggedInToWix:function(){var e=this.getDisplayedDAL().getByPath(["requestModel","cookie"]);return i.wixUserApi.isSessionValid(e)},logoutFromWix:function(){var e=this.getSiteData();i.wixUserApi.logout(e),this.forceUpdate()},registerClientSpecMapUpdateCallback:function(t){if(e.isFunction(t)){var i=this.getDisplayedDAL(),n=f("ClientSpecMapUpdateCallbacks");if(i.isPathExist(n)){var s=i.getByPath(n);i.pushByPath(n,t,s.length)}else i.setByPath(n,[t])}},getSiteRootPosition:function(){return this._site.props.siteRootPosition},setClientSpecMap:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getClientSpecMap();t.set(i,e),this.triggerClientSpecMapUpdatedCallbacks(e)},triggerClientSpecMapUpdatedCallbacks:function(t){var i=this.getDisplayedDAL();this._site.props.eventsManager&&this._site.props.eventsManager.emit("clientSpecMapUpdated",t);var n=f("ClientSpecMapUpdateCallbacks");if(i.isPathExist(n)){var s=i.getByPath(n);s&&e.isArray(s)&&e.forEach(s,(function(e){e(t)}))}},getActionQueue:function(){var e=this.getSiteDataAPI();return e&&e.getActionQueue()},setQueueFlushStart:function(){this.getSiteData().relayoutBlockedByQueue=!0},setQueueFlushEnd:function(){this.getSiteData().relayoutBlockedByQueue=!1},setComponentRenderStart:function(e){this.getSiteData().renderingCompsMap.set(e,!1)},setComponentRenderEnd:function(e){this.getSiteData().renderingCompsMap.set(e,!0)},setPopoversLayer:function(e){this.getSiteData().popoversLayer=e},getPopoversLayer:function(){return this.getSiteData().popoversLayer},getSantaFetcher:function(t){var i=p.get(this).fetchers,n=r.santaTypesFetchersRegistry.getRegisteredFetchers(),s=e.get(i,t.id)||e.get(n,t.id);return s.fetch||s},registerCompBehaviours:function(e,t,i){var n=this.getDisplayedDAL(),s=this.getPointers(),a=s.compBehaviours.getCompBehavioursMapPointer(),o=s.getInnerPointer(a,[e]),r=s.compBehaviours.getCompBehaviourPointer(e,t);n.isExist(o)||n.set(o,{}),n.set(r,i);var c=this.getSiteAspect("actionsAspect"),u=this.getSiteAspect("behaviorsAspect");c.registerBehaviors(t,e,i),u.setBehaviorsForActions(u.convertBehaviors(i,t),e,t)},unregisterCompBehaviours:function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers().compBehaviours.getCompBehaviourPointer(e,t);i.isExist(n)&&i.remove(n);var s=this.getSiteAspect("actionsAspect"),a=this.getSiteAspect("behaviorsAspect");s.registerBehaviors(t,e,[]),a.setBehaviorsForActions([],e,t)},getCompBehaviours:function(){var e=this.getDisplayedDAL(),t=this.getPointers().compBehaviours.getCompBehavioursMapPointer();return e.get(t)},resetCompBehavioursByPageAndCompId:function(e,t){return this.getRuntimeDal().resetActionsAndBehaviors(t)},isDuringPostUpdatesOperations:function(e){return!!this.getSiteData().postUpdateOperationsRenders[e]},removePostUpdateOperationsRender:function(e){delete this.getSiteData().postUpdateOperationsRenders[e]},getLayoutMechanism:function(){return n.layoutUtils.getLayoutMechanism(this.getSiteData())},didReact:function(){return this.getSiteData().reacted},resetSiteReacted:function(){this.getSiteData().reacted=!1},isExperimentOpen:function(e){return c.isOpen(e,this.getSiteData())},getExperimentValue:function(e){return c.getValue(e,this.getSiteData())},resetCustomClickOccurred:function(){this.getSiteData().customClickOccurred=!1},getCustomClickOccurred:function(){return this.getSiteData().customClickOccurred},setCustomClickOccurred:function(){this.getSiteData().customClickOccurred=!0},getTPAComponentsOnPage:function(t){var i=this.getPointers(),n=i.components.getPage(t,this.getSiteData().getViewMode());if(n){var s=i.components.getChildrenRecursively(n);return e.reduce(s,function(t,n){var s=this.getDisplayedDAL().get(i.getInnerPointer(n,["componentType"]));return e.includes(l,s)&&t.push(n.id),t}.bind(this),[])}},reloadPage:function(){window.location.reload()},getCompsDataOnPage:function(t){var i=this,n=this.getPointers(),s=this.getDisplayedDAL(),a=n.components.getPage(t,this.getSiteData().getViewMode());if(a){var o=n.components.getChildrenRecursively(a);return e.map(o,(function(a){var o=n.getInnerPointer(a,"dataQuery"),r=s.get(o),c=s.get(n.getInnerPointer(a,["componentType"])),u=i.getSiteData().getDataByQuery(r,t,i.getSiteData().dataTypes.DATA);return e.assign(u,{componentType:c,compId:a.id})}))}},getCompProps:s.componentPropsBuilder.getCompProps,getHostLibsAspectConstructor:function(e){return r.siteAspectsRegistry.getHostLibsAspectConstructor(e)},getComponentType:function(e){var t=this.getPageData().id,i=this.getPointers(),n=this.getDisplayedDAL(),s=i.components.getPage(t,this.getSiteData().getViewMode()),a=i.components.getComponent(e,s);return n.get(i.getInnerPointer(a,["componentType"]))},getSvgStringToStoreData:function(e){return n.svg.svgStringToStoreData(e)},notifyOnRendered:function(){this._site.notifyAspects(this._site.supportedEvents.onRendered)},notifyFullyRendered:function(){this._site.notifyAspects(this._site.supportedEvents.fullyRendered)},getClientSpecMap:function(){return this.getSiteData().getClientSpecMap()},getPublicBaseUrl:function(){return this.getSiteData().getPublicBaseUrl()},registerToSiteReady:function(e){this._site.registerAspectToEvent(this._site.supportedEvents.siteReady,e)},getInitialClientSpecMap:function(){return this.getSiteData().initialClientSpecMap}},e.forEach({registerStateChange:"mediaAspect",unregisterStateChange:"mediaAspect",executeAction:"actionsAspect",previewAnimation:"actionsAspect",previewTransition:"actionsAspect",stopPreviewAnimation:"actionsAspect",reloadPageAnimations:"actionsAspect",isInPageTransition:"actionsAspect",stopAndClearAllAnimations:"animationsAspect",handleBehavior:"behaviorsAspect",scroll:"scrollableAspect",scrollBy:"scrollableAspect",getTotalScroll:"scrollableAspect",refreshAppsInCurrentPage:"WidgetAspect",registerToNotifyApplicationRequestFromViewerWorker:"WidgetAspect",registerToAppInstanceUpdate:"WidgetAspect",isSiteScrollingBlocked:"siteScrollingBlocker",removeAllPopups:"tpaPopupAspect",removeModal:"tpaModalAspect",updatePreventRefreshState:"tpaCompStateAspect",getComponentsToRender:"tpaWorkerAspect",getMemberDetailsInPreview:"siteMembers",destroyAppsContainer:"wixCodeWidgetAspect",reloadAppsContainer:"wixCodeWidgetAspect",initApp:"wixCodeWidgetAspect",updateBiData:"WidgetAspect",registerNavigationComplete:"actionsAspect",registerNavigationError:"actionsAspect",unregisterNavigationError:"actionsAspect",registerToPageNavigationCanceled:"actionsAspect",updateSectionUrlState:"tpaCompStateAspect",updateSectionUrlParams:"tpaCompStateAspect",updatePushState:"tpaCompStateAspect",reportStateChanged:"tpaCompStateAspect",loadAllContextsUserCode:"WidgetAspect",triggerAppStudioWidgetOnPropsChanged:"WidgetAspect",getStylableEditorInstance:"stylableRenderingAspect",setQuickChanges:"stylableRenderingAspect",revertQuickChanges:"stylableRenderingAspect",forceState:"stylableRenderingAspect",revertForceState:"stylableRenderingAspect"},(function(t,i){return e.set(d.prototype,i,(function(){var e=this.getSiteAspect(t);return e[i].apply(e,arguments)}))})),d}.apply(t,n))||(e.exports=s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n,s;n=[i(14),i(0),i(7),i(9),i(2),i(16),i(187),i(198),i(560),i(60),i(199),i(8)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u,p,l){"use strict";var d=s.urlUtils,g=e.createElement.bind(null,o);g.type=o;var h={PAGE_LOADED_FIRST_RENDER:"page_loaded_first_render",PAGE_LOADED:"page_loaded"},f={},m={pageId:s.errorPages.IDS.INTERNAL_ERROR},v=0;function y(e,i,n){var s=function(e,i){if(e.loadDocumentServices)return t(i).keys().pull("masterPage").value();var n=e.rendererModel.pageList;return t.map(n.pages,"pageId")}(e,n);return t.mapValues(n,(function(t,n){return i&&window.pagesData&&window.pagesData[n]?t:a.dataFixer.fix(t,s.slice(),e.requestModel,e.currentUrl,e.urlFormatModel,"site"===e.viewMode,e.rendererModel)}))}function A(e,i,n){var o={};s.urlUtils.isQueryParamOn(i.currentUrl,"isSantaEditor")&&(o=t.assign(o,{componentViewMode:"editor"})),i.rendererModel.previewMode&&(o=t.assign(o,{isSocialInteractionAllowed:!1,isPlayingAllowed:!1})),i.renderFlags=t.assign({},i.renderFlags,o);var r=new a.FullSiteData(i);r.updateScreenSize();var c=p.createSiteDataAPIAndDal(r,e,n),u=c.siteData,l=c.siteDataAPI,d={pointers:c.pointers,displayedDAL:c.displayedDal,siteDataAPI:l},g=u.isClientAfterSSR();return{fullSiteData:r,displayedSiteData:u,siteDataWrapper:c,viewerPrivateServices:d,isServerSideRender:g,siteModel:i,siteDataAPI:l}}function S(e){var i=e.siteDataWrapper.fullPagesData.pagesData;if(i&&(y(e.siteModel,e.isServerSideRender,i),i.masterPage)){e.siteDataAPI.createDisplayedPage("masterPage");var n=e.siteModel.landingPageNavigationInfo||s.wixUrlParser.parseUrl(e.displayedSiteData,e.displayedSiteData.currentUrl.full);e.displayedSiteData.setRootNavigationInfo(n),t.forEach(i,(function(t,i){e.siteDataAPI.createDisplayedPage(i)}))}return e}function P(e,i,n,a){if(!!e.documentServicesModel)I(e,i,n,a);else{var o=i.redirectUrl;d.isExternalUrl(o)?window.location=o:d.isRelativeUrl(o)&&v<4?(v++,function(e,i,n){var a=d.joinURL(e.getExternalBaseUrl(),i),o=s.wixUrlParser.parseUrl(e,a);o.routerDefinition?_(e,o,(function(e){n(t.assign(o,e))})):(o.isStaticPageRedirect=!0,n(o))}(e,o,a)):a(m)}}function I(e,i,n,s){e.addDynamicPageData(i.pageId,i.pageData,n),e.addDynamicPageHeadData(i.pageId,i.pageHeadData),s({pageId:i.pageId,title:t.get(i.pageHeadData,"title",""),errorInfo:i.errorInfo,tpaInnerRoute:i.tpaInnerRoute,routerPublicData:i.publicData})}function _(e,i,n){var o=i.routerDefinition,r=a.routersBackEndRequests.makeParamObjFromSiteData(e,o,i);a.routersBackEndRequests.getPage(r,(function(t){if(e.isInSSR()){var i=t.redirectUrl,s=t.sendStatus,a=t.status,r=t.message,c=d.isRelativeUrl(i)?d.joinURL(e.getExternalBaseUrl(),i):i;if(s||i)return e.wixCodeSeo?n(m):n({redirectUrl:c,status:a,message:r})}t.redirectUrl?P(e,t,o,n):I(e,t,o,n)}),(function(i,a,c){!!e.documentServicesModel||(e.isInSSR()?e.onPageRequestFailed(t.get(r,"publicBaseUrl"),500,c):I(e,{pageId:s.errorPages.IDS.INTERNAL_ERROR},o,n))}),e)}function D(e,i,n){if("undefined"!=typeof window&&t.get(window,"history.replaceState")&&n)try{window.history.replaceState(null,i,e)}catch(e){}}function C(e,i){t.forEach(f[e],(function(e){e.apply(null,i)}))}function E(e,t){var i=e.getPrimaryPageId()===t.pageId;return e.isPopupOpened()&&i}function b(e,i,n,a,o,r,c){s.loggingUtils.fedopsLogger.interactionStarted(s.loggingUtils.fedopsLogger.INTERACTIONS.NAVIGATE_TO_PAGE);var u=e.props.siteData,p=e.siteAPI,l=p.getSiteAspect("WidgetAspect");(u.getCurrentUrlPageId()!==a.pageId&&p.reportBeatStart(a.pageId),u.getPrimaryPageId()!==a.pageId&&a.anchorData||a.anchorData&&u.getCurrentUrlPageId()===a.pageId&&a.routerDefinition)&&p.getSiteAspect("actionsAspect").registerNextAnchorScroll(a.anchorData);var g=!0,f=u.currentUrl.full,m=function(){if(C(h.PAGE_LOADED,[p,a]),g){g=!1,0===n.indexOf("#")?u.currentUrl.hash=n:u.currentUrl=d.parseUrl(n),function(e,t,i,n){var a=e.isPopupPage(n.pageId),o=e.isUsingUrlFormat(s.siteConstants.URL_FORMATS.SLASH),r=E(e,n);return!a&&i!==t&&o&&!r}(u,f,n,a)&&p.reportCurrentPageEvent(n,a.pageId);var e=function(e,t){var i=e.isPopupPage(t.pageId),n=E(e,t);return!i&&!n}(u,a);u.setRootNavigationInfo(a,!r),l.pageNavigationInfoChanged(a.pageId),u.isViewerMode()&&(c?D(n,a.title,c):function(e,i,n){if("undefined"!=typeof window&&t.get(window,"history.pushState")&&n)try{window.history.pushState(null,i,e)}catch(e){}}(n,a.title,o)),e&&M(u,a.pageId)}s.loggingUtils.fedopsLogger.interactionEnded(s.loggingUtils.fedopsLogger.INTERACTIONS.NAVIGATE_TO_PAGE)};return l.setContextIdToIgnore(a.pageId),function(e,t){var i=e.pageId===t.getFocusedRootId()&&e.imageZoom,n=!!t.hasPage(e.pageId),s=e.pageId===t.getPrimaryPageId(),a=e.pageAdditionalData===t.getExistingRootNavigationInfo().pageAdditionalData;return e.isLanguageChange||!(i||n&&s&&a)}(a,u)?(i.loadPage(a,(function(){p.getActionQueue().runImmediately(m)})),!0):(p.getActionQueue().runImmediately(m),!0)}function T(){return window}s.sessionFreezer.freeze(f);var R={"ld+json":O},w=function(e,i,n){n?t.forEach(n,(function(t){R[t](e,i,k(e))})):function(e,t){if(M(e,t),"WixSite"===e.rendererModel.siteInfo.documentType){x(k(e),{name:"googleTagManagerScript",markup:r.getGoogleTagManagerScript()},!1)}}(e,i)};function M(e,s){if(!e.isInSeo()||e.isInSSR()){!function(e){if(e.isInSSR())return e.ssr.headTags={},void e.resetCurrDynamicPageMetaTags();var s=["[name=description]","[name=keywords]",'[property="og:title"]','[property="og:description"]','[property="og:url"]','[property="og:image"]','[rel="amphtml"]'];t.forEach(n.constants.TPA_LINK_TAGS.SUPPORTED_RELS,(function(e){s.push('[data-id="'.concat(n.constants.TPA_LINK_TAGS.DATA_ID,'"][rel="').concat(e,'"]'))})),t.get(e,"publicModel.indexable")&&s.push("[name=robots]");var a=e.getCurrDynamicPageMetaTags();t.forEach(a,(function(e,i){t.startsWith(i,"og:")?s.push('[property="'.concat(i,'"]')):s.push('[name="'.concat(i,'"]'))})),e.resetCurrDynamicPageMetaTags(),l.isOpen("sv_twitterMetaTags",e)&&(s=s.concat(['[name="twitter:card"]','[name="twitter:title"]','[name="twitter:description"]','[name="twitter:image"]']));s.forEach((function(e){i(e,window.document.head).remove()}))}(e);var a=k(e);!function(e){e.isInSSR()||window.isMockWindow||(window.document.title=e.getCurrentUrlPageTitle())}(e),function(e,i,n){if(e.isInSSR())return void t.assign(n,r.getPageMetaData(e,i));var s=r.getPageMetaTags(e,i);t.forEach(s,(function(e){x(n,{markup:e})}))}(e,s,a),O(e,s,a),function(e,i,n){if(t.get(e,"publicModel.hasBlogAmp")){var s=r.getPageLinkTag(e,i);s&&x(n,{name:"amphtml",markup:s})}}(e,s,a),t.forEach(n.constants.TPA_LINK_TAGS.SUPPORTED_RELS,(function(t){!function(e,t,n,s){var a=r.getTpaLinkTag(e,t,s);if(""!==a){i('link[rel$="'.concat(s,'"]'),n).length||x(n,{name:s,markup:a},!1)}}(e,s,a,t)}))}}function O(e,t,n){!function(e,t){e.remove&&i(t,e).remove()}(n,'script[type="application/ld+json"][data-pageid]');var s=r.getPageJsonldTag(e,t);s&&x(n,{name:"jsonld",markup:s})}function k(e){return e.isInSSR()||window.isMockWindow?(e.ssr.headTags=e.ssr.headTags||{},e.ssr.headTags):window.document.head}function x(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=n?a.xss.filterHtmlString(t.markup,{allowHeadTags:!0,allowOneSelfClosingMetaTag:!0}):t.markup;e.append?i(e).append(s):e[t.name]=s}function L(e,t){if(!s.errorPages.isErrorPage(t.pageId)){var i=s.wixUrlParser.getUrl(e,t);!t.routerDefinition&&e.isViewerMode()&&i!==e.currentUrl.full&&function(e,t,i){D(e,t,!0),i.currentUrl=d.parseUrl(e)}(i,t.title,e)}}function N(e){return new Promise((function(i){if(e.landingPageNavigationInfo)i(e.landingPageNavigationInfo);else{var n=s.wixUrlParser.parseUrl(e,e.currentUrl.full);if(t.get(n,"routerDefinition"))return v=0,void _(e,n,i);i(n)}})).then((function(i){return e.setRootNavigationInfo(i),s.loggingUtils.logger.reportBeatEvent(e,6,i.pageId),function(e){if(!e.isInSSR()&&!window.isMockWindow&&window.performance&&performance.getEntriesByType)try{var i=/(skins|require)\.min\.js$/,n=t(performance.getEntriesByType("resource")).toArray().filter((function(e){return i.test(e.name)})).map((function(e){var t=e.name.match(i),n=e.responseEnd-(e.responseStart||e.startTime),s={Name:t[1],DnsTime:Math.round(e.domainLookupEnd-e.domainLookupStart),ConnectTime:Math.round(e.connectEnd-e.connectStart),Ttfb:Math.round(e.duration-n),ResponseTime:Math.round(n)},a=e.transferSize||e.encodedBodySize;return a&&e.duration&&(s.Kbps=Math.round(a/e.duration)),s})).map((function(e){var i=t.includes(e.Name,"require")?"small":"large";return t.mapKeys(e,(function(e,t){return i+t}))})).reduce((function(e,i){return t.assign(e,i)}),{});s.loggingUtils.logger.reportBI(e,u.CDN_PERFORMANCE,n)}catch(e){}}(e),c.init(e),i}))}function B(e,i,n,a,o){return new Promise((function(r){i.siteDataAPI.loadPage(a,(function(){a.isStaticPageRedirect||t.assign(a,s.wixUrlParser.parseUrl(e,e.currentUrl.full)),s.errorPages.isErrorPage(a.pageId)&&(e.isInSSR()?function(e,t){var i=s.errorPages.getErrorPageMasterData(t),n=e.pointers.page.getPageData("masterPage"),a=e.pointers.getInnerPointer(n,[t]),o=e.pointers.general.getAllStylesInPage(t);e.displayedDAL.set(a,i.masterPageData),e.displayedDAL.merge(o,i.themeData)}(i,a.pageId):(s.errorPages.setIsFixingDisplayedMasterPage(),s.errorPages.updateErrorPageMasterData("masterPage",e.pagesData.masterPage))),e.setRootNavigationInfo(a),L(e,a),e.isClientAfterSSR()||s.mobileViewportFixer.fixViewportTag(e),C(h.PAGE_LOADED_FIRST_RENDER,[e,n,!!a.isStaticPageRedirect]),r(a)}),o)}))}function U(e,t,i){var n=i.wixCodeAppApi;return N(e).then((function(i){return B(e,t,n,i,!0)}))}function F(e,i,n,a){function o(){return s.loggingUtils.performance.finish(s.loggingUtils.performanceMetrics.RENDER_PREPARE,{category:s.loggingUtils.performance.VERBOSE}),a(function(e,i,n){var s="wixSiteProperties";return l.isOpen("mobileNonOptimizedOverflow",e)&&(s+=" mobile-non-optimized-overflow"),g(t.assign({},n,{className:"WixSite"===e.rendererModel.siteInfo.documentType?s:"noop",siteData:e,viewerPrivateServices:i,rootId:"masterPage",navigateMethod:b,updateUrlIfNeededMethod:L,getDynamicPageRealPage:_,updateHeadMethod:w,getSiteContainer:T}))}(e,i,n))}return!e.isInSSR()&&e.isViewerMode()&&n.wixCodeAppApi&&n.wixCodeAppApi.isAppInitiated()&&setTimeout(o,10),o()}return{isProtectedPage:function(e,i){if(i=i||e.getPrimaryPageId(),s.errorPages.isErrorPage(i))return!1;var n=t.get(e,"rendererModel.pageList.pages"),a=t.find(n,{pageId:i});return a&&!a.pageJsonFileName},createSitePrivates:A,extendPrivates:S,createSitePrivatesEx:function(){return S(A.apply(this,arguments))},fixPages:y,resolveRootNavigationInfo:N,loadPagesData:B,prepareSiteForRender:U,doRenderSite:F,renderSite:function(e,t,i,n){return U(e,t,i).then((function(){return F(e,t,i,n)}))},WixSiteReact:o,hooks:{types:h,registerHook:function(e,t){f[e]=f[e]||[],f[e].push(t)}}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(7),i(0),i(14),i(4),i(13),i(6),i(20),i(39),i(2),i(542),i(188),i(544),i(545),i(24),i(16),i(125),i(547),i(548),i(553),i(194),i(554),i(555),i(556),i(557),i(558),i(92),i(60),i(22),i(9),i(8)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u,p,l,d,g,h,f,m,v,y,A,S,P,I,_,D,C,E,b,T,R,w){"use strict";var M=7,O=8,k=14,x=200,L=500,N=c.componentPropsBuilder,B=n.createElement.bind(null,p);B.type=p;var U=n.createElement.bind(null,l);U.type=l;var F=n.createElement.bind(null,I);F.type=I;var q=n.createElement.bind(null,y);q.type=y;var W=n.createElement.bind(null,A);W.type=A;var V=n.createElement.bind(null,S);function G(e){var t=this;this.pendingRenderCounter=r.computed((function(){return i(this.props.siteData.renderingCompsMap.values()).reject().size()+(this.props.siteData.relayoutBlockedByQueue?1:0)}),{context:this,name:"pendingRenderCounter"}),r.observe(this.pendingRenderCounter,r.action((function(n){if(0===n.newValue&&t.props.siteData.renderingCompsMap.size>0){var s=t.props.siteData.renderingCompsMap.toJS();t.pendingReLayoutCompsMap=i.assign(t.pendingReLayoutCompsMap||{},s),t.reLayoutPending=!0,t.props.siteData.renderingCompsMap.clear(),e()}})),!0)}function H(e,t){var n=i.get(e,["compRefs",t]),s=i.get(e,["refs",t]);return n||s}V.type=S;var Q=function(e,t,i,n,s,a,r){return(e=(e=(e=(e=(e=(e=e&&t?H(e,t):e)&&i?H(e,i):e)&&n?H(e,n):e)&&s?H(e,s):e)&&a?H(e,a):e)&&r?H(e,r):e)&&o.findDOMNode(e)};function j(e,t,i,n,s){return{viewerPrivateServices:e,siteAPI:t,addComponentRef:i,styleRoot:n?"#".concat(n):null,requestRelayout:s}}function K(e,t){var n=this.deletedMeasureMap||this.props.siteData.measureMap,s=N.getRootProps(l,this.props.rootId,e,this.props.viewerPrivateServices,n);return s.structure=i.merge({},s.structure,{id:"masterPage",layout:{position:this.props.siteRootPosition},componentType:"mobile.core.components.MasterPage"}),s.ref=this.props.rootId,s.refInParent=s.ref,s.className="SITE_ROOT",s.firstPage=!0,s.style={width:"100%"},s.key="".concat(e.getSiteData().isMobileView()?"mobile_":"desktop_","siteRoot"),s.mobxObserverWrapperProps=t,s}function z(){var e=this;return i.throttle((function(){!e.dead&&e.getMasterPage()&&(e.siteAPI.resetSiteReacted(),e.siteAPI.getActionQueue().runImmediately(e.props.siteData.updateScreenSize),e.siteAPI.didReact()||(e.registerReLayoutPending("WixSiteReact"),e.reLayout()))}),500,{leading:!1,trailing:!0})}function J(e,t){setTimeout((function(){requirejs(["mousetrap"],(function(i){i.bind(e,t)}),i.noop)}),500)}function Y(){if(window.rendererModel){var e=this.props.siteData;!e.isViewerMode()||e.isAddPanelView||e.isMobileDevice()||e.isTabletDevice()||J("ctrl+alt+shift+e",(function(){var e=i(window.rendererModel.runningExperiments).pickBy((function(e){return"new"===e})).keys().value();window.alert("Active Experiments:\n".concat(e.join("\n")))}))}}function Z(){var e=this.props.siteData,t=e.baseVersion||"could not retrieve version!";e.isMobileDevice()||e.isTabletDevice()?i.find(e.currentUrl.query,(function(e,t){return"alertversion"===t.toLowerCase()}))&&window.alert("You are running React!\nVersion: ".concat(t)):e.isViewerMode()&&!e.isAddPanelView&&J("ctrl+alt+shift+v",(function(){window.alert("You are running React!\nVersion: ".concat(t))}))}function X(e){e.componentDidLayout&&e.componentDidLayout.call(e),e.componentDidLayoutAnimations&&e.componentDidLayoutAnimations.call(e),i.forOwn(e.refs,X),i.forOwn(e.compRefs,X)}function $(){var e=R.layoutAPI(this.siteAPI),t=e.getCurrentUrlPageId(),i=Q.bind(null,this.getPageById(t)),n=Q.bind(null,this.getMasterPage()),s=Q.bind(null,this),a={inner:u.structuresDescription.getInner(e,i),outer:u.structuresDescription.getOuter(e,n),siteBackground:u.structuresDescription.getSiteBackground(s)},o=e.getCurrentPopupId();return o&&(a[o]=u.structuresDescription.getRootDescriptor(e,o,Q.bind(null,this.getPageById(o)))),a}function ee(e){var t,n=R.layoutAPI(this.siteAPI),s=this.getAspectsComponentStructures(),a=(t=this.refs.siteAspectsContainer,function(){var e=i.toArray(arguments);return Q.apply(null,[t].concat(e))||Q.apply(null,[t.refs.aspectPortal].concat(e))}),o=i.transform(s,(function(e,t){e[t.id]={structure:t,getDomNodeFunc:a}}),{});return e?(i.assign(o,$.call(this)),n.shouldShowWixAds()&&(o.wixAds=u.structuresDescription.getWixAds(n)),o):o}var te=r.action((function(e,t){var i=e.getSiteData(),n=!t.routerDefinition,s=i.getFocusedRootId()===e.getCurrentPopupId(),a=s&&t.pageId===i.getPrimaryPageId(),o=i.getFocusedRootId()!==t.pageId,r=t.isLanguageChange;if(n&&o&&!a)e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);else{if(t.routerDefinition){var c=!o,u=t.innerRoute!==i.getRootNavigationInfo().innerRoute;if(c&&u)return e.resetRuntimeOverrides(t.pageId,!0),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),void e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);if(o&&!s)return void e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);if(s)t.pageId===i.getPrimaryPageId()?u&&(e.resetRuntimeOverrides(t.pageId,!0),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t])):e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t])}r&&(e.getAllRenderedRootIds().forEach((function(t){e.resetRuntimeOverrides(t,!0)})),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]))}}));function ie(e){var t=e.getSiteData(),n=E.requested(t);n.length&&e.reportBI(b.PAGE_COMP_TYPES_LIST,{firstPage:1===t.biData.getPageNumber(),compList:JSON.stringify(i.take(n,32))})}function ne(e,t){return B({siteData:t,styleRoot:this.props.scopedRoot?"#".concat(this.props.scopedRoot):null,ref:"theme",key:"wixThemeReactFactory",shouldRenderPage:e,siteAPI:this.siteAPI,requestRelayout:this.requestRelayout})}function se(){return d.getWixBgComponent(this.mobxObserverWrapperProps)}function ae(){return e.utils.createReactElement(P(this.siteAPI),{key:"wixAdsRenderer"})}function oe(){var t=this.getRootStyle();return t.minWidth="".concat(this.props.siteData.getSiteWidth(),"px"),e.utils.createReactElement("div",{className:"SITE_ROOT",key:"SITE_ROOT",id:this.props.scopedRoot?null:"SITE_ROOT",style:t,"aria-hidden":this.state.isAriaHidden},U(K.call(this,this.siteAPI,this.mobxObserverWrapperProps)))}function re(e){return F({currentPopupId:this.props.siteData.getCurrentPopupId(),viewerPrivateServices:this.props.viewerPrivateServices,siteAPI:this.siteAPI,siteData:e,ref:"popupRoot",key:"popupRoot",siteRootStyle:this.getRootStyle(),blockingPopupLayer:this.siteAPI.getRenderFlag("blockingPopupLayer"),measureMap:this.deletedMeasureMap,mobxObserverWrapperProps:this.mobxObserverWrapperProps})}function ce(){return q({ref:"siteAspectsContainer",key:"siteAspectsContainer",siteWidth:this.props.siteData.getSiteWidth(),isMobileView:this.props.siteData.isMobileView(),getAspectComponentDescriptions:this.getAspectComponentDescriptions,siteAPI:this.siteAPI,requestRelayout:this.requestRelayout})}function ue(t){return e.utils.createReactElement(C,{ref:"selectionSharer",key:"selectionSharer",siteBasePath:t.santaBase,siteAPI:this.siteAPI})}function pe(){return W({key:"extraSiteHeight",siteAPI:this.siteAPI})}function le(){return V({siteAPI:this.siteAPI,key:"blockingLayer",layerName:"blockingLayer"})}function de(){var t=T.compFactory.getCompClass(e.components.ThemeRenderer.compType,!1,this.mobxObserverWrapperProps.siteAPI.getSiteData().compFactoryRuntimeState),i={id:"theme_renderer",componentType:e.components.ThemeRenderer.compType};return t({rootId:"masterPage",styleRoot:this.props.scopedRoot?"#".concat(this.props.scopedRoot):null,id:i.id,structure:i,mobxObserverWrapperProps:this.mobxObserverWrapperProps,key:"wix_theme_renderer"})}function ge(e,t,n){var s=[de.call(this),ne.call(this,e,n),e?se.call(this):null,e?oe.call(this):null,ae.call(this),t||e?re.call(this,n):null,ce.call(this),ue.call(this,n),pe.call(this),le.call(this)];return i.compact(s)}function he(e,t,n){var s=[de.call(this),ne.call(this,e,n),ae.call(this),e?se.call(this):null,e?oe.call(this):null,t||e?re.call(this,n):null,ce.call(this),ue.call(this,n),pe.call(this),le.call(this)];return i.compact(s)}return a({displayName:"WixSite",mixins:[v,f.renderDoneMixin,_,D],propTypes:{getDynamicPageRealPage:s.func,navigateMethod:s.func,updateHeadMethod:s.func,updateUrlIfNeededMethod:s.func,extraEventsHandlers:s.object,className:s.string,onAfterLayout:s.func,getSiteContainer:s.func,viewerPrivateServices:s.shape({pointers:s.object.isRequired,displayedDAL:s.object.isRequired,siteDataAPI:s.object.isRequired}).isRequired,siteData:s.object.isRequired,siteRootPosition:s.oneOf(["static","relative"]),scopedRoot:s.string,rootId:s.string,wixCodeAppApi:s.shape({init:s.func.isRequired,sendMessage:s.func.isRequired,registerMessageHandler:s.func.isRequired,registerMessageModifier:s.func.isRequired})},getDefaultProps:function(){return{onAfterLayout:i.noop,siteRootPosition:"static",scopedRoot:null,rootId:"masterPage",wixCodeAppApi:{init:i.noop,sendMessage:i.noop,registerMessageHandler:i.noop,registerMessageModifier:i.noop}}},getPrimaryPage:function(){var e=this.getMasterPage();if("masterPage"===this.props.rootId&&e){var t=this.props.siteData.getPrimaryPageId();e=this.getPageComponent(e,t)}return e},getCurrentPopup:function(){var e=this.props.siteData.getCurrentPopupId();return e?f.reactComponentUtils.getRef(this,"popupRoot",e):null},getMasterPage:function(){return this.refs[this.props.rootId]},getPageById:function(e){var t=this.getMasterPage();return e===this.props.rootId?t:t&&this.getPageComponent(t,e)?this.getPageComponent(t,e):f.reactComponentUtils.getRef(this,"popupRoot",e)},getPageComponent:function(e,t){return i.get(this.getPageRefs(e),t)},getPageOfComp:function(e){var t=this,n=i.find(this.siteAPI.getAllRenderedRootIds(),(function(i){var n=t.getComponentsByPageId(i);return!!n&&!!n[e]}));return this.getPageById(n)},scrollTo:function(e,t,i){i=i||this.props.getSiteContainer();var n,s=this.props.siteData.isMobileView(),a=u.scrollUtils.calcScrollDuration((n=i,{x:n.pageXOffset||n.scrollX||0,y:n.pageYOffset||n.scrollY||0}).y,e.y,s),o=s?"Quint.easeOut":"Sine.easeInOut";this.props.siteData.animations.animate("BaseScroll",i,a,0,{y:e.y,ease:o,callbacks:t})},scrollToAnchor:function(e,t){this.scrollTo(e,{onUpdate:t})},scrollToTop:function(){this.scrollTo({y:0})},getInitialState:function(){var e=this;return this.onAfterLayout=i.once(this.props.onAfterLayout),this.reLayoutPending=!1,this.requestRelayout=function(){return e.reLayout()},this.pendingReLayoutCompsMap={},this.siteAPI=new m(this),this.isBusy=!0,this.isChangingUrlPage=!1,this.siteIsReady=!1,this.siteIsFullyRendered=!1,this.siteAPI.reportBeatEvent(M,this.props.siteData.getPrimaryPageId()),this.compRefs={},this._requestRelayout=this.requestRelayout,{}},addComponentRef:function(e,t){e?this.compRefs[t]=e:delete this.compRefs[t]},componentWillMount:function(){var e=this.props.siteData,t=e.getCurrentUrlPageId(),i=e.getExistingRootNavigationInfo(t);this.mobxObserverWrapperProps=j.call(this,this.props.viewerPrivateServices,this.siteAPI,this.addComponentRef,this.props.scopedRoot,this.requestRelayout),G.call(this,this.reLayoutIfPending),e.isFirstRenderAfterSSR()||this.updateSiteHeadTag();var n=this.siteAPI.isPageAllowed(i)?t:null;this.siteAPI.setComponentRenderStart("WixSiteReact_".concat(this.props.rootId)),this.setState({currentUrlPageId:n,currentPopupId:null})},componentWillUpdate:function(){u.loggingUtils.performance.start(u.loggingUtils.performanceMetrics.RE_RENDER),this.isBusy=!0,this.siteAPI.setComponentRenderStart("WixSiteReact_".concat(this.props.rootId))},getSiteChildren:function(t,i){var n=this.props.siteData,s=this.siteAPI.getSiteData().isMobileView()?he.call(this,t,i,n):ge.call(this,t,i,n);if(this.props.siteData.getMasterPageLayoutSettings().mechanism===f.constants.LAYOUT_MECHANISMS.MESH){var a=g.createMeshEligibilityBeatScriptString(n);s.unshift(e.utils.createReactElement("script",{id:"meshEligibilityBeat",key:"meshEligibilityBeat",dangerouslySetInnerHTML:{__html:a}}))}if(this.siteAPI.getLayoutMechanism()===f.constants.LAYOUT_MECHANISMS.MESH){var o=g.createPartiallyVisibleBeatScriptString(n);s.push(e.utils.createReactElement("script",{id:"partiallyVisibleBeat",key:"partiallyVisibleBeat",dangerouslySetInnerHTML:{__html:o}}))}return s},render:function(){var t=i.now(),n=this.props.siteData,s=n.getExistingRootNavigationInfo(n.getCurrentUrlPageId()),a=this.siteAPI.isPageAllowed(s),o=this.siteAPI.getSiteAspect("siteMembers").shouldRenderCustomSignupPage(s);a||this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(s),n.isInSSR()&&(a?n.ssr.aspectsComponentStructures=i.transform(this.getAspectsComponentStructures(),(function(e,t){e[t.id]={structure:t}}),{}):n.ssr.shouldRenderPage=!1);var r=this.props.className;n.isVisualFocusEnabled()&&(r+=" visual-focus-on");var c=e.utils.createReactElement("div",i.assign({style:{position:"relative"},className:r,id:this.props.scopedRoot?this.props.scopedRoot:null,onClick:this.clickHandler,children:this.getSiteChildren(a,o)},this.props.extraEventsHandlers));return u.trackingReporter.reportDuration({appName:"santa",actionName:"WixSiteReact",actionDurationMs:i.now()-t,pageUrl:n.currentUrl.full,pageId:n.getCurrentUrlPageId()}),c},getRootStyle:function(){var e={width:"100%"};return e.top=this.props.siteData.getPageTopMargin(),e.paddingBottom=this.props.siteData.getPageBottomMargin(),this.state.siteRootHidden&&(e.height=0,e.overflowY="hidden"),e},onPopState:function(){var e=window.location.href,t=f.wixUrlParser.parseUrl(this.props.siteData,e);i.get(t,"queryParams.language")&&u.multilingual.setCurrentLanguage(t.queryParams.language),t&&this.tryToNavigate(t,!0)},onHashChange:function(){var e=f.wixUrlParser.parseUrl(this.props.siteData,window.location.href);e&&this.props.siteData.isUsingUrlFormat("slash")&&this.tryToNavigate(e)},isPageExists:function(e){return i.includes(this.props.siteData.getAllPageIds(),e)||f.errorPages.isErrorPage(e)},updateUrlIfNeeded:function(e){var t=this.siteAPI.getSiteData();this.props.updateUrlIfNeededMethod(t,e)},navigateIfPossible:function(e,t,n,s,a){var o=i.get(this.props,"viewerPrivateServices.siteDataAPI"),r=this.siteAPI.getSiteData();if(this.isPageExists(e.pageId))if(this.siteAPI.isPageAllowed(e)){var c=r.getDataByQuery(e.pageId);if(!c)return;c.isPopup||this.siteAPI.getSiteAspect("siteMembers").forceCloseDialog();var u=i.clone(e);u.title=e.title||c.pageUriSEO;var p=function(e,t,i){var n=[];return w.isOpen("removeQueryParams",e)||t.hasAppSectionParams||n.push("appSectionParams"),f.wixUrlParser.getUrl(e,t,!1,!1,void 0,void 0,n,i)}(r,u,a),l=r.isPopupPage(e.pageId)||t;this.siteAPI.startingPageTransition(u),this.props.navigateMethod(this,o,p,u,!l,n,s)}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(e),this.forceUpdate()},tryToNavigate:function(e,t,n,s,a){var o=this,r=this.siteAPI.getSiteData(),c=this.siteAPI.getSiteAspect("actionsAspect");if(this.currNav=e,function(e,t){if(t.routerDefinition){var n=e.getSiteAspect("tpaComponentsDomAspect"),s=e.getTPAComponentsOnPage(t.pageId);i.forEach(s,(function(e){n.clearComponentIsAlive(e)}))}}(this.siteAPI,r.getRootNavigationInfo()),e.routerDefinition&&(!e.pageId||e.isRefetchingPageAfterLogin))return this.siteAPI.startingPageTransition(e),void this.props.getDynamicPageRealPage(r,e,(function(i){f.errorPages.isErrorPage(i.pageId)?(f.errorPages.setIsFixingDisplayedMasterPage(),f.errorPages.updateErrorPageMasterData("masterPage",r.pagesData.masterPage),o.props.viewerPrivateServices.siteDataAPI.loadPage(i,(function(){o.dynamicPageTryToNavigate(e,c,i,r,o.siteAPI,t,n,s)}))):o.dynamicPageTryToNavigate(e,c,i,r,o.siteAPI,t,n,s)}));te(this.siteAPI,e),this.navigateIfPossible(e,t,n,s,a)},dynamicPageTryToNavigate:function(e,t,n,s,a,o,r,c){if(n.errorInfo){var u=a.getRenderRealtimeConfigItem("errorPagesPopUp");u&&u(n.errorInfo)}if(i.isEqual(this.currNav,e)){if(n.isStaticPageRedirect?e=n:i.assign(e,n),te(this.siteAPI,e),function(e,t){return e.getFocusedRootId()===t.pageId&&!t.isRefetchingPageAfterLogin}(s,e)){var p=e.innerRoute!==s.getRootNavigationInfo().innerRoute;if(this.handleSamePageAnchorNavigation(e),!p&&e.imageZoom===s.getRootNavigationInfo().imageZoom)return void t.handlePagePageNavigationCanceled()}delete e.isRefetchingPageAfterLogin,this.navigateIfPossible(e,o,r,c)}else t.handlePagePageNavigationCanceled()},handleSamePageAnchorNavigation:function(e){var t=this.siteAPI,i=this.props.siteData;if(e.anchorData){t.scrollToAnchor(e.anchorData,(function(n){1===n.ratio&&t.getSiteAspect("anchorChangeEvent").setSelectedAnchorAsync(i,e.anchorData,e.pageId,f.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL)}))}else i.isImageZoom(e)||e.routerDefinition||this.scrollToTop()},handleNavigation:function(e,t,n,s){var a=this.props.siteData;if(e.pageId===a.getPrimaryPageId()){if("#"!==t){var o=i.get(this.props,"viewerPrivateServices.siteDataAPI");this.props.navigateMethod(this,o,t,e,n,s)}this.handleSamePageAnchorNavigation(e)}else this.tryToNavigate(e,!n)},enforceAndPatchLayout:r.action("enforceAndPatchLayout",(function(){var e=$.call(this),t=R.layoutAPI(this.siteAPI),n=h.enforceAndPatch(e,t);return i.assign(this.props.siteData.reLayoutedCompsMap,n),!i.isEmpty(n)})),reLayout:r.action("reLayout",(function(){var e,t,n,s,a,o=this;if(w.isOpen("sv_handleFailingWixCodeSdk",this.props.siteData)?this.siteAPI.getSiteAspect("WidgetAspect").allContextsReadyOrLifecycleFailed():this.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()){var c=this.props.siteData,u=c.getCurrentUrlPageId(),p=c.getExistingRootNavigationInfo(u),l=this.getPrimaryPage(),d=!(!l||!Q(l,u))&&this.siteAPI.isPageAllowedAndLoaded(p),g=R.layoutAPI(this.siteAPI);c.isAddPanelView||h.updateBodyNodeStyle(g),this.props.siteData.updateScreenSize();var f=ee.call(this,d),m=this.forceFullReLayout?null:function(e,t,n,s){if(!e.measureMap||i.isEmpty(n)&&i.isEmpty(s))return null;var a=i.transform(t,(function(e,t,n){i.includes(["inner","outer","siteBackground","wixAds"],n)||(e[n]=!0)}),{});return i.assign({},s,n,a)}(c,f,this.compsToRelayoutMap,this.pendingReLayoutCompsMap);this.forceFullReLayout=!1;var v=r.untracked((function(){return h.reLayout(f,o.siteAPI.getNoEnforceAnchors(),o.lockedCompMap,m,g)}));if(c.measureMap=v.measureMap,i.assign(c.reLayoutedCompsMap,v.reLayoutedCompsMap),delete this.tempMeasureMap,t=this.siteAPI,n=t.getSiteAspect("actionsAspect"),s=t.getSiteAspect("behaviorsAspect"),a=t.getCompBehaviours(),i.forOwn(a,(function(e,t){i.forOwn(e,(function(e,i){n.registerBehaviors(i,t,e),s.setBehaviorsForActions(s.convertBehaviors(e,i),t,i)}))})),d){this.pendingReLayoutCompsMap={},this.reLayoutPending=!1,this.isBusy=!1;var y=[this.getMasterPage(),l,this.refs.siteAspectsContainer],A=this.getCurrentPopup();A&&y.push(A);var S=this._aspectsSiteAPI.getComponentById("SITE_BACKGROUND");y.push(S),e=y,v.reLayoutedCompsMap,i.forEach(e,X)}this.isBusy=!1,this.notifyAspects(this.supportedEvents.didLayout,[]),this.siteIsReady||(this.siteIsReady=!0,this.siteAPI&&this.siteAPI.setBiMarker&&this.siteAPI.setBiMarker("lastTimeStamp"),this.notifyAspects(this.supportedEvents.siteReady))}})),registerReLayoutPending:function(e){this.pendingReLayoutCompsMap[e]=!0,this.reLayoutPending=!0},cancelReLayoutPending:function(e){delete this.pendingReLayoutCompsMap[e],i.isEmpty(this.pendingReLayoutCompsMap)&&(this.reLayoutPending=!1),!1===this.props.siteData.renderingCompsMap.get(e)&&this.props.siteData.renderingCompsMap.delete(e)},reLayoutIfPending:r.action((function(){this.reLayoutPending&&0===this.pendingRenderCounter.get()&&(this.reLayoutPending=!1,this._requestRelayout())})),componentDidMount:function(){var e=this,n=this.props.siteData;n._isFirstRenderAfterSSR=!1,"undefined"!=typeof window&&w.isOpen("debouncePendingRelayout",n)&&(this._requestRelayout=i.debounce(this._requestRelayout,x,{maxWait:L}));var s=this.siteAPI;this.onAfterLayout(),n.isUsingUrlFormat(f.siteConstants.URL_FORMATS.SLASH)?s.reportCurrentPageEvent():s.reportPageEvent(n.currentUrl.full,n.getCurrentUrlPageId()),s.initFacebookRemarketing(),s.initGoogleRemarketing(),s.initYandexMetrika(),s.setBiMarker("renderEnd"),f.dataCapsule.init(this._aspectsSiteAPI),r.reaction((function(){var e=n.getFocusedRootId(),t=n.getExistingRootNavigationInfo(e);return{mobileView:n.isMobileView(),siteWidth:n.getSiteWidth(),screenWidth:n.getScreenWidth(),pageAllowedAndLoaded:s.isPageAllowedAndLoaded(t),pageMargins:n.getPageMargins(),viewMode:s.getRenderFlag("componentViewMode")}}),(function(){this.forceUpdate()}),{context:this,compareStructural:!0}),r.reaction((function(){return n.isMobileView()}),(function(){this.forceFullReLayout=!0}),{context:this}),r.reaction((function(){return n.getScreenWidth()}),(function(){this.props.viewerPrivateServices.siteDataAPI.updateDisplayedNodesLayoutAndUpdateAnchors()}),{context:this,name:"screenWidthChangeAction"});var a=r.computed((function(){var e=n.getPrimaryPageId(),t=n.getExistingRootNavigationInfo(e),s={primaryRootId:e,popupId:n.getCurrentPopupId(),routersRendererIndex:t.routersRendererIndex,language:i.get(t,"query.lang")};return s.pageAdditionalData=t.pageAdditionalData,s}),{context:this,compareStructural:!0});r.observe(a,(function(t){s.getDisplayedDAL().removeByPath(["pageStubComponents",t.newValue.primaryRootId]);var i=t.oldValue.primaryRootId!==t.newValue.primaryRootId,n=t.oldValue.routersRendererIndex!==t.newValue.routersRendererIndex,a=t.oldValue.language!==t.newValue.language;(i||n||a)&&(e.isChangingUrlPage=!0),e.forceUpdate()})),this.registerAspectToEvent(this.supportedEvents.siteReady,(function(){s.reportBeatFinish(n.getCurrentUrlPageId()),function(e){var i=t(".hiddenTillReady");e.isMobileDevice()?(t(".wix-menu-enabled").removeClass("wix-menu-enabled"),i.css({display:"none"})):i.removeClass("hiddenTillReady")}(n),Z.call(e),Y.call(e)})),this.registerAspectToEvent(this.supportedEvents.renderedRootsChanged,(function(){R.maxScrollHandler.unregister()})),this.registerAspectToEvent(this.supportedEvents.onRendered,(function(){T.progressiveReveal.onRendered(s)})),this.registerAspectToEvent(this.supportedEvents.fullyRendered,(function(){e.siteIsFullyRendered||(e.siteIsFullyRendered=!0,s.reportBeatEvent(k,n.getPrimaryPageId()))})),this.registerAspectToEvent(this.supportedEvents.resize,z.call(this)),s.reportBeatEvent(O,n.getPrimaryPageId()),s.setComponentRenderEnd("WixSiteReact_".concat(this.props.rootId)),ie(s)},componentDidUpdate:function(){var e=this.props.siteData;this.tempMeasureMap&&!e.measureMap&&(e.measureMap=this.tempMeasureMap,delete this.deletedMeasureMap,delete this.tempMeasureMap);var t=this.siteAPI;if(this.isChangingUrlPage){t.setBiMarker("renderEnd");var i=e.getCurrentUrlPageId();t.reportBeatFinish(i),e.isUsingUrlFormat(f.siteConstants.URL_FORMATS.SLASH)||t.reportPageEvent(e.currentUrl.full,i),t.fireGoogleRemarketing(),t.reportYandexPageHit(e.currentUrl.full),this.isChangingUrlPage=!1,this.notifyAspects(this.supportedEvents.urlPageChange),ie(t)}t.setComponentRenderEnd("WixSiteReact_".concat(this.props.rootId)),u.loggingUtils.performance.finish(u.loggingUtils.performanceMetrics.RE_RENDER)},updateSiteHeadTag:function(e){this.props.updateHeadMethod&&this.props.updateHeadMethod(this.props.siteData,this.props.rootId,e)},componentWillUnmount:function(){this.dead=!0,this.siteAPI.onSiteUnmount()}})}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(4),i(13),i(6),i(20),i(16),i(22),i(1),i(8)],void 0===(s=function(e,t,i,n,s,a,o,r,c){"use strict";function u(e,t){var i=e.getRootIdsWhichShouldBeRendered();return!a.componentUtils.shouldBeRendered(i,t)}function p(){var e=this.props.compBehaviors;if(e){var t=this.props.rootId,i=this.props.siteAPI.getSiteAspect("actionsAspect"),n=this.props.siteAPI.getSiteAspect("behaviorsAspect");i.registerBehaviors(t,t,e),n.setBehaviorsForActions(n.convertBehaviors(e,t),t,t)}}var l=i({displayName:"WixPageReact",propTypes:{siteAPI:t.shape({resetRuntimeOverrides:t.func.isRequired,setComponentRenderEnd:t.func.isRequired,getSiteAspect:t.func.isRequired,getSiteData:t.func.isRequired,setComponentRenderStart:t.func.isRequired}),componentType:t.string.isRequired,mobxObserverWrapperProps:t.object.isRequired,structure:t.object,rootId:t.string,onRendered:t.func},getDefaultProps:function(){return{onRendered:e.noop}},mixins:[r.mixins.baseCompMixin,r.mixins.animationsMixin],getInitialState:function(){return{allContextsReadyOrLifecycleFailed:c.isOpen("sv_handleFailingWixCodeSdk",this.props.siteAPI.getSiteData())?this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReadyOrLifecycleFailed():this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()}},componentWillMount:function(){this.childrenAnimations={},this.transitioningChildrenPrevLayout={},this.compRefs={},this.mobxObserverWrapperProps=e.assign({},this.props.mobxObserverWrapperProps,{propsForSitePages:{pageClass:l},addComponentRef:this.addComponentRef}),this.disposeReaction=s.reaction((function(){return c.isOpen("sv_handleFailingWixCodeSdk",this.props.siteAPI.getSiteData())?this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReadyOrLifecycleFailed():this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()}),(function(e){this.state.allContextsReadyOrLifecycleFailed!==e&&this.setState({allContextsReadyOrLifecycleFailed:e})}),{context:this}),p.call(this);var t=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderStart("WixPageReact_".concat(this.props.rootId,"_").concat(t.getViewMode()))},addComponentRef:function(e,t){e?this.compRefs[t]=e:delete this.compRefs[t]},componentWillUnmount:function(){this.props.siteAPI.resetRuntimeOverrides(this.props.rootId),this.disposeReaction()},componentWillUpdate:function(){u(this.props.siteAPI,this.props.rootId)&&this.props.siteAPI.resetRuntimeOverrides(this.props.rootId),p.call(this);var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderStart("WixPageReact_".concat(this.props.rootId,"_").concat(e.getViewMode()))},componentDidUpdate:function(){var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderEnd("WixPageReact_".concat(this.props.rootId,"_").concat(e.getViewMode()))},componentDidMount:function(){var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderEnd("WixPageReact_".concat(this.props.rootId,"_").concat(e.getViewMode()))},render:function(){var e=this;if(!this.state.allContextsReadyOrLifecycleFailed)return this.renderedPage||r.utils.createReactElement("div");var t,i,n={id:this.props.rootId,key:this.props.rootId,"data-ref":this.props.rootId,rootId:this.props.rootId,mobxObserverWrapperProps:this.mobxObserverWrapperProps,compRef:function(t){e._comp=t}},s=(t=this.props.componentType,i=this.props.siteAPI.getSiteData().compFactoryRuntimeState,t&&o.compFactory.getCompClass(t,!1,i)||r.utils.createReactElement.bind(null,"div"));return this.renderedPage=s(n),this.renderedPage},updateVisibility:function(){var e=this.props.siteAPI,t=this.props.rootId;e.getSiteAspect("WidgetAspect").isContextReadyOrLifeCycleFailed(t)&&!u(e,t)&&(n.findDOMNode(this._comp).style.visibility="",this.props.onRendered())},hide:function(){n.findDOMNode(this._comp).style.visibility="hidden"},componentDidLayout:function(){this.updateVisibility()}});return l}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(20)],void 0===(s=function(e,t){"use strict";return{getStorage:function(){var i=t.observable.shallowMap();return{transaction:t.runInAction,set:function(e,t){i.set(e,t)},update:function(t,n){var s=i.get(t),a=e.defaults(n,s);return i.set(t,a),a},get:function(e){return i.get(e)},remove:function(e){return i.delete(e)},getAll:function(){return t.toJS(i)},clear:function(){i.clear()}}}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e,t,i){return(a=o()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return i&&r(s,i.prototype),s}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}n=[i(0),i(16),i(39),i(3),i(125)],void 0===(s=function(e,t,i,n,s){"use strict";function o(t){s.call(this,t,"Site Aspect"),e.bindAll(this,["getComponentById","getRootOfComponentId","getCurrentPage","getCurrentPopup","getAllRenderedRoots","getMasterPage","getPageById","getPageComponents","registerToMessage","registerToSiteReady","registerToScroll","registerToResize","registerToOrientationChange","registerToModeChange","registerToSlideChange","registerToComponentDidMount","registerToSiteWillMount","registerToSiteWillUpdate","registerToDidLayout","unRegisterFromDidLayout","registerToWillUnmount","registerToUrlPageChange","registerToOnRendered","registerToSSSRSuccess","registerToRenderedRootsChange","registerToAddedRenderedRootsDidLayout","registerToKeyDown","registerToWindowTouchEvent","registerToFocusEvents","registerToVisibilityChange","registerToDocumentClick","registerToSvSessionChange","registerToSiteMetadataChange","getSiteAPI","getSiteContainer","scrollSiteBy","scrollSiteTo","getWindowSize","getDocumentSize","getSiteScroll","getCurrentPopupScroll","getBrowserFlags","getVisibilityState","setSiteRootHiddenState","notifyAspects","registerToFakeModeChange"])}return o.prototype=e.create(s.prototype,{constructor:o}),o.prototype.getComponentById=function(e,t){var i=null,n=t||this.getRootOfComponentId(e);return n&&(i=this._site.getComponentByPageAndCompId(n,e)),i||(i=this._site.getAspectsContainer().refs[e]||this._site.getAspectsContainer().refs.aspectPortal.refs[e]),i||"SITE_BACKGROUND"!==e&&"WIX_ADS"!==e||(i=this._site.compRefs[e]),i||null},o.prototype.getRootOfComponentId=function(t){var i=this._site,n=i.getPageOfComp(t),s=n&&n.props.rootId;if(s)return s;var a=i.getMasterPage();return e.forEach(i.getPageRefs(a),(function(e,n){if(i.getComponentByPageAndCompId(n,t))return s=n,!1})),s||null},o.prototype.getParentComponentType=function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers(),s=n.components,a=this.getSiteData().getViewMode(),o=s.getPage(t,a),r=s.getComponent(e,o),c=s.getParent(r),u=n.getInnerPointer(c,"componentType");return i.get(u)},o.prototype.getCurrentPage=function(){return this._site.getPrimaryPage()},o.prototype.getCurrentPopup=function(){return this._site.getCurrentPopup()},o.prototype.getAllRenderedRoots=function(){return e.map(this.getAllRenderedRootIds,this.getPageById)},o.prototype.getMasterPage=function(){return this._site.getMasterPage()},o.prototype.getPageById=function(e){return this._site.getPageById(e)},o.prototype.getPageComponents=function(e){return this._site.getComponentsByPageId(e)},o.prototype.getComponentByPageAndCompId=function(e,t){return this._site.getComponentByPageAndCompId(e,t)},o.prototype.registerToMessage=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.message,e)},o.prototype.registerToSiteReady=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.siteReady,e)},o.prototype.registerToScroll=function(e){var t=this.getSiteAPI().getSiteData();this._site.registerAspectToEvent(this._site.supportedEvents.scroll,(function(i){var n=window.document.body.scrollHeight>window.innerHeight,s={x:window.pageXOffset||(t.isMobileView()?window.document.scrollLeft:window.document.body.scrollLeft),y:window.pageYOffset||(t.isMobileView()?window.document.scrollTop:window.document.body.scrollTop),progressY:n?window.scrollY/(window.document.body.scrollHeight-window.innerHeight-1):0};e(s,i)}))},o.prototype.registerToResize=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.resize,e)},o.prototype.registerToOrientationChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,e)},o.prototype.registerToModeChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.modeChange,e)},o.prototype.registerToSlideChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.slideChange,e)},o.prototype.registerToComponentDidMount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.mount,e)},o.prototype.registerToSiteWillMount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.willMount,e)},o.prototype.registerToSiteWillUpdate=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.willUpdate,e)},o.prototype.registerToDidLayout=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.didLayout,e)},o.prototype.unRegisterFromDidLayout=function(e){this._site.unregisterAspectFromEvent(this._site.supportedEvents.didLayout,e)},o.prototype.registerToWillUnmount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.unmount,e)},o.prototype.registerToUrlPageChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.urlPageChange,e)},o.prototype.registerToOnRendered=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.onRendered,e)},o.prototype.registerToOnFullyRendered=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.fullyRendered,e)},o.prototype.registerToSSSRSuccess=function(t){var i=this;this.registerToMessage((function(n){if(e.get(n,"data")===i._site.supportedEvents.sssrSuccess)return t()}))},o.prototype.registerToRenderedRootsChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.renderedRootsChanged,e)},o.prototype.registerToAddedRenderedRootsDidLayout=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.addedRenderedRootsDidLayout,e)},o.prototype.registerToKeyDown=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.keydown,e)},o.prototype.registerToKeyUp=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.keyup,e)},o.prototype.registerToWindowTouchEvent=function(e,t){this._site.registerAspectToEvent(this._site.supportedEvents[e.toLowerCase()],t)},o.prototype.registerToFocusEvents=function(e,t){this._site.registerAspectToEvent(this._site.supportedEvents[e],t)},o.prototype.registerToVisibilityChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.visibilitychange,e)},o.prototype.registerToDocumentClick=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.click,e)},o.prototype.registerToOrientationChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,e)},o.prototype.registerToFakeModeChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.fakeModeChange,e)},o.prototype.registerToSvSessionChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.svSessionChange,e)},o.prototype.registerToSiteMetadataChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.siteMetadataChange,e)},o.prototype.registerToAspectsReady=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.aspectsReady,e)},o.prototype.unregisterFromAspectsReady=function(e){this._site.unregisterAspectFromEvent(this._site.supportedEvents.aspectsReady,e)},o.prototype.getSiteAPI=function(){return this._site.siteAPI},o.prototype.getSiteContainer=function(){return this._site.props.getSiteContainer()},o.prototype.scrollSiteBy=function(i,n,s){this.getSiteContainer().scrollBy(i,n),e.isFunction(s)&&t.animationFrame.request(s)},o.prototype.scrollSiteTo=function(e,t){this.getSiteContainer().scrollTo(e,t)},o.prototype.getWindowSize=function(){var e=this.getSiteContainer();return{height:e.innerHeight,width:e.innerWidth}},o.prototype.getDocumentSize=function(){return{height:window.document.documentElement.clientHeight||window.document.body.clientHeight,width:window.document.documentElement.clientWidth||window.document.body.clientWidth}},o.prototype.getSiteScroll=function(){var e=this.getSiteContainer()||{};return{x:e.pageXOffset||e.scrollX||0,y:e.pageYOffset||e.scrollY||0}},o.prototype.getCurrentPopupScroll=function(){var t=window.document.getElementById("POPUPS_ROOT");return{x:e.get(t,"scrollLeft",0),y:e.get(t,"scrollTop",0)}},o.prototype.getBrowserFlags=function(){return this.getSiteAPI().getSiteData().browserFlags()},o.prototype.getVisibilityState=function(){return{hidden:"undefined"!=typeof document&&window.document.hidden}},o.prototype.setSiteRootHiddenState=function(e,t){this._site.setState({siteRootHidden:e},t)},o.prototype.notifyAspects=function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];(t=this._site).notifyAspects.apply(t,[e].concat(n))},o.prototype.updateAspectGlobalData=function(t,i){var n=this.getDisplayedDAL(),s=this.getPointers().siteAspects.getAspectGlobalData(t),a=n.get(s)||{};n.set(s,e.assign(a,i))},o.prototype.setAspectGlobalData=function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers().siteAspects.getAspectGlobalData(e);i.set(n,t)},o.prototype.removeAspectGlobalData=function(e){var t=this.getDisplayedDAL(),i=this.getPointers().siteAspects.getAspectGlobalData(e);t.isExist(i)&&t.remove(i)},o.prototype.updateAspectComponentData=function(t,i,n){var s=this.getDisplayedDAL(),a=this.getPointers().siteAspects.getAspectComponentData(t,i),o=s.get(a)||{},r=e.assign({},o,n);e.isEqual(o,r)||s.set(a,r)},o.prototype.setAspectComponentData=function(e,t,i){var n=this.getDisplayedDAL(),s=this.getPointers().siteAspects.getAspectComponentData(e,t);n.set(s,i)},o.prototype.initHostLibsAspect=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=n.siteAspectsRegistry.getHostLibsAspectConstructor(e),r=i.aspectPropsConnector.connect(o,t,this.getSiteData().isDebugMode()),u=a(r,[this].concat(c(s)));return u},o.prototype.setSiteRootAriaHiddenState=function(e){this._site.setState({isAriaHidden:e})},o}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(16),i(34),i(22),i(2),i(192)],void 0===(s=function(e,t,i,n,s,a){"use strict";return function(o){var r=o.getSiteData(),c=o.getHostLibsAspectConstructor("WidgetAspect"),u=o.getSiteDataAPI();return{isMobileView:r.isMobileView(),currentUrlPageId:r.getCurrentUrlPageId(),isTypeController:function(e,t){return i.appsUtils.isTypeController(e,r,t)},hasWixCode:function(){return i.appsUtils.hasWixCode(r.getRendererModel())},isExperimentOpen:o.isExperimentOpen,initWixCode:!!o.getRenderFlag("initWixCode"),componentViewMode:o.getRenderFlag("componentViewMode"),isViewerMode:r.isViewerMode(),handleProcessedBehavior:function(e,t){return o.getSiteAspect("behaviorsAspect").handleProcessedBehavior(e,t)},refreshRenderedContextsData:u.refreshRenderedRootsData.bind(u),shouldUpdateRuntimeModels:function(){return r.isFirstRenderAfterSSR()&&!!r.runtimeModels},componentsFetcher:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return a.apply(void 0,[u].concat(t))},RMIDataAPI:c.modelBuilderDataHelper.getApi(r),getRuntimeModels:function(){return r.runtimeModels},resolveWidgetData:function(e,t){return c.widgetDataResolvers.resolve(e,o,t)},routers:r.getRouters(),setWarmupDataForController:function(e,t){r.userWarmup=r.userWarmup||{},r.userWarmup[e]=t},isFirstRenderAfterSSR:function(){return r.isFirstRenderAfterSSR()},getNavigationDataForRgi:function(){return r.getNavigationDataForRgi()},getSMbySiteExtensionInstanceForRgi:function(){return r.getSMbySiteExtensionInstanceForRgi()},getAppsDataForRgi:function(){return r.getAppsDataForRgi()},getDataByQuery:function(e){return r.getDataByQuery(e)},getAllRenderedContextIds:function(){return o.getAllRenderedRootIds()},getApplicationsForContexts:function(e){return i.appsUtils.getApplications(r.getClientSpecMap(),e,r)},filterContextsToSync:function(t){return e.without(t,s.siteConstants.MASTER_PAGE_ID)},filterValidContextsForLoad:function(t){return e(t).without(s.siteConstants.MASTER_PAGE_ID).filter(r.getPageTitle.bind(r)).value()},filterContextsToActivate:function(t){return e.reject(t,(function(e){return!s.siteDataUtils.isPageLoaded(r,e)}))},getContextInitData:function(e){return i.appsUtils.getContextInitData(r,e,t.styleUtils)},getContextIdsWhichShouldBeRendered:function(){return e.without(o.getRootIdsWhichShouldBeRendered(),s.siteConstants.MASTER_PAGE_ID)},getCompReactClass:n.compFactory.getCompReactClass,performanceLogger:s.loggingUtils.performance,deferWixCodeMessagesRegistration:!0,getAllPossiblyRenderedContexts:function(){return r.getAllPossiblyRenderedRoots()},getGhostStructure:function(){return r.getGhostStructureData()}}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=t.siteConstants,n=i.SITE_STRUCTURE_ID,s=i.PAGES_CONTAINER_ID,a=i.SITE_PAGES_ID,o=i.HEADER_ID,r=i.FOOTER_ID;return function(t,i,c){var u=t.document.getFullAndDisplayedOnlyCompsUnderRoot(i,c),p=[n,s,a];return t.siteData.isApplicationStudio()&&(p=p.concat([o,r,i])),e.omit(u,p)}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";return function(e){var t=e.getSiteData();function i(i,n){var s=function(i){var n=t.getCurrentUrlPageId(),s=t.getViewMode(),a=e.getPointers().components.getPage(n,s);return e.getPointers().components.getComponent(i,a)}(i);n(s,function(t){var i=e.getDisplayedDAL(),n=e.getPointers().componentStructure.getModesDefinitions(t);return i.get(n)}(s)[0].modeId)}return{deactivateMode:function(t){i(t,e.deactivateMode)},activateMode:function(t){i(t,e.activateMode)},getComponentByPageAndCompId:function(t){var i=e.getRootOfComponentId(t);return e.getComponentByPageAndCompId(i,t)},getScrollPosition:function(){return e.getSiteAspect("windowScrollEvent").getScrollPosition()},transaction:function(t){e.getActionQueue().runImmediately(t)},getTargetPortal:function(){return e.getPopoversLayer()},registerToDocumentClickEvent:function(t){e.getSiteAspect("windowClickEventAspect").registerToDocumentClickEvent(t)},unRegisterToDocumentClickEvent:function(t){e.getSiteAspect("windowClickEventAspect").unRegisterToDocumentClickEvent(t)},isPopoverAllowed:"preview"===e.getRenderFlag("componentViewMode"),isMobileView:t.isMobileView()}}}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;n=[i(1),i(0),i(4),i(13),i(33)],void 0===(s=function(e,t,i,n,s){"use strict";var a=Math.pow(2,31)-2;return s.observer(n({displayName:"blockingLayer",propTypes:{siteAPI:i.object.isRequired,layerName:i.string.isRequired},getStyle:function(){var e=this.props.siteAPI.getRenderFlag(this.props.layerName);return t.merge({display:"inline-block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:a},e)},render:function(){return this.props.siteAPI.getRenderFlag(this.props.layerName)?e.utils.createReactElement("div",{style:this.getStyle()}):null}}))}.apply(t,n))||(e.exports=s)},function(e){e.exports=JSON.parse('{"SITE_MEMBER_LOGIN_SUCCESS":{"eventId":520,"adapter":"hed","params":{"c1":"userName"}},"LOAD_IMAGES_DATA":{"eventId":341,"adapter":"mlt","params":{"c1":"imagePerf"}},"LP_BUTTON_CLICK":{"eventId":352,"adapter":"ugc-viewer","params":{"postSignUp":"postSignUp","postLogin":"postLogin","target_url":"targetUrl","button_name":"buttonName","active_fold":"activeFold","total_folds":"totalFolds","text":"text","component_id":"componentId","loginCompName":"loginCompName"},"wixSiteSampleRatio":0},"IMAGES_DOWNLOAD":{"eventId":353,"adapter":"ugc-viewer","params":{"imagePerf":"imagePerf","kbps":"kbps","ttfb":"ttfb"}},"MONOTYPE_FONTS_USED_ON_SITE":{"eventId":355,"adapter":"ugc-viewer","params":{}},"USER_INTERACTION":{"eventId":368,"adapter":"ugc-viewer","params":{"type":"type","time":"time"}},"UNSAFE_HTML_IN_TEXT_COMPONENT":{"eventId":369,"adapter":"ugc-viewer","params":{"filtered_content":"filtered_content","component_id":"component_id","component_type":"component_type"}},"CLICK_TO_ACTION":{"eventId":372,"adapter":"ugc-viewer","params":{"data":"data","field_type":"field_type","input_type":"input_type"}},"SITE_MEMBER_OPEN_LOGIN_OR_SIGNUP_DIALOGS":{"eventId":601,"adapter":"site-members","src":5,"params":{"action":"action","visitor_id":"visitor_id"},"sampleRatio":1},"SITE_MEMBER_EXIT_DIALOG":{"eventId":602,"adapter":"site-members","src":5,"params":{"context":"context","visitor_id":"visitor_id"},"sampleRatio":1},"SITE_MEMBER_SUBMIT_BUTTON":{"eventId":603,"adapter":"site-members","src":5,"params":{"context":"context","visitor_id":"visitor_id"},"sampleRatio":1},"SITE_MEMBER_CLICKED_FORGOT_PASSWORD":{"eventId":604,"adapter":"site-members","src":5,"params":{"visitor_id":"visitor_id"},"sampleRatio":1},"SITE_MEMBER_AUTH_DIALOG_OPENED":{"eventId":607,"adapter":"site-members","src":5,"params":{"context":"context","app_id":"app_id","initator":"initator","visitor_id":"visitor_id","has_social":"has_social"}},"SITE_MEMBER_NOTIFICATION_OPEN":{"eventId":608,"adapter":"site-members","src":5,"params":{"notification_name":"notification_name","visitor_id":"visitor_id"},"sampleRatio":1},"SITE_MEMBER_CLICK_LINK":{"eventId":609,"adapter":"site-members","src":5,"params":{"context":"context","name":"name","visitor_id":"visitor_id"},"sampleRatio":1},"CDN_PERFORMANCE":{"eventId":379,"adapter":"ugc-viewer","params":{"small_name":"smallName","small_dns_time":"smallDnsTime","small_connect_time":"smallConnectTime","small_ttfb":"smallTtfb","small_response_time":"smallResponseTime","small_kbps":"smallKbps","large_name":"largeName","large_dns_time":"largeDnsTime","large_connect_time":"largeConnectTime","large_ttfb":"largeTtfb","large_response_time":"largeResponseTime","large_kbps":"largeKbps"}},"VECTOR_ART_VIEWER_FIXER":{"eventId":322,"adapter":"ugc-viewer","params":{}},"PAGE_COMP_TYPES_LIST":{"eventId":390,"adapter":"ugc-viewer","params":{"first_page":"firstPage","comp_list":"compList"}},"DATA_FIXED_PAGE_REQUEST":{"eventId":349,"adapter":"ugc-viewer","sampleRatio":1,"params":{"stage":"stage","pn":"pageNumber","master_page":"masterPage","loading_time":"duration","cdn":"cdn","cdn_hit":"cdnHit"}},"FONTS_DOWNLOADED":{"eventId":417,"adapter":"ugc-viewer","params":{"wix_fonts":"wixFonts","user_fonts":"userFonts"}}}')},function(e,t,i){var n,s;n=[i(0),i(2),i(559),i(197),i(3)],void 0===(s=function(e,t,i,n,s){"use strict";n.register(i);var a=t.getPackagesForComponent,o=t.allPackages,r=t.packagesToCallbacks,c={},u="PENDING",p="LOADED",l=function(e){c[e]||(c[e]={status:u})},d=function(e){return c[e]&&c[e].status===p},g=function(e){c[e].status=p},h=function(e,t,i){var n=e.santaComponent,a=e.componentType,o=e.component,r=n||o;r&&(s.compRegistrar.register(a,r),r.componentOverride&&i&&"new"===i[r.componentOverride.viewerExperimentKey]&&(s.compRegistrar.invalidate(r.componentOverride.overrideViewerType),s.compRegistrar.register(r.componentOverride.overrideViewerType,r)));r&&r.getComponentSkins&&t.addBatch(r.getComponentSkins())},f=function(e,t,i){return n.loadAll(t).then((function(t){return t.forEach((function(t){return t.forEach((function(t){return h(t.default,e,i)}))}))}))},m=function(){return"".concat(requirejs.toUrl("wix-ui-santa"),"/")};return{isComponentLoaded:function(e){return d(e)},exists:function(e,t){return a(e,t).length>0||n.exists(e)},prefetchComponents:function(t,i){var s=t.filter(n.exists),o=t.filter((function(t){return!e.includes(s,t)}));s.forEach((function(e){return n.load(e,m())}));var r=e(o).flatMap((function(e){return a(e,i)})).uniq().value();r.length>0&&requirejs(r,e.noop)},loadAndRegisterAll:function(e,t){var i=t?t.runningExperiments:{};return new Promise((function(e){return requirejs(["skins"],e)})).then((function(e){return Promise.all([f(e.skinsMap,m(),i),(t=e.skinsMap,n=o(),a=r(n),new Promise((function(e){return requirejs(n,(function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];n.forEach((function(e,i){return a[e](o[i],s.compRegistrar.register,s.siteAspectsRegistry.registerHostLibsAspect,t.addBatch)})),e()}))})))]);var t,n,a}))},loadAndRegister:function(e,t){return l(e),new Promise((function(e){return requirejs(["skins"],e)})).then((function(i){var o={};return t&&t.rendererModel&&(o=t.rendererModel.runningExperiments),n.exists(e,o)?function(e,t,i,s){return n.load(e,i).then((function(e){return e.forEach((function(e){return h(e.default,t,s)}))}))}(e,i.skinsMap,m(),o):function(e,t){var i=r(e);return new Promise((function(n){return requirejs(e,(function(){for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];e.forEach((function(e,n){return i[e](o[n],s.compRegistrar.register,s.siteAspectsRegistry.registerHostLibsAspect,t.addBatch)})),n()}))}))}(a(e,t),i.skinsMap)})).then((function(){g(e)}))}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t=[];return{register:function(e){e&&t.push(e)},reset:function(){t.length=0},exists:function(i){return e.some(t,(function(e){return!0===e.exists(i)}))},load:function(i,n){var s=e.find(t,(function(e){return!0===e.exists(i)}));if(s)return s.load(i,n)},loadAll:function(i){return Promise.all(e.invokeMap(t,"loadAll",i)).then((function(t){return e.flatten(t)}))}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(8),i(9)],void 0===(s=function(e,t,i){"use strict";function n(){this.blankFavicons=null}function s(e,t){return(t=e.getCurrentUrlPageId()||t)&&"masterPage"!==t||(t=e.getMainPageId()),t}return n.prototype={getFavicons:function(t){return t.isPremiumUser&&t.isPremiumUser()&&function(t){return e.includes(t.rendererModel.premiumFeatures,"AdsFree")}(t)?this._getPremiumUserFavicon(t):this._getDefaultWixFavicon()},createBlankFavicons:function(){return null===this.blankFavicons&&(this.blankFavicons=this._createEmptyFaviconElements()),this.blankFavicons},getPageMetaData:function(t,i){var n=s(t,i),a=t.isDynamicPage(n)?function(t,i){var n=t.getDynamicPageSEOMetaData(i),s={metaTags:{},openGraphMetaTags:{}};return e.forEach(n,(function(t,i){e.startsWith(i,"og:")?s.openGraphMetaTags[i]=t:s.metaTags[i]=t})),s}(t,n):this._getMetaDataForPage(t,n);if(t.isInSeo()){var o=this._getTpaMetaData(t);e.assign(a.metaTags,o.metaTags),e.assign(a.openGraphMetaTags,o.openGraphMetaTags),a.linkTags=a.linkTags||{},e.assign(a.linkTags,o.linkTags),o.title&&(a.title=o.title)}return a.advancedSeoData=this.getAdvancedSeoData(t,n),a},getPageMetaTags:function(t,i){var n=s(t,i);return t.isDynamicPage(n)?function(t,i){var n=t.getDynamicPageSEOMetaData(i),s=[];return e.forEach(n,(function(t,i){e.startsWith(i,"og:")?s.push('<meta property="'.concat(i,'" content="').concat(t,'">')):s.push('<meta name="'.concat(i,'" content="').concat(t,'">'))})),s}(t,n):this._getMetaTagsForPage(t,n)},getPageJsonldTag:function(t,i){var n=s(t,i),a=t.getPageJsonld(n);return 0===e.size(a)?"":['<script type="application/ld+json" data-pageid="'.concat(i,'">'),JSON.stringify(a),"<\/script>"].join("")},getPageLinkTag:function(t,i){var n=s(t,i),a=t.getPageLinkTag(n);return 0===e.size(a)?"":'<link rel="amphtml" href="'.concat(a,'">')},getTpaLinkTag:function(t,n,a){var o=s(t,n),r=t.getPageSEOLinkHref(o,a);return e.isNil(r)||""===r?"":'<link rel="'.concat(a,'" href="').concat(r,'" data-id="').concat(i.constants.TPA_LINK_TAGS.DATA_ID,'">')},getAdvancedSeoData:function(e,t){return{advancedSeoData:e.getPageAdvancedSeoData(t),localizedAdvancedSeoData:e.getPageLocalizedAdvancedSeoData(t),contextProps:e.getPageAdvancedSeoContextProps(t)}},_getPremiumUserFavicon:function(e){var t=e.getFavicon();if(t){var i=this._getFaviconMimeType(t);return t=e.getMediaFullStaticUrl(t),this._createFaviconLinkElements(t,i)}return this._createEmptyFaviconElements()},_getDefaultWixFavicon:function(){var e="http://www.wix.com/favicon.ico",t=this._getFaviconMimeType(e);return this._createFaviconLinkElements(e,t)},_createEmptyFaviconElements:function(){return this._createFaviconLinkElements(null,null)},_createFaviconLinkElements:function(e,t){var i=[];return e&&t&&(i.push({rel:"shortcut icon",href:e,type:t}),i.push({rel:"apple-touch-icon",href:e,type:t})),i},_getStaticMediaUrl:function(e){return e.serviceTopology.mediaRootUrl},_getFaviconMimeType:function(e){var t=null;return e&&(this._isExtension(e,"png")?t="image/png":this._isExtension(e,"gif")?t="image/gif":this._isExtension(e,"ico")||this._isExtension(e,"icon")?t="image/x-icon":this._isExtension(e,"jpg")&&(t="image/jpg")),t},_isExtension:function(e,t){return this._getExtension(e).toLowerCase()===t},_getExtension:function(e){if(e){var t=e.lastIndexOf(".");if(t>=0)return e.substr(t+1)}return""},_getTpaMetaData:function(t){var i=t.getTpaSEOMetaData(),n={metaTags:{},openGraphMetaTags:{},linkTags:{}},s={canonical:"canonical",prevLink:"prev",nextLink:"next"};return e.forEach(i,(function(t,i){s[i]?n.linkTags[s[i]]=t:e.startsWith(i,"og")?n.openGraphMetaTags["og:".concat(i.substring(2).toLowerCase())]=t:"title"===i?n.title=t:n.metaTags[i]=t})),n},_getMetaDataForPage:function(i,n){var s=i.getPageSEOMetaData(n),a={metaTags:{},openGraphMetaTags:this._getOgMetaData(s)};return e.assign(a.metaTags,this._getDescriptionSEOMetaData(s),this._getKeywordsSEOMetaData(s)),e.get(i,"publicModel.indexable")&&e.assign(a.metaTags,this._getRobotsIndexMetaData(s)),t.isOpen("sv_twitterMetaTags",i)&&e.assign(a.metaTags,this._getTwitterMetaData(s)),a},_getMetaTagsForPage:function(i,n){var s=i.getPageSEOMetaData(n),a=[this._getDescriptionSEOMetaTag,this._getKeywordsSEOMetaTag,this._getOgMetaTag];return e.get(i,"publicModel.indexable")&&a.push(this._getRobotsIndexMetaTag),t.isOpen("sv_twitterMetaTags",i)&&a.push(this._getTwitterMetaTags),e.flatMap(a,(function(e){return e(s)}))},_getRobotsIndexMetaData:function(e){if(e&&e.robotIndex)return{robots:e.robotIndex}},_getRobotsIndexMetaTag:function(e){if(e&&e.robotIndex)return'<meta name="robots" content="'.concat(e.robotIndex,'">')},_getDescriptionSEOMetaData:function(e){if(e&&e.description)return{description:e.description}},_getDescriptionSEOMetaTag:function(e){if(e&&e.description)return['<meta name="description" content="'.concat(e.description,'">')]},getGoogleTagManagerScript:function(){return"<script async>".concat("(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MDD5C4');","<\/script>")},_getKeywordsSEOMetaData:function(e){if(e&&e.keywords)return{keywords:e.keywords}},_getKeywordsSEOMetaTag:function(e){if(e&&e.keywords)return['<meta name="keywords" content="'.concat(e.keywords,'">')]},_getOgMetaData:function(t){return e.chain(t).get("ogTags").keyBy("property").mapValues("content").value()},_getOgMetaTag:function(t){return e.map(e.get(t,"ogTags"),(function(e){return'<meta property="'.concat(e.property,'" content="').concat(e.content,'">')}))},_getTwitterMetaData:function(t){return e.chain(t).get("twitterTags").keyBy("name").mapValues("content").value()},_getTwitterMetaTags:function(t){return e.map(e.get(t,"twitterTags"),(function(e){return'<meta name="'.concat(e.name,'" content="').concat(e.content,'">')}))}},new n}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(2),i(0),i(200),i(203),i(569),i(206),i(204),i(572),i(573),i(574)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u){"use strict";var p=new e.SiteDataPrivates,l=t.keyBy(["wixapps","externalStyles","ghostStructureData"]);function d(e,n,s,a,o,r,c,u,p,l){function g(){e.runImmediately((function(){if(t.size(s.failedRequests)&&s.isInSSR())u(p);else{l&&u(p);var g=(c?i.getNeededRequests:i.getRequestsForPages)(s,a,o),h=t.filter(g,(function(e){return"pagesData"===t.head(e.destination)&&2===e.destination.length}));p=(p||[]).concat(t.map(h,"destination[1]")),0!==g.length||l?n.loadBatch(g,d.bind(null,e,n,s,a,o,r,c,u,p)):u(p)}}))}!s.isInSSR()&&s.isViewerMode()&&r&&r.isAppInitiated()?setTimeout(g,10):g()}function g(e,i,n,s){f.call(this,e,i,n,s),"pagesData"!==t.head(n)&&e.dataLoadedCallback&&e.dataLoadedCallback(n,s)}function h(e,i){"masterPage"===e||i.siteData.getMasterPageData()?"masterPage"===e?(this.updateDisplayedJsonAfterPageLoaded(e),t.forEach(this.pagesPendingForMasterPage,this.updateDisplayedJsonAfterPageLoaded.bind(this)),this.pagesPendingForMasterPage=[]):this.updateDisplayedJsonAfterPageLoaded(e):this.pagesPendingForMasterPage.push(e)}function f(e,i,n,s){if(m(n)){t.set(i,n,s);var a=n[1];h.call(this,a,e)}else v(n)?t.set(e.siteData,n,s):e.displayedDal.setByPath(n,s)}function m(e){return"pagesData"===t.head(e)&&t.size(e)>1}function v(e){var t=e[0];return!!l[t]}function y(e){var i=p.get(this.siteData).pointers.full.components.getPageOfComponent(e);t.forEach(this._displayedJsonUpdateCallbacks,(function(t){t(i.id,e.id)})),this.eventsManager&&this.eventsManager.emit("displayedJsonUpdated",i.id,e.id)}function A(i,n){if(n){var s=i.fullPagesData.pagesData[n],a=i.siteData.isMobileView(),o=i.pointers.activeModes.getPageActiveModes(n),r=i.displayedDal.get(o),c=e.modesUtils.resolveCompActiveModesRecursive(s.structure,r,a,s.data.component_properties);return i.displayedDal.set(o,c),!t.isEqual(r,c)}}function S(i,p,l){i.displayedJsonUpdater=function(e,t){var i=e.fullPagesData,s=e.cache,a=e.displayedDal,o=e.pointers,r=s.getBoundCacheInstance(!0);return new n(i,a,r,o,t)}(i,this.updateDisplayedNodesLayout.bind(this)),i.dataLoadedCallback=null,this.siteData=i.siteData,this.eventsManager=l,this.store=new e.Store(function(e){var i=e.fullPagesData,n=e.displayedDal,s=e.siteData;return function(e){return m(e)?t.get(i,e):v(e)?t.get(s,e):n.getByPath(e)}}(i),p),this.store.registerDataLoadedCallback(t.bind(g,this,i,i.fullPagesData)),this.siteData.setStore(this.store),this._displayedJsonUpdateCallbacks=[],this.pagesPendingForMasterPage=[],this.actionQueue=new c(this.siteData.hasDebugQueryParam()||this.siteData.isQaMode()),this.document=s(i);var d=a.createRuntimeDal(i.siteData,this,i.displayedDal,i.pointers,this.eventsManager);i.runtimeToDisplayed=d.runtimeToDisplayed,i.resetRuntimeData=d.resetRuntime,i.resetRuntimeNonDisplayedPages=d.resetNonDisplayedPages,i.resetPage=d.resetPage,i.getRuntimeCompsData=d.getAllCompsData,this.runtime=d.runtimeDal,this.anchors=new o(this.siteData,i.pointers,i.displayedDal),this.originalValues=new r(this.siteData),this.modes=new u(this.siteData,this.createDisplayedPage.bind(this),this.createDisplayedNode.bind(this),i.pointers,i.displayedDal,this.actionQueue)}return S.prototype={registerDataLoadedCallback:function(e){p.get(this.siteData).dataLoadedCallback=e},refreshRenderedRootsData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.noop,i=p.get(this.siteData),n=this.siteData.getFocusedRootId(),s=this.siteData.getExistingRootNavigationInfo(n);d(this.actionQueue,this.store,i.siteData,i.fullPagesData,s,i.wixCodeAppApi,!0,e)},registerDisplayedJsonUpdateCallback:function(e){this._displayedJsonUpdateCallbacks.push(e)},loadPage:function(e,i){var n=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=p.get(this.siteData);function r(e){if(o.dataLoadedCallback){var t=o.fullPagesData.pagesData[e];o.dataLoadedCallback(["pagesData",e],t)}}d(this.actionQueue,this.store,o.siteData,o.fullPagesData,e,o.wixCodeAppApi,s,(function(s){a&&e.pageId&&!t.includes(s,e.pageId)&&n.updateDisplayedJsonAfterPageLoaded(e.pageId,e.isLanguageChange),t.forEach(s,r.bind(n)),i()}),[])},resetRuntimeOverrides:function(e,t){var i=p.get(this.siteData);return t?i.resetPage(e):i.resetRuntimeNonDisplayedPages()},removeResolvedDataMapForPage:function(e){this.siteData.resolvedDataMaps&&this.siteData.resolvedDataMaps.delete(e)},updateActiveSOSPModes:function(i){i=i||this.siteData.getCurrentUrlPageId();var n=p.get(this.siteData),s=function(i){var n=p.get(i),s=n.pointers.components.getMasterPage(i.getViewMode()),a=n.pointers.componentStructure.getModes(s);if(!a)return[];if(a){var o=t.get(n.displayedDal.get(a),"definitions",[]);return t.filter(o,{type:e.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES})}}(this.siteData);if(s){var a,o,r=n.pointers.components.getMasterPage(this.siteData.getViewMode()),c=this.modes.getPageActiveModes(e.siteConstants.MASTER_PAGE_ID);t.forEach(s,function(e){var n=function(e,t){var i=p.get(e),n=t.settings.pagesGroupId.replace("#",""),s=i.pointers.data.getDataItem(n,"masterPage");return i.displayedDal.get(s).pages}(this.siteData,e);t.includes(n,"#".concat(i))?c[e.modeId]||(a=e.modeId):c[e.modeId]&&(o=e.modeId)}.bind(this)),a&&o?this.modes.switchModes(r,o,a):a?this.modes.activateMode(r,a):o&&this.modes.deactivateMode(r,o)}},updateDisplayedJsonAfterPageLoaded:function(e,t){var i=p.get(this.siteData),n=i.pointers.activeModes.getPageActiveModes(e);i.displayedDal.set(n,{}),t?this.createDisplayedPages():this.createDisplayedPage(e),e===this.siteData.getCurrentUrlPageId()&&this.updateActiveSOSPModes(e)},createDisplayedPage:function(t){var i=p.get(this.siteData),n=i.fullPagesData.pagesData[t];if(!n){var s=i.pointers.page.getPagePointer(t);return s&&i.displayedDal.isExist(s)&&i.displayedDal.remove(s),!1}var a=i.pointers.activeModes.getAllActiveModes();return this.actionQueue.runImmediately(function(){e.wSpy.log("createDisplayedPage",[t]),A(i,t);var s=i.displayedDal.get(a);i.displayedJsonUpdater.updateDisplayedRoot(s,n,t,{rendererModel:i.siteData.rendererModel,getQueryParams:i.siteData.getQueryParams,renderFlags:i.siteData.renderFlags}),this.anchors.createPageAnchors(t),i.runtimeToDisplayed.updateAll(i.getRuntimeCompsData())}.bind(this)),!0},updateDisplayedNodesLayout:function(i){var n=this;if(e.layoutUtils.getLayoutMechanism(this.siteData)!==e.constants.LAYOUT_MECHANISMS.MESH){var s=p.get(this.siteData),a=this.siteData.getViewMode(),o=i?[i]:t(this.siteData.getAllPossiblyRenderedRoots()).map((function(e){return s.pointers.components.getPage(e,a)})).compact().value();t.forEach(o,(function(i){var a=s.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(i,r.bind(null,s));t.forEach(a,(function(t){var i=r(s,t),a=n.siteData.getScreenSize(),o=n.siteData.getSiteWidth(),c=s.pointers.getInnerPointer(t,["layout"]),u=s.displayedDal.get(c),p=e.positionAndSize.getPositionAndSize(u,a,a,o);i.setLayout(s.pointers,s.displayedDal,t,null,p)}))}))}function r(t,i){var n=t.pointers.getInnerPointer(i,["componentType"]),s=t.displayedDal.get(n);return e.jsonUpdaterRegistrar.getCompLayouter(s)}},updateDisplayedNodesLayoutAndUpdateAnchors:function(){this.updateDisplayedNodesLayout();var e=this.siteData.getAllPossiblyRenderedRoots();t.forEach(e,t.bind((function(e){this.anchors.createPageAnchors(e)}),this))},createDisplayedNode:function(e){this.actionQueue.runImmediately(function(){var i=p.get(this.siteData),n=i.pointers.components.getPageOfComponent(e);A(i,n.id);var s=i.pointers.activeModes.getAllActiveModes(),a=i.displayedDal.get(s);i.displayedJsonUpdater.updateDisplayedJsonByPointer(e,a),this.anchors.createPageAnchors(n.id),i.cache.resetValidations();var o=i.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(e),r=t.pick(i.getRuntimeCompsData(),t.map(o,"id"));i.runtimeToDisplayed.updateAll(r),y.call(this,e)}.bind(this))},createDisplayedPages:function(){var e=this.siteData.getAllPossiblyRenderedRoots();t.forEach(e,this.createDisplayedPage.bind(this)),this.siteData.observableUpdateIndex++},resetRuntimeData:function(){p.get(this.siteData).resetRuntimeData(),this.createDisplayedPages()},getActionQueue:function(){return this.actionQueue},setRenderRealtimeConfigItem:function(e,t){var i=p.get(this.siteData),n=i.pointers.general.getRenderRealtimeConfigItem(e);return i.displayedDal.set(n,t)}},{createSiteDataAPIAndDal:function(i,n,s){var a=e.DALFactory.getFullPagesData(i,t.pick(i,"pagesData")),o=e.DALFactory.getCacheInstance(i,a),r=function(e,i,n,s,a,o){var r={};return r.fileChangeCallback=t.noop,r.displayedDal=i.dal,r.pointers=i.pointers,r.cache=n,r.fullPagesData=s,r.siteData=e,r.displayedDal.setByPath(["pagesData"],{}),r.siteDataAPI=new S(r,a,o&&o.eventsManager),r.wixCodeAppApi=o&&o.wixCodeAppApi,r}(i,function(t,i){return{dal:e.DALFactory.getInstance(t),pointers:new e.pointers.DataAccessPointers(i)}}(i,o),o,a,n,s);return p.set(i,r),t.forEach(i.getAllPossiblyRenderedRoots(),(function(e){r.siteDataAPI.createDisplayedPage(e)})),t.clone(r)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}n=[i(16),i(0),i(3),i(2),i(201),i(565),i(92),i(202),i(568),i(8)],void 0===(s=function(e,t,i,n,s,o,r,c,u,p){"use strict";var l=n.dataUtils,d=[];function g(e,i,n){var s=n.styleId&&e.getDataByQuery(n.styleId,i,e.dataTypes.THEME),a=[s?s.skin:n.skin];return n.modes?a.concat(t(n.modes.overrides).flatMap(t.partial(g,e,i)).compact().value()):a}function h(e,t,i){return{design:i.designQuery?e.getDataByQuery(i.designQuery,t,e.dataTypes.DESIGN):null,data:i.dataQuery?e.getDataByQuery(i.dataQuery,t):null,properties:i.propertyQuery?e.getDataByQuery(i.propertyQuery,t,e.dataTypes.PROPERTIES):null,style:i.styleId?e.getDataByQuery(i.styleId,t,e.dataTypes.THEME):null,skins:g(e,t,i),layout:i.layout,type:i.type,id:i.id,pageId:t}}function f(e,i,n){var s=t.get(i.pagesData.masterPage,["data","document_data",n]),a=s&&s.pageSecurity;return a&&(a.requireLogin||a.passwordDigest)&&r.get(e,"wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog")||[]}function m(i,n,a){if(function(e){return t.includes(["platform.components.AppController","platform.components.AppWidget"],e)}(n)){var o=a.data||{},r=o.applicationId,c=o.settings,u=o.controllerType,l=c||{},d=l.devCenterWidgetId,g=l.type;if(t.get(i,["ghostStructureData",r,g]))return;var h=i.getClientSpecMapEntryByAppDefinitionId(r),f=function(i,n,s,a,o,r){var c=t.get(n,["appFields","platform","studio"]);if(!t.isEmpty(c)){var u=t.get(n,["widgets",s,"componentFields","appStudioFields","pageJsonFilename"]);if(u||!p.isOpen("sv_loadGhostStructureReportErrors",i))return u;e.integrations.ravenUtils.captureError("missing page structure info on appWidget",{tags:{"load-ghost-structure":!0},extra:{info:{applicationId:a,widgetId:o,devCenterWidgetId:s,controllerType:r}}})}}(i,h,d,r,g,u);if(!f)return;return s.getRequestForGhostStructure(i,f,r,g)}}function v(e,s,a,o,c,u){var p=h(e,a,o),d=n.jsonUpdaterRegistrar.getCompPlugin(o.componentType);if(d){o=d(o,(function(t){var i=t.id===o.id?p:h(e,a,t);return{dataItem:i.data,propertiesItem:i.properties}}),{},e)}i.dataRequirementsCheckerRegistrar.getAllCompsOfTypeChecker(o.componentType)&&(c[o.componentType]=c[o.componentType]||[],c[o.componentType].push(p)),t.forEach(u,(function(e){e.registerCompInfo(p)}));var g=i.dataRequirementsCheckerRegistrar.getCheckerForCompType(o.componentType),f=g?g(e,p,s):[],y=r.get(e,o.componentType);y&&f.push(y);var A=m(e,o.componentType,p);A&&f.push(A);var S=l.getChildrenData(o,e.isMobileView());return t.reduce(S,(function(t,i){return t.concat(v(e,s,a,i,c,u))}),f)}function y(e,n,s){var a=t.isArray(s)?s:[s],o={},c=[];t.forEach(d,(function(t){var i=t(e);i&&c.push(i)}));var u=n.pagesData,p=v(e,a[0],"masterPage",u.masterPage.structure,o,c);p=t.reduce(a,(function(s,a){return s.concat(v(e,a,a.pageId,u[a.pageId].structure,o,c),function(e,t,n){if(!n.pageItemId)return[];var s=t.pagesData.masterPage,a=s.data.document_data[n.pageItemId];if(!a||"PermaLink"!==a.type)return[];var o=s.data.document_data[a.dataItemRef.replace(/^#/,"")];if(!o)return[];var r=s.data.component_properties[a.dataItemRef.replace(/^#/,"")],c=i.dataRequirementsCheckerRegistrar.getCheckerForCompType("Zoom:".concat(o.type));return c?c(e,{data:o,properties:r},n):[]}(e,n,a),function(e,n,s){return t.flatMap(s,(function(t,s){return i.dataRequirementsCheckerRegistrar.getAllCompsOfTypeChecker(s)(e,t,n)}))}(e,a,o),function(e){return t(e).invokeMap("getRequests").flatten().value()}(c),function(e,n){var s=i.dataRequirementsCheckerRegistrar.getAppDefIdCheckerMap();return t(s).map((function(t,i){var s=e.getClientSpecMapEntryByAppDefinitionId(i);if(s)return t(e,s,n)})).compact().flatten().value()}(e,a),f(e,n,a.pageId))}),p);var l=t.get(e.getPageList(),"pages");return l&&(p=t.reduce(l,(function(t,i){return t.concat(f(e,n,i.pageId))}),p)),p.concat(function(e){var t=[],i=e.getExistingRootNavigationInfo(e.getFocusedRootId());if(i.pageItemId){var n=e.getDataByQuery(i.pageItemId);if(n){var s=r.forDataItem(e,n.type);s&&t.push(s)}}return t}(e))}function A(e,i,n){return!t.isEmpty(n.pagesData[e.MASTER_PAGE_ID])&&t.every(i,(function(e){return!t.isEmpty(n.pagesData[e.pageId])}))}function S(e,i){var s=[i];return e.isPopupPage(i.pageId)&&s.push(e.getExistingRootNavigationInfo(e.getPrimaryPageId())),e.publicModel&&(s=t.filter(s,(function(i){var s=t.find(e.getPageList().pages,{pageId:i.pageId});return t.has(s,"pageJsonFileName")||n.errorPages.isErrorPage(i.pageId)||function(e,i){return t.includes(e.rendererModel.passwordProtectedPages,i.pageId)}(e,i)}))),s}return n.sessionFreezer.freeze(d),t.forOwn(u,(function(e,t){return i.dataRequirementsCheckerRegistrar.registerCheckerForCompType(t,e)})),{getNeededRequests:function(e,i,u){e.santaBase=e.santaBase||e.serviceTopology.scriptsLocationMap.santa;var p,l=S(e,u);if(A(e,l,i))p=y(e,i,l);else if(p=s.getRequestsForPages(e,i,l),c.getInitialDialogToDisplay(e)){var d=r.get(e,"wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog");d&&p.push(d)}if("preview"===e.renderFlags.componentViewMode&&"Template"!==e.rendererModel.siteInfo.documentType){var g=n.siteDataUtils.getRequestModel(e),h=n.wixUserApi.getLanguage(g.cookie,e.currentUrl,g.language),f=n.siteDataUtils.getRendererModel(e).languageCode,m=t(t.get(e,["rendererModel","pageList","pages"])).map((function(e){return t.get(i,["pagesData","masterPage","data","document_data",e.pageId,"pageSecurity","dialogLanguage"])})).compact().uniq().value(),v=[h,f].concat(a(m),["en"]),P=n.translationsLoader.getRequest(e,v,{initiator:"models"});p.push(P)}else n.translationsLoader.setToUseOldTranslations();return function(e){return!e.isInSSR()&&!e.isClientAfterSSR()||t.every(o.getStylesIds(e),(function(i){return t.has(e.externalStyles,i)}))}(e)||p.push.apply(p,o.getRequests(e)),e.shouldShowWixAds()&&p.push(r.get(e,"wysiwyg.viewer.components.WixFreemiumBanner")),t.compact(p)},getRequestsForPages:function(e,i,n){e.santaBase=e.santaBase||e.serviceTopology.scriptsLocationMap.santa;var a=S(e,n),o=A(e,a,i)?[]:s.getRequestsForPages(e,i,a);return t.compact(o)},registerCheckerFactory:function(e){d.push(e)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}n=[i(0),i(16),i(2),i(93),i(8),i(561),i(72),i(60),i(562),i(563),i(564)],void 0===(s=function(e,t,i,n,s,o,r,c,u,p,l){"use strict";var d=i.loggingUtils.logger;function g(t,i){return e.some(t.failedRequests,(function(t){return e.isEqual(t.destination,i)}))}function h(e,t){d.reportBI(e,r.ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED,{pageId:t})}var f=function(t){return e.map(t.pages,"pageId")};function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(s,a,o){var r=i.siteDataUtils.getRequestModel(e),c=i.siteDataUtils.getRendererModel(e);if(C(o))return n.clientOnlyDataFixers(s,t,r,e.currentUrl,e.urlFormatModel,e.isViewerMode(),c);var u=i.pageUtils.getPageFileNames(e.rendererModel.pageList);return n.fix(s,t,r,e.currentUrl,e.urlFormatModel,e.isViewerMode(),c,u)}}var v=/http:\/\/[a-z]+\.[a-z]+\.com\//,y=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.noop,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.noop;return{name:"page request",urls:t,destination:["pagesData",i],isValidResponse:function(t){return e.isObject(t)},error:n,onUrlRequestFailure:s}};function A(e,t,n,s){var a=this;"undefined"!=typeof document&&"https:"===window.document.location.protocol&&(t[0]=t[0].replace(v,"//static.wixstatic.com/"));var o=y(t,n,(function(i,n){e.isInSSR()&&e.onPageRequestFailed&&e.onPageRequestFailed(t[0],n,i),e.failedRequests.push(a)}),(function(t,s){e.onPageRequestFailed&&e.onPageRequestFailed(t,s);var a=i.urlUtils.parseUrl(t);d.reportBI(e,r.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:n,hostname:a.hostname,url:t,responseStatusCode:s})}));return o.transformFunc=m(e,f(s)),o}function S(e){if("undefined"!=typeof window&&window.performance&&window.performance.getEntriesByName){var t=window.performance.getEntriesByName(e)[0];if(t)return Math.round(t.duration)}return 0}function P(n,s,o){var u,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=d.reportBI,g=d.shouldSendReport,h="masterPage"===s,v=n.biData.getPageNumber(),y=n.getPageList(),A=I(n,s,o,y.topology);n.addFixedPageUrl(s,A);var P={name:"data fixed page request",urls:[A].concat(a(p)),destination:["pagesData",s],isValidResponse:function(t){return e.isObject(t)},transformFunc:m(n,f(y)),onBeforeFetch:e.once((function(){u=e.now(),l(n,c.DATA_FIXED_PAGE_REQUEST,{stage:"1",pageNumber:v,masterPage:h,duration:null})})),callback:function(t,i,s,a){if(C(s)&&g(n,c.DATA_FIXED_PAGE_REQUEST)){var o=S(s)||e.now()-u;l(n,c.DATA_FIXED_PAGE_REQUEST,{stage:"2",pageNumber:v,masterPage:h,duration:o,cdn:e.get(a,"via",null),cdnHit:E(e.get(a,"age"))})}},onUrlRequestFailure:function(a,o,c){if(C(a)){var u="Fixed ".concat("masterPage"===s?"Master ":"","Page Request Failed");t.integrations.ravenUtils.captureError(u,{tags:{"data-fixer-server":!0},extra:{info:e.assign({failRequestUrl:A},e.omit(c,"name"))}}),l(n,r.FIXED_PAGE_REQUEST_FAILED,{errorName:u,failRequestUrl:A,status:e.get(c,"status"),responseText:e.get(c,"responseText")})}else{n.failedRequests.push(P),n.onPageRequestFailed&&n.onPageRequestFailed(a,o);var p=i.urlUtils.parseUrl(a);l(n,r.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:s,hostname:p.hostname,url:a,responseStatusCode:o})}}};return P}function I(t,n,s,a,o,r,c){var l=t.fixedPagesUrls;if(l){var d=l[n];if(d)return d}var g=t.getRendererModel(),h=t.getPublicModel(),f=t.currentUrl,m=t.isUsingUrlFormat(i.siteConstants.URL_FORMATS.SLASH),v=t.getServiceTopologyProperty("siteAssetsServerUrl"),y=function(e,t,n){if(n)return i.pagesUrlUtils.getPageJsonFileNameFromUrl(n);if("masterPage"===t)return i.pagesUrlUtils.getMasterPageJsonFileName(e.getPageList());var s=i.pagesUrlUtils.getPageJsonFileName(e.getPageList(),t);return s||i.pagesUrlUtils.getPageJsonFileName(e.getPageList(),e.getPageList().mainPageId)}(t,n,s),A="masterPage"===n?h.siteRevision:void 0,S=e.omitBy({isUrlMigrated:m,quickActionsMenuEnabled:e.get(g,"siteMetaData.quickActions.configuration.quickActionsMenuEnabled",!1),metaSiteId:o||g.metaSiteId,siteId:r||g.siteInfo.siteId,pageId:y.replace(/\.json/i,""),version:u["santa-data-fixer"],v:e(a).get("0.parts").split("?v=").pop(),isHttps:e.startsWith(f.protocol,"https"),experiments:_(t).join(","),ck:e.get(h,"siteAssets.cacheVersions.dataFixer"),siteRevision:c||A},e.isUndefined),P=i.urlUtils.toQueryString(S);return"".concat(v).concat(p.SITE_ASSETS_SERVER.FIXED_PAGE_JASON_PATH,"?").concat(P)}function _(t){var i=(0,l.getOverrides)(),n=Object.values(i).map((function(e){return e.viewerExperimentKey})),o=["sv_migrateTpaToSemiNative","sv_tpaAddPublicAPI","sv_usedFontsDataFixer"].concat(a(n));return e.filter(o,(function(e){return s.isOpen(e,t)}))}function D(t,i){var n=e.get(t,"rendererModel.passwordProtectedPages",[]);return e.includes(n,i.pageId)}function C(t){return e.includes(t,"".concat(p.SITE_ASSETS_SERVER.FIXED_PAGE_JASON_PATH,"?"))}function E(t){return e.toNumber(t)>0}return{isFixedJsonRequestUrl:C,buildSimplePageRequest:y,getRequestsForPages:function(t,n,s){var a=t.getPageList();if(!a)return[];var o=[],r=!t.isPreviewMode();if(g(t,["pagesData","masterPage"]))h(t,"masterPage");else if(!n.pagesData.masterPage){var c=function(e,t){return A(e,i.pagesUrlUtils.getMasterPageURLs(t),"masterPage",t)}(t,a);o.push(r?P(t,"masterPage",null,c.urls):c)}return e.forEach(e.castArray(s),(function(s){if(s.pageId){var c=!n.pagesData[s.pageId];if(i.errorPages.isErrorPage(s.pageId))o.push(A(t,i.errorPages.getJSONS(t,s.pageId),s.pageId,a));else if(g(t,["pagesData",s.pageId]))h(t,s.pageId);else if(function(t,i){var n=e.find(t.getPageList().pages,{pageId:i.pageId});return!e.isEmpty(i.jsonUrls)&&e.isEmpty(e.get(n,"urls"))}(t,s)){var u=A(t,s.jsonUrls,s.pageId,a);o.push(r?P(t,s.pageId,s.jsonUrls[0],u.urls):u)}else if(c&&(!D(t,s)||function(t,i){var n=e.find(t.getPageList().pages,{pageId:i.pageId});return D(t,i)&&e.get(n,"pageJsonFileName")}(t,s))){var p=function(e,t){var n=e.getPageList();if(e.currentUrl&&e.currentUrl.query.fakePage){var s=e.currentUrl.query.fakePage;return{urls:["".concat(e.santaBase,"/static/fakePages/").concat(s,".json")],destination:["pagesData",t],transformFunc:m(e,f(n))}}var a=i.pagesUrlUtils.getPageURLs(n,t);return a||(t=n.mainPageId,a=i.pagesUrlUtils.getPageURLs(n,n.mainPageId)),A(e,a,t,n)}(t,s.pageId);o.push(r?P(t,s.pageId,null,p.urls):p)}}})),o},getRequestForGhostStructure:function(n,r,c,u){if(!g(n,["ghostStructureData",c,u])){var p=e.get(n.getRendererModel(),["pageList","topology"]);return function(i,n,r,c){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],p=arguments.length>5?arguments[5]:void 0,l="724ac426-04e0-420b-bd92-5f2de361cfe7",d="ee825647-2945-44d0-b4b5-068f3568f38a",g="3",h=I(i,null,c,p,d,l,g),f=m(i),v=function(){var e=f.apply(void 0,arguments);return o.buildGhostStructure(e)},y={name:"Ghost structure request",urls:[h].concat(a(u)),destination:["ghostStructureData",r,n],isValidResponse:function(t){return e.isObject(t)&&e.get(t,["structure","id"])===n},onUrlRequestFailure:function(a,o,c){i.failedRequests.push(y),s.isOpen("sv_loadGhostStructureReportErrors",i)&&t.integrations.ravenUtils.captureError("Request for ghost structure data failed",{tags:{"load-ghost-structure":!0},extra:{info:e.assign({failRequestUrl:a,applicationId:r,widgetId:n},e.omit(c,"name"))}})},transformFunc:v};return y}(n,u,c,r,i.pagesUrlUtils.getJsonUrlFromJsonFileName(p,r),p)}}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(3),i(566),i(92),i(60),i(16),i(46),i(567),i(8)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u){"use strict";var p=t.hashUtils,l=t.cookieUtils,d=new WeakMap,g="ACTIVE",h="APPLICANT",f={Login:"login",Captcha:"captcha",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword",Notification:"notification",Credits:"credits",PasswordProtected:"enterPassword",EmailVerification:"emailVerification",SentConfirmationEmail:"sentConfirmationEmail",Welcome:"welcome",NoPermissionsToPage:"noPermissionsToPage"},m=[f.Login,f.SignUp],v="template",y="siteowner",A="register",S="resetPasswordEmail",P="resetPasswordNewPassword",I={Login:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinMaterial",socialMobileThemeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinMaterial"},SignUp:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinMaterial",socialMobileThemeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinMaterial"},ResetPasswordEmail:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkinMaterial"},ResetPasswordNewPassword:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkinMaterial"},Notification:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.notificationDialogSkinMaterial"},PasswordProtected:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkinMaterial"},EmailVerification:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.emailVerificationDialogSkinMaterial"},SentConfirmationEmail:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.sentConfirmationEmailMaterial"},Welcome:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.welcomeDialogSkinMaterial"},NoPermissionsToPage:{themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.noPermissionsToPageMaterial"}},_="svSession",D="smSession",C="wixClient",E="sm_ef",b="14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",T="14cffd81-5215-0a7f-22f8-074b0e2401fb",R="member_info",w=["675bbcef-18d8-41f5-800e-131ec9e08762","14ce1214-b278-a7e4-1373-00cebd1bef7c"];function M(e,t){e=0===e.indexOf("www")?e.substr(3):e,l.deleteCookie(E,e,t),l.deleteCookie(E,e,"/")}function O(e,t){var i=this.aspectSiteApi.getSiteAPI().getSiteAspect("WidgetAspect").getWidgetHandler(),n="".concat("viewer_platform_public_api_"+t.appDefId,"_").concat(t.workerId),s=i&&i.getPostMessageTarget(t.workerId);return s?r.api.request(n,{target:s}):Promise.reject(new Error("Application API not found."))}function k(){var t=d.get(this);"undefined"==typeof window||t.compsDownloaded||(t.compsDownloaded=new Promise((function(t){setTimeout((function(){var i=s.all();requirejs(i,(function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];var r=e.zipObject(i,a);s.callAllRequiredPackagesCallbacks(r),t()}))}),500)})))}function x(e){var t=d.get(this);t.compsDownloaded?t.compsDownloaded.then(e):e()}function L(e,t,i){return{componentType:e,type:"Component",id:t,key:t,skin:i}}function N(e){return L("wysiwyg.viewer.components.dialogs.EnterPasswordDialog","enterPasswordDialog",B(I.PasswordProtected,e))}function B(e,t){return U(t)&&t.isMobileView()&&e.socialMobileThemeStyledMaterial?e.socialMobileThemeStyledMaterial:e.themeStyledMaterial}function U(t){var i=e.get(t.getDataByQuery("masterPage"),["smSettings"],{});return!(!i.socialLoginGoogleEnabled&&!i.socialLoginFacebookEnabled)}function F(t,i){if(e.isBoolean(i))return i?f.Login:f.SignUp;var n=t.getDataByQuery("masterPage");return e.get(n,["smSettings","smFirstDialogLogin"],!1)?f.Login:f.SignUp}function q(i){var n=this.aspectState.read("languageToDisplay"),s=t.wixUserApi.getLangDirection(n),a={};return a.language=n,a.direction=s,a.translations=e.merge({},t.translationsLoader.getTranslationAllKeys("dialogMixinTranslations",n),t.translationsLoader.getTranslationAllKeys("SM",n)),a.onCloseDialogCallback=De.bind(this),a.notClosable=this.aspectState.read("notClosable"),a.checkCommunityCheckbox=this.aspectState.read("checkCommunityCheckbox"),a.smCollectionExposure=e.get(this.siteData.getClientSpecMapEntriesByType("sitemembers"),"[0].collectionExposure"),a.smCollectionId=e.get(this.siteData.getClientSpecMapEntriesByType("sitemembers"),"[0].smcollectionId"),i.call(this,a),a}function W(e){e.onSubmitCallback=te.bind(this);var t=this.aspectState.read("languageToDisplay");e.onTokenMessage=ie.bind(this),e.onBackendSocialLogin=ne.bind(this),e.onSwitchDialogLinkClick=function(){_e.call(this,this.aspectState.read("nextPageInfo"),!0)||$.call(this,f.SignUp,void 0,t)}.bind(this),e.onForgetYourPasswordClick=function(){ze.call(this,a.SITE_MEMBER_CLICKED_FORGOT_PASSWORD),$.call(this,f.ResetPasswordEmail,void 0,t)}.bind(this),e.needLoginMessage=this.aspectState.read("showDialogMessage")}function V(e){e.onSubmitCallback=se.bind(this);var t=this.aspectState.read("languageToDisplay");e.onTokenMessage=ie.bind(this),e.onBackendSocialLogin=ne.bind(this),e.onSwitchDialogLinkClick=$.bind(this,f.Login,void 0,t),e.needLoginMessage=this.aspectState.read("showDialogMessage"),e.hasSocialAppInstalled=J.call(this,this.siteData)}function G(e){e.onSubmitCallback=ae.bind(this)}function H(e){e.biContext="confirm email to start",e.onResendLinkClick=oe.bind(this,e.biContext),e.onDialogReady=ue.bind(this)}function Q(e){e.biContext="sent confirmation email",e.onResendLinkClick=re.bind(this,e.biContext),e.onDialogReady=pe.bind(this)}function j(t){var i=e.get(this.siteData.currentUrl.query,"forgotPasswordLang","en");t.language=i,t.onSubmitCallback=de.bind(this,i),t.notClosable=this.aspectState.read("notClosable")}function K(e){var t=e.language,i=this.siteData;switch(this.aspectState.read("notificationToDisplay")){case f.SignUp:var n=qe[i.siteId].siteMember.details.email;e.title="",e.description="".concat(Ze(t,"SMApply_Success1")," ").concat(Ze(t,"SMApply_Success2").replace("{0}",n)),e.buttonText=Ze(t,"SMContainer_OK");break;case f.ResetPasswordEmail:e.title=Ze(t,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE"),e.description=Ze(t,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT"),e.buttonText=Ze(t,"Reset_Password_OK");break;case f.ResetPasswordNewPassword:e.title=Ze(t,"siteMembersTranslations_Reset_Password_Sucess_Title"),e.description="",e.buttonText=Ze(t,"SMContainer_OK"),e.onButtonClick=He.bind(this,f.Login,"resetPasswordSuccessNotification");break;case"siteowner":e.title=Ze(t,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE"),e.description=Ze(t,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE"),e.buttonText=Ze(t,"SMContainer_OK");break;case v:e.title=Ze(t,"siteMembersTranslations_TEMPLATE_NOTIFICATION_TITLE"),e.description=Ze(t,"siteMembersTranslations_TEMPLATE_NOTIFICATION_MESSAGE"),e.buttonText=Ze(t,"SMContainer_OK")}}function z(e){e.onSubmitCallback=$e.bind(this,this.aspectState.read("nextPageInfo"))}function J(t){return!!t.routers&&e(t.routers.configMap).map((function(e){return JSON.parse(e.config)})).filter((function(e){return"public"===e.type&&e.patterns&&Object.keys(e.patterns).length>0})).value().length>0}function Y(e,t){var i={appDefId:b,workerId:this.siteData.getPrimaryPageId()};t.closeDialog(!1),O.call(this,this.aspectSiteApi.getSiteAPI(),i).then((function(e){e.navigateToSection({appDefinitionId:T,sectionId:R,memberId:"_signedInUser_"})}))}function Z(e){var t=this;e.onSubmitCallback=Y.bind(this);var i=l.getCookie(E),n=i&&i.split("|")[1];e.language=n&&n.trim()||"en";var s=e.onCloseDialogCallback;e.onCloseDialogCallback=function(){s.apply(void 0,arguments);var e=t.siteData.getMainPagePath();M(t.siteData.currentUrl.hostname,e)}}function X(e){var t=this;e.onSwitchAccountClick=function(){t.logout()}}function $(t,i,n,s,a){this.aspectState.update(e.merge({},{dialogToDisplay:t},n?{languageToDisplay:n}:{},e.isFunction(i)?{dialogProcessSuccessCallback:i}:{},e.isFunction(s)?{onCancelCallback:s}:{},e.isBoolean(a)?{checkCommunityCheckbox:a}:{},{logoutState:!1}))}function ee(t,i){this.aspectState.update(e.merge({},{notificationToDisplay:t,dialogToDisplay:f.Notification},i?{languageToDisplay:i}:{}))}function te(e,t){var i=l.getCookie(_);ze.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:t.props.id}),n.login(e,be.bind(this,t),(function(e){t.endLoader(),t.setErrorMessageByCode(e)}),i,null),t.startLoader()}function ie(e,t,i,s){var a=l.getCookie(_),o=Re.bind(this,s,i,t),r=we.bind(this,s,i,t);n.handleOauthToken(o,r,{svSession:a,token:e,provider:t,visitorId:this.aspectSiteApi.getSiteAPI().getBiVisitorId(),mode:s.props.id,lang:s.props.language,privacyStatus:s.getJoinCommunityStatus()}),s.startLoader()}function ne(t,i,s,a){var o=Re.bind(this,t,i,s),r=a.smSession&&a.smSession.sessionToken;r?n.authByToken(r,(function(t){o({httpOnlySession:!0,payload:e.merge({},a,{pages:t.payload.pages})})}),(function(e){t.endLoader(),t.setOuathErrorMessageByCode(e)})):o({payload:a})}function se(t,i){var s=this.siteData.getClientSpecMap(),o=e.find(s,{type:"sitemembers"}).collectionType,r=l.getCookie(_);"Open"===o?(n.register(t,Me.bind(this,i),(function(e){i.endLoader(),i.setErrorMessageByCode(e)}),r),i.startLoader()):"ApplyForMembership"===o&&n.apply(t,Ue.bind(this,i.props.language),i.setErrorMessageByCode,r),ze.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:i.props.id})}function ae(e,t){var i=this.siteData.currentUrl.full;ze.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:t.props.id}),n.sendForgotPasswordMail({email:e.email,homePageUrl:i,lang:t.props.language},function(){var e=this.aspectState.read("invokeResetPasswordDialogCb"),i=this.aspectState.read("dialogProcessSuccessCallback");e&&(i(),this.aspectState.update({dialogProcessSuccessCallback:null}),this.aspectState.delete("invokeResetPasswordDialogCb")),ee.call(this,S,t.props.language)}.bind(this),t.setErrorMessageByCode,f.ResetPasswordEmail)}function oe(e){ce.call(this),Ke.call(this,{context:e,name:"resend confirmation email"}),$.call(this,f.SentConfirmationEmail)}function re(e){ce.call(this),Ke.call(this,{context:e,name:"resend confirmation email"})}function ce(){var t=this.aspectState.read("pendingMemberId");n.resendEmailVerification(t,e.noop,e.noop)}function ue(){je.call(this,{notificationName:"confirm email to access"})}function pe(){je.call(this,{notificationName:"sent confirmation email"})}function le(e){delete this.siteData.currentUrl.query.forgotPasswordToken,ee.call(this,P,e)}function de(e,t,i){ze.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:i.props.id}),n.resetMemberPassword(t,le.bind(this,e),i.setErrorMessageByCode)}function ge(t,i){return e.includes(t.rendererModel.passwordProtectedPages,i)}function he(t,i,n){return!function(t,i){return e.includes(qe[t.siteId].approvedPasswordPages,i)}(t,n)&&function(e,t,i){return t.passwordDigest||ge(e,i)}(t,i,n)}function fe(e,t,i){var n=t.requireLogin&&(!this.isLoggedIn()||!e.hasPageData(i));return!(he(e,t,i)||n)}function me(t,i){return e.includes(t.getAllPageIds(),i)||o.errorPages.isErrorPage(i)}function ve(t,i,n){if(e.has(t.currentUrl.query,"forgotPasswordToken"))return f.ResetPasswordNewPassword;if(he(t,i,n))return f.PasswordProtected;if(i.requireLogin){if(!this.isLoggedIn())return F.call(this,t);if(!t.hasPageData(n)){var s=this.getCustomNoPermissionsPageId();if(s&&n!==s){var a={restrictedPageId:n};return this.aspectSiteApi.navigateToPage({pageId:s,hasAppSectionParams:!0,queryParams:{appSectionParams:JSON.stringify(a)}}),null}return f.NoPermissionsToPage}}return null}function ye(e,t){var i=e.getDataByQuery(t);return i&&i.pageSecurity||{}}function Ae(){this.aspectState.update({dialogToDisplay:null,checkCommunityCheckbox:null,nextPageInfo:null,onCancelCallback:null,dialogProcessSuccessCallback:null,showDialogMessage:!1,smtoken:this.siteData.getSMToken()})}function Se(){var t=e.get(this.siteData.getDataByQuery("masterPage"),["smSettings","customSignUpPageId"],null);return t&&me.call(this,this.siteData,t)?t:null}function Pe(e,t){return!this.isLoggedIn()&&e===this.siteData.getMainPageId()&&t.requireLogin}function Ie(e,t){var i=e&&e.pageId||this.siteData.getCurrentUrlPageId(),n=ye.call(this,this.siteData,i);return(ve.call(this,this.siteData,n,i)===f.SignUp||t)&&Se.call(this)&&(i!==this.siteData.getCurrentUrlPageId()||!Pe.call(this,i,n))}function _e(e,t){var i=this.aspectState.read("customSignupWorkersHack")||Ie.call(this,e,t);return i&&e&&e.pageId===this.siteData.getCurrentUrlPageId()?(this.aspectState.update({customSignupWorkersHack:e}),this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()})):i&&(this.aspectState.update({dialogToDisplay:null,customSignupWorkersHack:null}),this.aspectSiteApi.navigateToPage({pageId:Se.call(this)})),i}function De(i,n,s,o){if(this.siteData.currentUrl.query.showSignUpDialog){delete this.siteData.currentUrl.query.showSignUpDialog;var r={pageId:{id:this.siteData.getMainPageId()},type:"PageLink",queryParams:this.siteData.currentUrl.query},c=t.linkRenderer.renderLink(r,this.siteData,this.siteData.getRootNavigationInfo());this.aspectSiteApi.getSiteAPI().href(c.href)}else{s&&ze.call(this,a.SITE_MEMBER_EXIT_DIALOG,{context:i.props.biContext||i.props.id});var u=qe[this.siteData.siteId].siteMember,p=this.aspectState.read("onCancelCallback");e.isFunction(p)&&!u.details&&p(),i.performCloseDialog(function(){this.aspectSiteApi.getActionQueue().runImmediately(function(){var t=o||this.aspectState.read("nextPageInfo");Ae.call(this),this.aspectState.delete("invokeResetPasswordDialogCb"),i.endLoader(),n?t&&(e.invokeMap(this.onLoginSuccessCallbacks,"callback"),t.routerDefinition&&(t.isRefetchingPageAfterLogin=!0,delete t.pageId),this.aspectSiteApi.navigateToPage(t)):t&&t.pageId===this.siteData.getCurrentUrlPageId()&&(this.aspectState.update({navigatingOutPageId:t.pageId}),this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()}))}.bind(this))}.bind(this))}}function Ce(){!0!==this.aspectState.read("stopShowDialog")&&this.aspectState.update({stopShowDialog:!0})}function Ee(){!1!==this.aspectState.read("stopShowDialog")&&this.aspectState.update({stopShowDialog:!1})}function be(e,t){xe.call(this,e,t,a.SITE_MEMBER_LOGIN_SUCCESS)}function Te(e,t){e.postMessage({src:"wix-social-login",type:t,action:"revoke"},"*")}function Re(e,t,i,n){var s=n.payload,a=s.siteMemberDto,o=s.smSession;n.httpOnlySession?xe.call(this,e,n):o?xe.call(this,e,{payload:o}):Ue.call(this,e.props.language,{payload:a}),Te(t,i)}function we(e,t,i,n){e.endLoader(),e.setOuathErrorMessageByCode(n),Te(t,i)}function Me(e,t){xe.call(this,e,t)}function Oe(t,i,n){t.endLoader();var s=qe[this.siteData.siteId].siteMember;s.details=i.payload.siteMemberDto,this.aspectState.update({memberDetails:s.details});var a,r=this.aspectState.read("dialogProcessSuccessCallback");if(e.isFunction(r)&&(r(s.details),this.aspectState.update({dialogProcessSuccessCallback:null})),i.payload.pages&&(this.siteData.setPagesJsonFileName(i.payload.pages),a=this.aspectState.read("nextPageInfo")),De.call(this,t,!0,!0,a),n){var c=s.details.attribute&&s.details.attribute.name||s.details.email;this.aspectSiteApi.reportBI(n,{userName:o.logger.sanitizePIIForBi(c)})}}function ke(e,t){t.pages&&this.siteData.setPagesJsonFileName(t.pages),this.aspectSiteApi.getSiteAPI().getSiteAspect("WidgetAspect").updateWixCodeModelDataAfterLogin(),e(t.raw)}function xe(e,t,i){x.call(this,function(){var n,s,a,o,r;Be(t)?(this.aspectState.update({pendingMemberId:t.payload.siteMemberDto.id}),$.call(this,f.EmailVerification,void 0,e.props.language,function(){this.aspectState.update({pendingMemberId:null})}.bind(this))):(t.httpOnlySession||(n=t.payload,s=this.siteData,a=n.cookieName||D,o=n.sessionToken,r=n.rememberMe?n.expirationDate:0,l.setCookie(a,o,r,s.currentUrl.hostname,s.getMainPagePath(),!1)),Fe.call(this,Oe.bind(this,e,t,i)))}.bind(this))}function Le(e,t){var i=this.aspectState.read("nextPageInfo");i&&this.aspectSiteApi.navigateToPage(i),Ae.call(this),e(t)}function Ne(e,t,i){x.call(this,function(){if(Be(t))Ae.call(this),this.aspectState.update({pendingMemberId:t.payload.siteMemberDto.id}),$.call(this,f.EmailVerification,void 0,this.aspectState.read("languageToDisplay"),function(){this.aspectState.update({pendingMemberId:null})}.bind(this));else{var n=Le.bind(this,e);i||t.payload.status===g?Fe.call(this,ke.bind(this,n,t.payload)):ke.call(this,n,t.payload)}}.bind(this))}function Be(e){return e.payload.hasOwnProperty("sessionToken")&&null===e.payload.sessionToken&&!e.payload.emailVerified}function Ue(t,i){var n=i.payload,s=i.member,a=qe[this.siteData.siteId].siteMember;a.details=n||s,a.details.email=e.get(n,"loginEmail",a.details.email||s.email);var o=this.aspectState.read("dialogProcessSuccessCallback");e.isFunction(o)&&(o(a.details),this.aspectState.update({dialogProcessSuccessCallback:null})),ee.call(this,A,t)}function Fe(e){this.aspectSiteApi.getSiteAspect("dynamicClientSpecMap").reloadClientSpecMap(e)}var qe={};function We(e){qe[this.siteData.siteId].approvedPasswordPages.push(e)}function Ve(e,i,n,s){var a=this.siteData.getSiteRevision(),o={password:e,metaSiteId:this.siteData.getMetaSiteId(),siteId:this.siteData.siteId,pageId:i.pageId};t.ajaxLibrary.ajax({type:"POST",url:"".concat(this.siteData.serviceTopology.protectedPageResolverUrl,"?siteRevision=").concat(a),data:o,dataType:"json",cache:!1,contentType:"application/json",success:n,error:s})}function Ge(e,t,i){var n;(n=e,p.SHA256.b64_sha256(n))===this.aspectState.read("passwordDigest")?t(this.aspectState.read("nextPageInfo")):i()}function He(e,t){ze.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:t}),$.call(this,e)}function Qe(){var t=e.merge({context:this.aspectState.read("dialogToDisplay"),has_social:!!U(this.siteData)},{initator:"unknown"});ze.call(this,a.SITE_MEMBER_AUTH_DIALOG_OPENED,t)}function je(e){ze.call(this,a.SITE_MEMBER_NOTIFICATION_OPEN,{notification_name:e.notificationName})}function Ke(e){ze.call(this,a.SITE_MEMBER_CLICK_LINK,{context:e.context,name:e.name})}function ze(t,i){var n=this.aspectSiteApi.getSiteAPI().getBiVisitorId();n&&this.aspectSiteApi.reportBI(t,e.merge(i||{},{visitor_id:n}))}function Je(){return e.includes(m,this.aspectState.read("dialogToDisplay"))}function Ye(e,t){Fe.call(this,function(){e.siteMember.details=null,this.aspectState.update({notificationToDisplay:null}),this.aspectSiteApi.getSiteAPI().getSiteAspect("WidgetAspect").updateWixCodeModelDataAfterLogin(),t()}.bind(this))}function Ze(e,i){return t.translationsLoader.getTranslation("siteMembersTranslations",e,i)}function Xe(e,t){De.call(this,e,!0),We.call(this,t.pageId),this.aspectSiteApi.navigateToPage(t),this.aspectState.update({passwordDigest:null})}function $e(t,i,n){var s=function(e){var t="SMForm_Error_General_Err";try{t=JSON.parse(e.responseText).errorCode}catch(e){}n.setErrorMessageByCode(t)};if(e.isEmpty(i.password))return n.setErrorMessage("PasswordLogin_Wrong_Password");if(ge(this.siteData,t.pageId)){var a=this;Ve.call(this,i.password,t,(function(e){t.jsonUrls=e.payload.urls,Xe.call(a,n,t)}),s)}else Ge.call(this,i.password,Xe.bind(this,n),s)}function et(e){switch(this.aspectState.read("dialogToDisplay")){case f.Login:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog","memberLoginDialog",B(I.Login,e))}(e);case f.Captcha:return function(e){return L("wysiwyg.viewer.skins.dialogs.CaptchaDialogSkin","captchaDialog",B(I.Captcha,e))}(e);case f.SignUp:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog","signUpDialog",B(I.SignUp,e))}(e);case f.ResetPasswordEmail:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog","requestResetPasswordDialog",B(I.ResetPasswordEmail,e))}(e);case f.ResetPasswordNewPassword:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog","resetPasswordDialog",B(I.ResetPasswordNewPassword,e))}(e);case f.Notification:return function(e){return L("wysiwyg.viewer.components.dialogs.NotificationDialog","notificationDialog",B(I.Notification,e))}(e);case f.PasswordProtected:return N(e);case f.EmailVerification:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.EmailVerificationDialog","emailVerificationDialog",B(I.EmailVerification,e))}(e);case f.SentConfirmationEmail:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SentConfirmationEmailDialog","sentConfirmationEmailDialog",B(I.SentConfirmationEmail,e))}(e);case f.Welcome:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.WelcomeDialog","welcomeDialog",B(I.Welcome,e))}(e);case f.NoPermissionsToPage:return function(e){return L("wysiwyg.viewer.components.dialogs.siteMemberDialogs.NoPermissionsToPageDialog","noPermissionsToPageDialog",B(I.NoPermissionsToPage,e))}(e);case f.AdminLogin:return N(e);default:return null}}function tt(){var t;switch(k.call(this),this.aspectState.read("stopShowDialog"),this.aspectState.read("dialogToDisplay")){case f.Login:t=W;break;case f.SignUp:t=V;break;case f.ResetPasswordEmail:t=G;break;case f.ResetPasswordNewPassword:t=j;break;case f.Notification:t=K.bind(this);break;case f.Credits:t=e.noop;break;case f.PasswordProtected:t=z;break;case f.EmailVerification:t=H;break;case f.SentConfirmationEmail:t=Q;break;case f.Welcome:t=Z;break;case f.NoPermissionsToPage:t=X;break;default:return{}}return Je.call(this)&&Qe.call(this),q.call(this,t)}function it(){this.aspectState.update({smtoken:this.siteData.getSMToken()})}function nt(){var t=this.aspectState.read("memberDetails");e.forEach(this._memberDetailsChangeRegisteredComps,(function(e){e.sendPostMessage({intent:"addEventListener",eventType:"MEMBER_DETAILS_UPDATED",params:t})}))}function st(e){if(this._santaSiteAuthAspect)this._santaSiteAuthAspect("showAuthenticationDialog",e);else if(this.siteData.isTemplate())ee.call(this,v,e.language);else{this.aspectState.update({initiatorAppId:e.appId});var t=F.call(this,this.siteData,e.showLoginDialog);t===f.SignUp&&this.getCustomSignupPageId()?this.aspectSiteApi.navigateToPage({pageId:this.getCustomSignupPageId()}):$.call(this,t,e.successCallback,e.language,e.cancelCallback,e.checkCommunityCheckbox)}}function at(){var i=this.aspectSiteApi.getSiteAPI().getSiteAspect("siteAuthAspect")||c,n=o.errorPages,s=o.urlUtils,l=o.ajaxLibrary,d=i.createAspect({type:"SITE_MEMBERS",runtimeData:{aspectSiteAPI:this.aspectSiteApi,experiment:u,privateMembers:qe,onLoginSuccessCallbacks:this.onLoginSuccessCallbacks,downloadCompsUtils:{downloadAllComps:k.bind(this),waitForCompsDownload:x.bind(this)}},externals:{errorPages:n,pmrpc:r,coreUtils:t,urlUtils:s,ajaxLibrary:l,hashUtils:p},constants:{biEvents:a}});return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.invoke.apply(e,[d,t].concat(n))}}function ot(t){var i=this;d.set(this,{compsDownloaded:null}),this.onLoginSuccessCallbacks=[],this._memberDetailsChangeRegisteredComps={},this.aspectSiteApi=t,this.siteData=t.getSiteData(),this.aspectState=function(t){return{read:function(i){var n=t.getAspectGlobalData("siteMembers");return i?e.get(n,i):n},update:function(e){t.updateAspectGlobalData("siteMembers",e)},delete:function(i){var n=e.set(t.getAspectGlobalData("siteMembers"),i,void 0);t.updateAspectGlobalData("siteMembers",n)}}}(this.aspectSiteApi);var s,a=rt(this.siteData);this.aspectState.update({navigatingOutPageId:null,dialogProcessSuccessCallback:null,onCancelCallback:null,showDialogMessage:!1,passwordDigest:null,nextPageInfo:null,dialogToDisplay:a,notificationToDisplay:null,languageToDisplay:e.get(this.siteData.currentUrl.query,"forgotPasswordLang")||"en",notClosable:!1,smtoken:this.siteData.getSMToken(),memberDetails:null}),this.siteData.isFirstRenderAfterSSR()&&(this.aspectState.update({isFirstRenderAfterSSR:!0}),this.aspectSiteApi.registerToDidLayout(e.once((function(){i.aspectState.update({isFirstRenderAfterSSR:!1})})))),s=this.siteData,qe[s.siteId]={approvedPasswordPages:[],siteMember:{details:null}},n.initializeData(this.siteData),e.bindAll(this,e.functionsIn(this)),this.aspectSiteApi.registerClientSpecMapUpdateCallback(it.bind(this)),this.aspectSiteApi.registerToUrlPageChange((function(){i.aspectState.update({nextPageInfo:null});var e=i.aspectState.read("navigatingOutPageId");e&&(i.siteData.getCurrentUrlPageId()!==e&&i.aspectState.update({navigatingOutPageId:null}));var t=i.aspectState.read("customSignupWorkersHack");t&&(i.aspectState.update({dialogToDisplay:null}),i.aspectSiteApi.navigateToPage(t))})),u.isOpen("sv_SantaSiteAuthPhase1",this.siteData)&&(this._santaSiteAuthAspect=at.call(this))}function rt(t){return e.has(t.currentUrl.query,"forgotPasswordToken")?f.ResetPasswordNewPassword:e.has(t.currentUrl.query,"showSignUpDialog")?f.SignUp:l.getCookie(E)?function(e){if(function(e){return!!e.getClientSpecMapEntryByAppDefinitionId(b)}(e))return f.Welcome;return M(e.currentUrl.hostname,e.getMainPagePath()),null}(t):null}return ot.prototype={getComponentsToRender:function(e){return this.siteData.isInSSR()||this.aspectState.read("isFirstRenderAfterSSR")||!this.aspectState.read("dialogToDisplay")?null:[{structure:et.call(this,e.getSiteData()),props:tt.call(this)}]},isLoggedIn:function(){return!!this.aspectState.read("smtoken")},getCustomSignupPageId:function(){return Se.call(this)},getCustomNoPermissionsPageId:function(){var t=e.get(this.siteData.getDataByQuery("masterPage"),["smSettings","customNoPermissionsPageId"],null);return me(this.siteData,t)?t:null},authorizeMemberPages:function(e,t){var i=this;return n.getAuthorizedPages((function(t){var n=t.payload.raw.authorizedPages;i.siteData.setPagesJsonFileName(n);var s=Object.keys(n);e(s)}),t)},shouldRenderCustomSignupPage:function(e){return Ie.call(this,e)},showAuthenticationDialog:function(e){requirejs.defined("dialogs")?st.call(this,e):requirejs(["dialogs"],st.bind(this,e))},getMemberDetailsInternal:function(t,i,s,a){i=e.isFunction(i)?i:e.noop;var o=qe[this.siteData.siteId].siteMember;return!this.isLoggedIn()&&!a||o.details&&!s?(t&&t(o.details),o.details):(n.getMemberDetails(this.aspectState.read("smtoken"),function(e){o.details=e.payload,this.aspectState.update({smtoken:this.siteData.getSMToken(),memberDetails:o.details}),s&&nt.call(this),t&&t(o.details)}.bind(this),i,a),null)},getMemberDetails:function(e,t,i){return this.getMemberDetailsInternal(e,t,i)},getMemberDetailsInPreview:function(e,t,i){return n.initializeData(this.siteData),this.getMemberDetailsInternal(e,t,i,!0)},isPageAllowed:function(e){if(this.aspectSiteApi.getRenderFlag("isPageProtectionEnabled")){var t=e.pageId;return fe.call(this,this.siteData,ye(this.siteData,t),t)}return!0},showDialogOnNextRender:function(e){Ee.call(this);var t=this.aspectState.read("logoutState");!1!==t&&this.aspectState.update({logoutState:!1});var i=e.pageId,n=ye(this.siteData,i),s=fe.call(this,this.siteData,n,i),a=this.aspectState.read("navigatingOutPageId");this.aspectState.read("dialogToDisplay")||s||a===i||(!function(e,t,i){return!0===e&&t&&t.pageId===i.getCurrentUrlPageId()}(t,e,this.siteData)?(this.aspectState.update({nextPageInfo:e}),_e.call(this,e)||this.aspectState.update({showDialogMessage:!0,dialogToDisplay:ve.call(this,this.siteData,n,i),languageToDisplay:this.siteData.multilingual.currentLanguageCode||"en",passwordDigest:n&&n.passwordDigest||void 0,notClosable:e.pageId===this.siteData.getCurrentUrlPageId()&&e.pageId===this.siteData.getMainPageId()})):this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()}))},logout:function(t,i,s,a){var o=this;i=e.isFunction(i)?i:e.noop,s=e.isFunction(s)?s:e.noop,a=e.isObject(a)?a:{};var r=qe[this.siteData.siteId].siteMember;if(l.getCookie(C)&&r.details&&r.details.owner)ee.call(this,y,t),s("Current member is the site owner, which can not be logout");else{this.aspectState.update({logoutState:!0});var c={siteMember:r};if(l.getCookie(D))l.deleteCookie(D,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath()),Ye.call(this,e.merge(c,{isHttpOnlySession:!1}),i);else{n.logout((function(){return e.isFunction(a.navigateToPage)?a.navigateToPage():o.aspectSiteApi.getSiteAPI().reloadPage()}),s)}}},showResetPasswordDialog:function(t,i,n){this._santaSiteAuthAspect?this._santaSiteAuthAspect("showResetPasswordDialog",{language:t,successCallback:i,cancelCallback:n}):($.call(this,f.ResetPasswordEmail,i,t,n),e.isFunction(i)&&this.aspectState.update({invokeResetPasswordDialogCb:!0}))},forceCloseDialog:function(){this._santaSiteAuthAspect?this._santaSiteAuthAspect("forceCloseDialog"):Ce.call(this)},reportSiteMembersBi:function(e,t){ze.call(this,a[e],t)},registerToUserLogin:function(t){var i=e.uniqueId("callback");return this.onLoginSuccessCallbacks.push({id:i,callback:t}),i},unRegisterToUserLogin:function(t){var i=e.findIndex(this.onLoginSuccessCallbacks,{id:t});-1!==i&&e.pullAt(this.onLoginSuccessCallbacks,i)},registerToMemberDetailsChange:function(e){this._memberDetailsChangeRegisteredComps[e.props.id]=e},unRegisterMemberDetailsChange:function(e){delete this._memberDetailsChangeRegisteredComps[e.props.id]},registerUser:function(t,i){var s=this,a=t.email,o=t.password,r=t.contactInfo,c=t.defaultFlow,u=e.find(this.siteData.getClientSpecMap(),(function(t){var i=t.appDefinitionId;return e.includes(w,i)})).instance;n.customRegister({email:a,password:o,contactInfo:r,instance:u},(function(e){return Ne.call(s,(function(e){c&&e.member.status===h&&Ue.call(s,s.aspectState.read("languageToDisplay"),e),i(e)}),e)}),(function(e){return i(null,e)}))},loginUser:function(e,t,i){var s=this,a=l.getCookie(_),o={email:e,password:t};n.login(o,(function(e){return Ne.call(s,(function(){return i(e.payload.sessionToken)}),e,!0)}),(function(e){return i(null,e)}),a,null)},authenticateSession:function(e,t){var i=this;n.authByToken(e,(function(e){return Ne.call(i,t,e,!0)}),(function(e){return t(null,e)}))}},i.siteAspectsRegistry.registerSiteAspect("siteMembers",ot),{getInitialDialogToDisplay:rt}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(204),i(205)],void 0===(s=function(e,t,i,n){"use strict";function s(e){return e&&e.length>0&&"pagesData"===e[0]}function a(e){return"page"===this.pointers.getPointerType(e)}function o(i){return i&&e.includes(t.constants.DATA_TYPES,i.type)}function r(t,i,n){var s=this,a=this.pointers.page.getAllPagesPointer();this.displayedJsonDAL.set(a,{}),t.masterPage&&c.call(this,i,"masterPage",!0),e(t).omit("masterPage").keys().forEach((function(e){return c.call(s,i,e,n)}))}function c(e,t,i){e[t]=e[t]||{};var n=this.pointers.page.getPagePointer(t)||this.pointers.page.getNewPagePointer(t);this.displayedJsonDAL.set(n,{}),p.call(this,n,e,i)}function u(i,s,a,o){var r=s.structure.id||a,c=n(this.pointers,this.fullJsonGetters,r),u=t.fullToDisplayedJson.getDisplayedJson(s,i,r,c,this.pointersMapApi,o),p=this.pointers.page.getPagePointer(r)||this.pointers.page.getNewPagePointer(r),l=this.fullCache.getPath(p),d=e.has(u.structure,"mobileComponents"),f=this.displayedJsonDAL,m=this.pointers,v=f.get(m.multilingual.currentLanguageCode())||null,y=m.multilingual.originalLanguage(),A=f.isExist(y)?f.get(y).languageCode:null;if(!e.isNull(v)&&!e.isNull(A)&&v!==A){var S=e.cloneDeep(e.get(s,"translations.".concat(v,".data.document_data"),{}));e.assign(u.data.document_data,S)}var P=e.defaults({structure:g(u.structure,{includeMobile:d,id:a})},u);return h.call(this,p,P,l),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(r,t.constants.VIEW_MODES.DESKTOP)),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(r,t.constants.VIEW_MODES.MOBILE)),u}function p(i,a){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=this.fullCache.getPath(i);if(this.pointers.page.isPointerPageType(i)){var p=e.get(this.fullJson,c);return u.call(this,a,p,i.id,this.displayedJsonDAL.jsonData),void(r&&this.anchorsAPI.createPageAnchors(i.id))}if(c){var d=e.take(c,2),f=e.last(d),m=this.fullCache.getPath(e.assign({},i,{multilingual:t.multilingual.PointerOperation.GET})),v=e.get(this.fullJson,m);if(s(c)&&!o(i)){var y=v.structure?v.structure:v;a[f]=l.call(this,y,a[f],f);var A=this.pointers.page.isPointerPageType(i)?n(this.pointers,this.fullJsonGetters,f):n(this.pointers,this.displayedJsonDAL,f),S=t.fullToDisplayedJson.getDisplayedJson(v,a,f,A,this.pointersMapApi,this.displayedJsonDAL.jsonData),P=e.defaults({structure:g(S.structure,{viewMode:i.type})},S),I=this.pointers.components.getParent(i);I&&(P.structure[i.type][y.id].parent=I.id),h.call(this,i,P,d),this.pointers.page.isPointerPageType(i)||this.pointers.components.isPage(i)?(this.updateDisplayedLayoutFunc(this.pointers.components.getPage(f,t.constants.VIEW_MODES.DESKTOP)),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(f,t.constants.VIEW_MODES.MOBILE)),this.anchorsAPI.createPageAnchors(f)):this.updateDisplayedLayoutFunc(i)}else this.displayedJsonDAL.set(i,t.objectUtils.cloneDeep(v))}}function l(i,n,s){var a=t.modesUtils.resolveCompActiveModesRecursive(i,n);e.assign(n,a);var o=this.pointers.general.getActiveModes(),r=this.pointers.getInnerPointer(o,s);return this.displayedJsonDAL.set(r,n),n}var d=t.componentUtils.convertNestedStructureToFlat;function g(i,n){var s=n.viewMode,a=void 0===s?"ALL":s,o=n.includeMobile,r=void 0===o||o,c=n.id,u=void 0===c?"masterPage":c;if(e.isEmpty(i))return{};i.id||(i=e.defaults({id:u},i));var p="MOBILE"!==a&&d(i,t.constants.VIEW_MODES.DESKTOP),l=r&&("DESKTOP"!==a||i.mobileComponents)&&d(i,t.constants.VIEW_MODES.MOBILE);return e.pickBy({DESKTOP:p,MOBILE:l})}function h(i,n,s){var o=this;if(this.pointers.full.components.isPage(i)){var r=this.pointers.getInnerPointer(this.pointers.page.getPagePointer(i.id),"structure");this.displayedJsonDAL.merge(r,n.structure)}else if(a.call(this,i))e.get(this.displayedJsonDAL.jsonData,s)?e.isEqual(this.displayedJsonDAL.get(i),n)||this.displayedJsonDAL.merge(i,n):this.displayedJsonDAL.set(i,n);else{var c=this.pointers.full.components.getPageOfComponent(i).id,u=t.displayedOnlyStructureUtil,p=u.getRepeaterItemId,l=u.getUniqueFlatStructureMap;e.forEach(this.pointers.components.getAllDisplayedOnlyComponents(i),(function(t){var s=p(t.id);if(s){var a=o.displayedJsonDAL.get(o.pointers.getInnerPointer(t,"layout")),r=o.displayedJsonDAL.get(o.pointers.getInnerPointer(t,"parent")),u=l(n.structure[o.pointers.components.getViewMode(i)],s,o.pointers.components.registerDisplayedOnlyComponent);u[t.id]=e.defaults({layout:a,parent:r},u[t.id]);var d=o.pointers.page.getComponentsMapPointer(c,i.type);o.displayedJsonDAL.merge(d,u)}else e.forEach(n.structure,(function(t,n){var s="DESKTOP"===n?o.pointers.components.getDesktopPointer(i):o.pointers.components.getMobilePointer(i),a=o.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(s);e(a).pickBy((function(e){var i=e.id;return!t[i]})).forEach((function(e){o.displayedJsonDAL.remove(e)}));var r=o.pointers.page.getComponentsMapPointer(c,n);o.displayedJsonDAL.merge(r,t)}))}))}}function f(e,t,i){e.components.registerDisplayedOnlyComponent(t,i)}function m(e,t){e.components.clearDisplayedOnlyComponents(t)}function v(n,s,a,o,r){var c;s&&(this.fullJson=n,this.displayedJsonDAL=s,this.fullCache=a,this.pointers=o,this.anchorsAPI=new i(s.jsonData,o,s),this.pointersMapApi=(c=o,{update:e.partial(f,c),clear:e.partial(m,c)}),this.fullJsonGetters={get:function(i){var s=a.getPath(i);return t.objectUtils.cloneDeep(e.get(n,s))}},this.updateDisplayedLayoutFunc=r)}return v.prototype={updateDisplayedJsonByPointer:function(t,i){var n,a=this.fullCache.getPath(t);if(!a)throw new Error("pointer path does not exist");if(n=a,e.isEqual(n,["pagesData"])){var o=e.get(this.fullJson,a);r.call(this,o,i)}else if(s(a))p.call(this,t,i);else{var c=e.get(this.fullJson,a);this.displayedJsonDAL.set(t,c)}},updateDisplayedJsonInPagesDataByPointer:p,updateDisplayedPagesData:r,updateDisplayedRoot:u},v}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=new t.SiteDataPrivates,n=t.layoutUtils;function s(i){var n,s=i.siteData,a=(n=s,t.DALFactory.getFullPagesData(n,e.pick(n,"pagesData")).pagesData.masterPage.structure);return t.masterPageLayoutUtils.shouldApplyMobileTightLayout(a)}function a(i,n,a,o,r){var c=i.siteData,u=function(i,n,a,o){var r=i.siteData;if(o.forceMobileStructure&&s(i))return t.layoutAnchors.createMobileTightMasterPageAnchors(n,a,o);var c=e.get(r,["displayedOnlyComponents","componentTemplateId"]);return t.layoutAnchors.createPageAnchors(n,a,o,c)}(i,n,a,o),p={PAGES_CONTAINER:[{distance:0,locked:!0,originalValue:0,fromComp:"PAGES_CONTAINER",targetComponent:"masterPage",type:"BOTTOM_PARENT"}],SITE_PAGES:[{distance:0,locked:!0,originalValue:0,fromComp:"SITE_PAGES",targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]};e.set(c,["anchorsMap",n.id,r],u),e.set(c,["anchorsMap","defaultMasterPage",r],u),e.set(c,["anchorsMap","landingPageMasterPage",r],p)}var o=function(e){return e.mechanism===t.constants.LAYOUT_MECHANISMS.MESH};function r(t,i){var n=t.getMasterPageLayoutSettings();return{headerPagesContainerLegacyGap:e.get(n,["headerToPagesGap"]),pagesContainerFooterLegacyGap:e.get(n,["pagesToFooterGap"]),useDesktopSectionsLayout:e.get(n,["useDesktopSectionsLayout"]),pushRows:o(n),forceMobileStructure:e.get(i,"forceMobileStructure",t.isMobileView()),applyGroupingAnchors:e.get(i,"applyGroupingAnchors",t.isMobileView()&&t.isViewerMode())}}function c(e,t,n){this.privatesKey=e,i.set(e,{siteData:e,displayedDAL:n,pointers:t})}return c.prototype={createPageAnchors:function(s,o){if(s){var c=i.get(this.privatesKey),u=c.siteData;if(n.getLayoutMechanism(u)!==t.constants.LAYOUT_MECHANISMS.MESH){var p=r(u,o),l=p.forceMobileStructure?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP,d=u.getPageData(s,["structure"],!0);if(d&&!e.isEmpty(d[l])){var g=u.getAllStylesFromPage("masterPage");e.merge(g,u.getAllStylesFromPage(s));var h=t.flatStructureUtil.getDeepStructureForComp(u,s,null,l);if(!!h.layout)if(h.id===t.siteConstants.MASTER_PAGE_ID)a(c,h,g,p,l);else{var f=e.get(u,["displayedOnlyComponents","componentTemplateId"]),m=t.layoutAnchors.createPageAnchors(h,g,p,f);e.set(u,["anchorsMap",h.id,l],m)}}}}},removePageOriginalValues:function(n,s){var a=i.get(this.privatesKey).siteData,o=a.getPageData(n,["structure"]),r=s?t.constants.VIEW_MODES.MOBILE:a.getViewMode();e.set(a,["originalValuesMap",o.id,r],{})},createChildrenAnchors:function(a,o,c){var u=i.get(this.privatesKey),p=u.siteData;if(n.getLayoutMechanism(p)!==t.constants.LAYOUT_MECHANISMS.MESH&&p.anchorsMap[o]){var l=r(p,c),d=o,g=l.forceMobileStructure?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP,h=function(i,n,a,o){var r=n.siteData;if(i.id===t.siteConstants.MASTER_PAGE_ID&&a.forceMobileStructure&&s(n))return t.layoutAnchors.createMobileTightSectionsAnchors(i);var c=r.getAllStylesFromPage("masterPage");e.merge(c,r.getAllStylesFromPage(o));var u=e.get(r,["displayedOnlyComponents","componentTemplateId"]);return t.layoutAnchors.createChildrenAnchors(i,c,a,u)}(t.flatStructureUtil.getDeepStructureForComp(p,o,a.id,g),u,l,o);e.assign(p.anchorsMap[d][g],h)}}},c}.apply(t,n))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";return function(e,t,i){return function(n){var s={};if(n.dataQuery){var a=e.data.getDataItem(n.dataQuery.replace("#",""),i);s.dataItem=t.get(a)}if(n.propertyQuery){var o=e.data.getPropertyItem(n.propertyQuery.replace("#",""),i);s.propertiesItem=t.get(o)}return s}}}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}n=[i(0),i(2),i(570),i(571)],void 0===(s=function(e,t,i,n){"use strict";var s=["height","width"],o=t.constants.DATA_TYPES,r=t.constants.PAGE_DATA_DATA_TYPES,c={data:"dataChange",props:"propsChange",design:"designChange"},u=["runtime","components"];function p(e){return u.concat([e])}function l(e){return p(e).concat("state")}function d(e){return p(e).concat("overrides")}function g(e){return d(e).concat("props")}function h(e){return d(e).concat("data")}function f(e,t){var i=d(e).concat("style");return t?i.concat(t):i}function m(e){return d(e).concat("design")}function v(e){return d(e).concat("layout")}function y(e){return d(e).concat("actionsBehaviors")}function A(e){return["runtime","popups",e]}function S(e){return A(e).concat("opened")}function P(e){return A(e).concat("context")}function I(t,i){return e.isEqual(i,e.pick(t,e.keys(i)))}function _(t,s,a,o,r){this._siteData=t,this._siteDataApi=s,this._pointers=o,this._displayedDal=a,this._changeListeners=[],this._isFirstSetToRuntime=!0,this.snapshotId=0,this._roots=[],this._pointersCache=new i(o,a,s.document),this._runtimeToDisplayed=new n(t,a,o,this._pointersCache,s.document),this._eventsManager=r,this._siteDataApi&&this._siteDataApi.registerDisplayedJsonUpdateCallback(this._pointersCache.reset.bind(this._pointersCache)),this._displayedDal&&!this._displayedDal.isPathExist(u)&&D.call(this),e.bindAll(this,["registerChangeListener","getCompStructure","setCompState","removeCompState","getCompState","getCompType","getCompLayout","updateCompLayout","getCompDesign","setCompDesign","getCompData","setCompData","updateCompStyle","getCompStyle","getCompConnections","getCompProps","setCompProps","getActionsAndBehaviors","addActionsAndBehaviors","removeActionsAndBehaviors","getCompName","getBoundingClientRect","getPageId","getParentId","isDisplayed","hasBeenPopupOpened","markPopupAsBeenOpened","getDynamicPageData","setPopupContext","getPopupContext","getDisplayedOnlyCompsForFullComp","getChildrenIds","getAncestorOfType","clearCompRuntimeOverrides"])}function D(){var t=e.reduce(e.get(this._siteData,u),(function(t,i,n){if(!e.has(i,"state"))return t;var s=e.pick(i,"state");return e.set(t,[n],s)}),{});this._siteData.runtime={},e.set(this._siteData,u,t),this._pointersCache.reset()}function C(t,i){return e.get(t,e.head(i))}function E(t){return e.drop(t)}function b(t,i,n){var s=C(t,i),a=E(i);return e.get(s,a,n)}function T(t,i,n){this._isFirstSetToRuntime&&!t.isFirstRenderAfterSSR()&&t.ssr.runtime&&(this._isFirstSetToRuntime=!1,this._siteDataApi.resetRuntimeData());var s=C(t,i),a=E(i);e.set(s,a,n)}function R(i){var n=!1;if(!t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(i.id)){var s=this._pointers.components.getAllDisplayedOnlyComponents(i);n=!(1===s.length&&e.isEqual(s[0],i))}return n}function w(i,n,s,o){var u=arguments,p=this;return this._siteDataApi.getActionQueue().runImmediately((function(){var l=U.call(p,n),d=b(p._siteData,s,{}),g=e.assign({},d,i);if(T.call(p,p._siteData,s,g),!l)return null;var h,f=R.call(p,l),m=L.call(p,l);if(f){var v=p._pointersCache.getCompDataItemPointer(l,o,!0);h=v?"#".concat(v.id):null}else h=p._pointersCache.getCompDataId(l,o);var y=p._siteData.getDataByQuery(h,m,r[o]);if(p._runtimeToDisplayed.updateDataItem(l,o,g,f),t.wSpy.log("setDataItem",[n,y].concat(a(u))),!I(y,i)){var A={type:c[o],value:i};t.wSpy.log("setDataItem",["notifyListeners",n,A].concat(a(u))),M.call(p,n,A,y)}})),++this.snapshotId}function M(t,i,n){e.forEach(this._changeListeners,(function(e){e(t,i,n)})),this._eventsManager&&this._eventsManager.emit("runtimeCompChange",t,i,n)}function O(e,t,i){var n=U.call(this,e);return n?this._pointersCache.getCompDataItemPointer(n,t,i):null}function k(e,t){var i=this._pointers.data.getPageIdOfData(e);return this._siteData.getDataByQuery(e.id,i,r[t])}function x(e){var t=U.call(this,e);if(!t)return null;var i=this._siteDataApi.document.getFullStructureProperty(t,"connectionQuery");if(!i)return null;var n=o.connections,s=L.call(this,t),a=this._pointers.data.getItem(n,i.replace("#",""),s),c=this._displayedDal.get(a);return this._siteData.resolveData(c,s,r[n]).items}function L(e){return this._pointers.full.components.getPageOfComponent(e).id}function N(){var t=this._siteData.getAllPossiblyRenderedRoots(),i=this._pointersCache.getAllCompIds(this._siteData.getViewMode(),t),n=!1;if(!e.isEqual(t,this._roots)){var s=e.get(this._siteData,u),a=e.difference(e.keys(s),i),o=e.get(this._siteData,u);e.isEmpty(a)||(n=!0,e.forEach(a,(function(e){delete o[e]})))}return this._roots=t,n}function B(t){var i=this._siteData.getAllPossiblyRenderedRoots(),n=!1,s=this._pointersCache.getAllCompIds(this._siteData.getViewMode(),[t]),a=e.get(this._siteData,u);return a&&!e.isEmpty(s)&&(e.forEach(s,(function(e){delete a[e]})),n=!0),this._roots=i,n}function U(e){return this._pointersCache.getCompPointer(e,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots())}return e.assign(_.prototype,{registerChangeListener:function(e){this._changeListeners.push(e)},getCompStructure:function(e){var t=U.call(this,e);return t&&this._displayedDal.get(t)},setCompState:function(t,i){var n=this.getCompState(t),s=l(t),a=C(this._siteData,s),o=E(s);if(e.set(a,o,e.assign({},n,i)),!I(n,i)){var r={type:"stateChange",value:this.getCompState(t)};M.call(this,t,r,n)}return++this.snapshotId},removeCompState:function(t){var i=l(t),n=e.get(this._siteData,e.initial(i)),s=e.last(i);e.get(n,s)&&delete n[s]},getCompState:function(e){return b(this._siteData,l(e))},getCompType:function(e){var t=U.call(this,e);if(this._displayedDal.isExist(t)){var i=this._pointers.getInnerPointer(t,"componentType");return this._displayedDal.get(i)}return this._siteDataApi.document.getFullStructureProperty(t,"componentType")},getCompLayout:function(e){b(this._siteData,v(e));var t=U.call(this,e);if(t){var i=this._pointers.getInnerPointer(t,"layout");return this._displayedDal.get(i)}},updateCompLayout:function(t,i){var n=this.getCompLayout(t),s=v(t),a=b(this._siteData,s,{}),o=e.assign({},a,i);if(T.call(this,this._siteData,s,o),this._runtimeToDisplayed.updateCompLayout(t,o),!I(n,i)){var r={type:"layoutChange",value:i};M.call(this,t,r,n)}return++this.snapshotId},getCompStyle:function(e){b(this._siteData,f(e));var t=O.call(this,e,o.theme);return t&&k.call(this,t,o.theme)},updateCompStyle:function(t,i){var n=f(t,i.id),s=b(this._siteData,n,{}),a=e.assign({},s,i);T.call(this,this._siteData,n,a),this._runtimeToDisplayed.updateCompStyle(t,a)},getCompDesign:function(e,t){b(this._siteData,m(e));var i=O.call(this,e,o.design,t);return i&&k.call(this,i,o.design)},setCompDesign:function(e,t){return w.call(this,t,e,m(e),o.design)},getCompData:function(e,t){b(this._siteData,h(e));var i=O.call(this,e,o.data,t);return i&&k.call(this,i,o.data)},setCompData:function(e,t){return w.call(this,t,e,h(e),o.data)},registerComponentEvent:function(e,t){var i={action:{type:"comp",name:t.eventType,sourceId:e},behavior:{type:"widget",targetId:t.contextId,params:{callbackId:t.callbackId,compId:e},name:"runCode"}};this.addActionsAndBehaviors(e,i)},getCompConnections:function(e){return x.call(this,e)||[]},getCompProps:function(e,t){b(this._siteData,g(e));var i=O.call(this,e,o.prop,t);return i&&k.call(this,i,o.prop)},setCompProps:function(e,t){return w.call(this,t,e,g(e),o.prop)},getActionsAndBehaviors:function(e){b(this._siteData,y(e));var t=O.call(this,e,o.behaviors),i=t&&k.call(this,t,o.behaviors);return i&&i.items||[]},addActionsAndBehaviors:function(e,t){var i=y(e),n=b(this._siteData,i,[]).concat(t);return T.call(this,this._siteData,i,n),this._runtimeToDisplayed.updateActionsAndBehaviorsItems(e,n),++this.snapshotId},removeActionsAndBehaviors:function(t,i){var n=y(t),s=b(this._siteData,n,[]);return e.remove(s,i),T.call(this,this._siteData,n,s),this._runtimeToDisplayed.updateActionsAndBehaviorsItems(t,s),++this.snapshotId},resetActionsAndBehaviors:function(e){return this._runtimeToDisplayed.resetActionsAndBehaviorsItems(e),++this.snapshotId},getCompName:function(t){var i=this.getCompConnections(t),n="WixCodeConnectionItem"===e.get(i,[0,"type"])&&i[0];return n?n.role:t},getCompPointer:U,getBoundingClientRect:function(t){var i=this._siteData.measureMap;return i?e.transform(s,(function(e,n){e[n]=i[n][t]}),{}):e.pick(this.getCompLayout(t),s)},getPageId:function(e){var t=U.call(this,e);return t?L.call(this,t):null},getParentId:function(e){var i=U.call(this,e),n=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e)?this._pointers:this._pointers.full,s=i&&n.components.getParent(i);return s&&s.id},isDisplayed:function(e){var t=U.call(this,e);return!!t&&this._displayedDal.isExist(t)},hasBeenPopupOpened:function(e){return b(this._siteData,S(e),!1)},markPopupAsBeenOpened:function(e){var t=S(e);T.call(this,this._siteData,t,!0)},getDynamicPageData:function(){return this._siteData.getDynamicPageData()},getCompDataOverrides:function(e){return b(this._siteData,h(e))},getCompDesignOverrides:function(e){return b(this._siteData,m(e))},getCompBehaviorsOverrides:function(e){return b(this._siteData,y(e))},getCompPropsOverrides:function(e){return b(this._siteData,g(e))},setPopupContext:function(e,t){var i=P(e);T.call(this,this._siteData,i,t)},getPopupContext:function(e){return b(this._siteData,P(e))},getDisplayedOnlyCompsForFullComp:function(i,n){var s=this._displayedDal,a=this._pointers.full.components.getPage(n,this._siteData.getViewMode()),o=this._pointers.full.components.getComponent(i,a),r=this._pointers.components.getAllDisplayedOnlyComponents(o);return e.reduce(r,(function(e,i){return t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(i.id)&&e.push(s.get(i)),e}),[])},getChildrenIds:function(i){var n=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(i)?this._pointers:this._pointers.full,s=U.call(this,i);return e.map(n.components.getChildren(s),"id")},getAncestorOfType:function(e,t){var i=this,n=this._pointers.full,s=U.call(this,e);return n.components.getAncestorByPredicate(s,(function(e){return i.getCompType(e.id)===t}))},clearCompRuntimeOverrides:function(t){var i,n,s,a;i=this._siteData,n=p(t),s=C(i,n),a=E(n),e.unset(s,a)},getAllCompsRuntimeData:function(){var t=b(this._siteData,u,{}),i=e.mapValues(t,"overrides.data");return e.omitBy(i,e.isNil)}}),{createRuntimeDal:function(e,t,i,n,s){var a=new _(e,t,i,n,s);return{runtimeDal:a,resetRuntime:D.bind(a),runtimeToDisplayed:a._runtimeToDisplayed,getAllCompsData:function(){return b(a._siteData,u,{})},resetNonDisplayedPages:N.bind(a),resetPage:B.bind(a)}}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(2)],void 0===(s=function(e){"use strict";var t={Image:function(e,t,i){var n={id:"imageZoomComp",key:"imageZoomComp",dataQuery:"#".concat(e.id),skin:"wysiwyg.skins.ImageZoomSkin",componentType:"wysiwyg.components.imageZoom"};return t&&(n.propertyQuery=t),i.isMobileView()?(n.skin="wysiwyg.viewer.skins.TouchMediaZoom",n.componentType="wysiwyg.viewer.components.TouchMediaZoom"):(i.isMobileDevice()||i.isTabletDevice())&&(n.skin="wysiwyg.skins.NonOptimizedImageZoomSkin"),n},PermaLink:function(e,t,i){var n=i.getRootNavigationInfo().pageAdditionalData.split("/")[0],s={id:"appPartZoomComp_".concat(n),key:"appPartZoomComp",dataQuery:"#".concat(e.id),skin:"wysiwyg.skins.AppPartZoomSkin",componentType:"wixapps.integration.components.AppPartZoom"};return t&&(s.propertyQuery=t),i.isMobileView()&&(s.skin="wysiwyg.skins.MobileAppPartZoomSkin"),s}};return{registerPageItem:function(i,n){t[i]?e.log.error("page item already registered ".concat(i)):t[i]=n},getCompStructure:function(e,i,n,s){return t[e]?t[e](i,n,s):null},clear:function(){t={}}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(3)],void 0===(s=function(e,t,i){"use strict";var n=10;function s(t,i){return e.assign({url:o(t.siteAPI.getSiteData().serviceTopology),flashVersion:9,preferFlash:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,html5PollingInterval:100,onready:function(){t.siteAPI.updateAspectGlobalData("AudioAspect",{soundManagerReady:!0})}},i||{})}function a(){n=10}function o(e){var i=e.scriptsDomainUrl;return t.stringUtils.endsWith(i,"/")||(i+="/"),"".concat(i,"services/third-party/soundmanager2/V2.97a.20150601/")}function r(e){var t=s(e,{preferFlash:!0,useHTML5Audio:!1,onready:function(){e.siteAPI.updateAspectGlobalData("AudioAspect",{soundManagerOnResetup:!1,soundManagerReady:!0})}});e.soundManager.destruct(),e.soundManager.reset().setup(t),e.soundManager.beginDelayedInit()}var c=function(e){var t=s(e);e.soundManager.setup(t),setTimeout((function(){u(e)}),n)},u=function e(i){null===i.soundManager?requirejs(["SoundManager"],(function(t){i.soundManager=t.getInstance(),e(i)})):i.siteAPI.getAspectGlobalData("AudioAspect").soundManagerReady?a():1e4>n?(c(i),n*=1.5):(a(),t.log.verbose("Failed to setup SoundManager."))};function p(t){this.siteAPI=t,this.soundManager=null,this.siteAPI.updateAspectGlobalData("AudioAspect",{nowPlayingComp:"",soundManagerReady:!1,soundManagerOnResetup:!1}),e.bindAll(this,e.functionsIn(this))}return p.prototype={loadSoundManagerAPI:function(){this.siteAPI.getSiteData().isInSSR()||window.isMockWindow||u(this)},onHTML5ErrorTryToReloadWithFlash:function(){var e;e=this,c!==r&&(e.siteAPI.updateAspectGlobalData("AudioAspect",{soundManagerOnResetup:!0,soundManagerReady:!1}),c=r,r(e))},createAudioObj:function(e){return this.siteAPI.getAspectGlobalData("AudioAspect").soundManagerReady?(e.id&&this.soundManager.getSoundById(e.id)&&this.soundManager.destroySound(e.id),this.soundManager.createSound(e)):(this.loadSoundManagerAPI(),!1)},updatePlayingComp:function(e){this.siteAPI.getAspectGlobalData("AudioAspect").soundManagerReady||this.loadSoundManagerAPI(),this.siteAPI.updateAspectGlobalData("AudioAspect",{nowPlayingComp:e.props.id})},updatePausingComp:function(){this.siteAPI.updateAspectGlobalData("AudioAspect",{nowPlayingComp:""})}},i.siteAspectsRegistry.registerSiteAspect("AudioAspect",p),p}.apply(t,n))||(e.exports=s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n,s;n=[i(0),i(2),i(186),i(200),i(201),i(92),i(199),i(125),i(206),i(198),i(190),i(60),i(187),i(72),i(191),i(193),i(189),i(205),i(203),i(192),i(196),i(575),i(576),i(208),i(627),i(630)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u,p,l,d,g,h,f,m,v,y,A,S,P){"use strict";return{SiteDataAPI:o,SiteAPI:r,RuntimeDal:c,MobileDeviceAnalyzer:t.MobileDeviceAnalyzer,renderer:i,WixSiteHeadRenderer:u,styleCollector:t.styleCollector,dataRequirementsChecker:n,pageRequests:s,requireCompCode:a,SiteAspectsSiteAPI:p,behaviorHandlersFactory:t.behaviorHandlersFactory,behaviorsService:t.behaviorsService,biEvents:l,DataAccessPointers:t.pointers.DataAccessPointers,PointersCache:t.pointers.PointersCache,pointerGeneratorsRegistry:t.pointers.pointerGeneratorsRegistry,SimpleDisplayedJsonUpdater:y,storageAPI:m,aspects:{widgetAspectPropsFetcher:h,popoverAspectPropsFetcher:f},wixCode:{componentsFetcher:A},forTests:{WixSiteReact:d},errors:g,structureInfoGetter:v,animationsService:t.animationsService,viewerCompsService:S,externalComponentsServicesRegistry:P}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(0),i(13),i(20),i(33),i(2),i(543)],void 0===(s=function(e,t,i,n,s,a,o){"use strict";var r=a.fontUtils;function c(e){var i=this,s=this.props.siteAPI.getSiteAspect("fontsLoaderAspect");if(s){var a=n.computed((function(){var n=e.get(),a=t(n).flattenDeep().uniq().value();return s.filterHandledFonts(a,i.props.requestRelayout)})),o=function(){var e=a.get();s.loadFonts(e,i.props.requestRelayout)};this.disposeLoadFonts=n.observe(a,o),o()}}function u(){var e=this.props.siteData,t=function(e,t){return e.getDataByQuery(t,e.MASTER_PAGE_ID,e.dataTypes.THEME)}(e,"THEME_DATA"),i=n.computed((function(){return r.getPageUsedFontsList(e)}));t&&t.font&&c.call(this,i)}function p(e,t){var i=window.document.getElementById("font_".concat(t));return!i||(i.removeAttribute("media"),!1)}var l=i({displayName:"WixThemeReact",setTestStyleRef:function(e){this.testStyleComp=e},getInitialState:function(){return{}},render:function(){var i=this.props,n=i.siteData,s=i.shouldRenderPage,a=n.getDataByQuery("THEME_DATA",n.MASTER_PAGE_ID,n.dataTypes.THEME);if(a&&a.font){var c=s&&function(e){var i=e.rendererModel.siteInfo.documentType,n=r.getCssUrls(i,e.serviceTopology);return e.isInSSR()||e.isClientAfterSSR()?{externalFontsStyles:e.externalStyles}:{externalFontsUrls:n=t.pickBy(n,p)}}(n),u=e.utils.createReactElement(o,c);return e.utils.createReactElement("div",{key:"wixThemeReact"},u)}},componentWillMount:function(){u.call(this)},componentWillUnmount:function(){this.disposeLoadFonts&&this.disposeLoadFonts()}});return s.observer(l)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(0),i(33),i(4)],void 0===(s=function(e,t,i,n){"use strict";var s=function(i){return t.compact(t.concat((s=i.externalFontsStyles,t.map(s,(function(t,i){return e.utils.styleNodeUtils.generateStyleNode(i,t)}))),(n=i.externalFontsUrls,t.map(n,(function(t,i){return e.utils.createReactElement("link",{rel:"stylesheet",type:"text/css",href:t,key:i})})))));var n,s};return s.propTypes={externalFontsStyles:n.object,externalFontsUrls:n.object},i.observer(s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(22)],void 0===(s=function(e,t,i){"use strict";var n=t.structuresDescription.getSiteBackgroundStructure();return Object.freeze(n),{getWixBgStructure:function(){return n},getWixBgComponent:function(e){var t={mobxObserverWrapperProps:e,structure:n,rootId:"masterPage",key:n.id,id:n.id};return i.compFactory.getCompClass("wysiwyg.viewer.components.SiteBackground",!1,e.siteAPI.getSiteData().compFactoryRuntimeState)(t)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t=["No Site Type","WixSite","UGC","Template"];var i=function(i,n){var s=i.getServiceTopologyProperty("biServerUrl")||"https://frog.wix.com/",a=i.baseVersion||"unknown",o=i.getMetaSiteId(),r=i.isPremiumDomain()?1:0,c=function(i){var n=i.rendererModel.siteInfo.documentType,s=e.indexOf(t,n);return-1!==s?s:n}(i),u=12===n?"sentPartiallyVisibleBeat":"sentMeshEligibilityBeat",p=12===n?"Partially visible":"Meshable";return"\n            if (typeof wixBiSession !== 'undefined' && !wixBiSession.".concat(u,") {\n                wixBiSession.").concat(u," = true;\n                \n                if (wixBiSession.sendBeat) {\n                    wixBiSession.sendBeat(").concat(n,", '").concat(p,"');\n                } else {\n                    var tts = '';\n                    if (performance) {\n                        if (performance.now) {\n                            tts = '&tts=' + Math.round(performance.now());\n                        }\n                        if (performance.mark) {\n                            performance.mark('").concat(p," (beat ").concat(n,")');\n                        }\n                    }\n                    (new Image()).src = '").concat(s,"bt?src=").concat(29,"&evid=").concat(3,"&pn=1&et=").concat(n,"&v=").concat(a,"&msid=").concat(o,"&vsi=' + wixBiSession.viewerSessionId +\n                        '&is_rollout=' + (wixBiSession.is_rollout ? 1 : 0) +\n                        '&url=' + encodeURIComponent(location.href.replace(/^http(s)?:\\/\\/(www\\.)?/, '')) +\n                        '&isp=").concat(r,"&st=").concat(c,"&ts=' + (Date.now() - new Date(wixBiSession.initialTimestamp)) + tts + '&iss=1&c=' + Date.now();                \n                }\n            }\n        ")};return{createPartiallyVisibleBeatScriptString:function(e){return i(e,12)},createMeshEligibilityBeatScriptString:function(e){return i(e,13)}}}.apply(t,n))||(e.exports=s)},function(e){e.exports=JSON.parse('{"NULL_SITE_ERROR":{"errorName":"NULL_SITE_ERROR","errorCode":112000,"severity":"error","params":{"p1":"errorMsg","p2":"modules"}},"SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED":{"errorCode":111020,"severity":"warning","params":{"p2":"pageId","p1":"hostname","p3":"url","p4":"responseStatusCode"}},"ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED":{"errorCode":111021,"severity":"fatal","params":{"p1":"pageId"}},"NO_SEQUENCE_TO_RUN_ANIMATIONS_ON":{"errorCode":111026,"severity":"error","params":{"p1":"sequenceId"}},"INVALID_CODE_EMBED_SCRIPT":{"errorCode":111031,"severity":"warning","params":{}},"PAGE_REQUEST_FAILED":{"errorCode":111035,"severity":"error","params":{"p1":"pageId","p2":"errorMessage","p3":"status"}},"FIXED_PAGE_REQUEST_FAILED":{"errorCode":111032,"severity":"error","params":{"p1":"errorName","p2":"failRequestUrl","p3":"status","p4":"responseText"}},"MISSING_DESKTOP_BACKGROUND_ITEM":{"errorName":"MISSING_DESKTOP_BACKGROUND_ITEM","errorCode":112001,"severity":30,"params":{"p1":"pageId"}},"MISSING_MOBILE_BACKGROUND_ITEM":{"errorName":"MISSING_MOBILE_BACKGROUND_ITEM","errorCode":112002,"severity":30,"params":{"p1":"pageId"}}}')},function(e,t,i){var n,s;n=[i(0),i(7),i(3),i(189),i(190),i(191),i(193),i(16),i(2)],void 0===(s=function(e,t,i,n,s,a,o,r,c){"use strict";var u=[];function p(t,i,n){return c.renderUtils.mapInAlphabeticalOrder(t,(function(t){var s=t[i];return e.isFunction(s)&&s.apply(t,n)||u}))}var l={mount:"mount",unmount:"unmount",urlPageChange:"urlPageChange",renderedRootsChanged:"renderedRootsChanged",addedRenderedRootsDidLayout:"addedRenderedRootsDidLayout",modeChange:"modeChange",fakeModeChange:"fakeModeChange",slideChange:"slideChange",didLayout:"didLayout",siteReady:"siteReady",willMount:"willMount",willUpdate:"willUpdate",aspectsReady:"aspectsReady",viewportChange:"viewportChange",svSessionChange:"svSessionChange",siteMetadataChange:"siteMetadataChange",onRendered:"onRendered",fullyRendered:"fullyRendered",sssrSuccess:"sssrSuccess"},d={scroll:"scroll",resize:"resize",focus:"focus",blur:"blur",message:"message",keydown:"keydown",keyup:"keyup",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",touchcancel:"touchcancel",orientationchange:"orientationchange"},g={visibilitychange:"visibilitychange",click:"click"},h=e.assign(e.clone(l),d,g);function f(){this.notifyAspects("orientationchange"),this.timeout=window.setTimeout(this.notifyAspects.bind(this,d.resize),300)}function m(){var t=this.siteAPI.getRootIdsWhichShouldBeRendered();if(!e.isEqual(t,this._previouslyRenderedRoots)){var i=e.difference(this._previouslyRenderedRoots,t),n=e.difference(t,this._previouslyRenderedRoots);this._rootsAddedAndNotYetLayouted=e(this._rootsAddedAndNotYetLayouted).concat(n).difference(i).uniq().value(),this._previouslyRenderedRoots=e.clone(t),this.notifyAspects(l.renderedRootsChanged,n,i)}}function v(){var t=this.siteAPI.getSiteData().getRootNavigationInfo(),i=this._previousNavigationInfo;if(!e.isEqual(t,i)){var n=function(e,t){return c.dynamicPagesUtils.isSamePageNavigation(e,t)&&c.dynamicPagesUtils.isInnerRouteChanged(e,t)}(t,i),s=function(t,i){var n=e.get(t,"query.lang"),s=e.get(i,"query.lang");return n!==s}(t,i);if(n||s)this.siteAPI.getSiteAspect("actionsAspect").handlePagePageNavigationCanceled(),this.notifyAspects(h.urlPageChange);this._previousNavigationInfo=t}}function y(){var t=this,s={WidgetAspect:{constructorArgs:[n.getStorage(),this.props.eventsManager,this._aspectsSiteAPI],mapStateToProps:a},popoverAspect:{constructorArgs:[n.getStorage()],mapStateToProps:o}};e.forEach(s,(function(e,n){if(!t.siteAspects[n]&&i.siteAspectsRegistry.getHostLibsAspectConstructor(n)){var s=t._aspectsSiteAPI.initHostLibsAspect(n,e.mapStateToProps,e.constructorArgs);t.siteAspects[n]=s}}))}function A(){var t=this.siteAPI.getSiteData().isClientAfterSSR(),n=this.siteAspects,s=this._aspectsSiteAPI,a=this.props.viewerPrivateServices.displayedDAL;e(i.siteAspectsRegistry.getAllAspectConstructors()).pickBy((function(e,t){return!n[t]})).forEach((function(e,i){a.setByPath(["siteAspectsData",i],{globalData:void 0,dataByCompId:{}});var o=new e(s);n[i]=o,t&&o.applySsrChanges&&o.applySsrChanges()})),y.call(this),this.notifyAspects(this.supportedEvents.aspectsReady)}Object.freeze(h);var S={didLayout:function(){if(!e.isEmpty(this._rootsAddedAndNotYetLayouted)){var t=this._rootsAddedAndNotYetLayouted;this._rootsAddedAndNotYetLayouted=[],this.notifyAspects(l.addedRenderedRootsDidLayout,t)}}};return{supportedEvents:h,getAllSiteAspects:function(){return A.call(this),this.siteAspects},getInitialState:function(){return this._aspectsSiteAPI=new s(this),this.props.viewerPrivateServices.siteAspectsSiteAPI&&this.props.viewerPrivateServices.siteAspectsSiteAPI.setSite(this),this.siteAspects=this.props.viewerPrivateServices.siteAspects||{},this._listenersOnWindow=[],this._listenersOnDocument=[],this._previouslyRenderedRoots=[],this._previousNavigationInfo={},this._rootsAddedAndNotYetLayouted=[],{}},componentWillMount:function(){A.call(this),this._aspectsSiteAPI.getSiteAspect("WidgetAspect").syncAppsState()},componentWillUpdate:function(){A.call(this),this._aspectsSiteAPI.getSiteAspect("WidgetAspect").syncAppsState()},getAspectsContainer:function(){return this.refs.siteAspectsContainer},getAspectComponentDescriptions:function(){return e.flattenDeep(p(this.siteAspects,"getComponentsToRender",[this._aspectsSiteAPI]))},getAspectsComponentStructures:function(){var t=e.flattenDeep(p(this.siteAspects,"getComponentStructures")),i=e.map(this.getAspectComponentDescriptions(),"structure");return t.concat(i)},componentDidMount:function(){var i=t(window),n=t(window.document);e.forEach(d,function(e){var t={eventName:e,listener:this.notifyAspects.bind(this,e)};this._listenersOnWindow.push(t),i.on(e,t.listener)}.bind(this)),e.forEach(g,function(e){var t={eventName:e,listener:this.notifyAspects.bind(this,e)};this._listenersOnDocument.push(t),n.on(e,t.listener)}.bind(this));var s={eventName:d.orientationchange,listener:f.bind(this)};this._listenersOnWindow.push(s),i.on(s.eventName,s.listener),this.notifyAspects("mount"),m.call(this),v.call(this)},componentDidUpdate:function(){m.call(this),v.call(this)},componentWillUnmount:function(){var i=t(window),n=t(window.document);e.forEach(this._listenersOnWindow,(function(e){i.off(e.eventName,e.listener)})),e.forEach(this._listenersOnDocument,(function(e){n.off(e.eventName,e.listener)})),window.clearTimeout(this.timeout),this._aspectsSiteAPI.onSiteUnmount(),this.notifyAspects("unmount")},notifyAspects:function(e){for(var t,i=S[e],n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];i&&i.apply(this,s),(t=this.props.eventsManager).emit.apply(t,[e].concat(s))},registerAspectToEvent:function(e,t){e===l.siteReady&&this.siteIsReady||e===l.fullyRendered&&this.siteIsFullyRendered?t():h[e]?this.props.eventsManager.on(e,t):r.log.error("this event isn't supported by site ".concat(e))},unregisterAspectFromEvent:function(e,t){this.props.eventsManager.off(e,t)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(0),i(14),i(6),i(4),i(13),i(20),i(33),i(549),i(550),i(551)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u,p){"use strict";var l=i.createElement.bind(null,c);l.type=c;var d=r.observer(a({propTypes:{siteAPI:s.shape({getSiteAspect:s.func.isRequired}).isRequired},render:function(){var t=this.props.siteAPI.getSiteAspect("fontsLoaderAspect"),i=t&&t.getReactComponents();return e.utils.createReactElement("div",null,i)}})),g=a({propTypes:{siteAPI:s.shape({setPopoversLayer:s.func.isRequired}).isRequired},render:function(){return e.utils.createReactElement("div",{id:"popoverLayer"})},componentDidMount:function(){this.props.siteAPI.setPopoversLayer(n.findDOMNode(this))}});return r.observer(a({displayName:"siteAspectsDomContainer",propTypes:{siteAPI:s.shape({setComponentRenderStart:s.func.isRequired,setComponentRenderEnd:s.func.isRequired,cancelReLayoutPending:s.func.isRequired}).isRequired,isMobileView:e.santaTypesDefinitions.isMobileView,siteWidth:e.santaTypesDefinitions.siteWidth,requestRelayout:s.func,getAspectComponentDescriptions:s.func},componentWillMount:function(){this.computedAspectComponentsDesc=o.computed((function(){return this.props.getAspectComponentDescriptions()}),{name:"computedAspectComponentsDesc",context:this}),this.props.siteAPI.setComponentRenderStart(this.constructor.displayName)},componentWillUpdate:function(){this.props.siteAPI.setComponentRenderStart(this.constructor.displayName)},componentDidMount:function(){this.props.siteAPI.setComponentRenderEnd(this.constructor.displayName)},componentDidUpdate:function(){this.props.siteAPI.setComponentRenderEnd(this.constructor.displayName)},componentWillUnmount:function(){this.props.siteAPI.cancelReLayoutPending(this.constructor.displayName)},render:function(){var i={};this.props.isMobileView&&t.assign(i,{width:this.props.siteWidth});var n=[l({key:"aspectPortal",ref:"aspectPortal",siteAPI:this.props.siteAPI,requestRelayout:this.props.requestRelayout,compDescriptions:this.computedAspectComponentsDesc.get()}),e.utils.createReactElement(u,{siteAPI:this.props.siteAPI,key:"externalScriptContainer"}),e.utils.createReactElement(p,{siteAPI:this.props.siteAPI,key:"ecomCheckoutAspectContrainer"}),e.utils.createReactElement(d,{key:"aspectContainer",siteAPI:this.props.siteAPI}),e.utils.createReactElement(g,{key:"popoverLayerContainer",siteAPI:this.props.siteAPI})];return e.utils.createReactElement("div",{className:"siteAspectsContainer",style:i},n)}}))}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(0),i(4),i(13),i(33),i(39),i(22),i(16)],void 0===(s=function(e,t,i,n,s,a,o,r){"use strict";return s.observer(n({propTypes:{siteAPI:i.object,requestRelayout:i.func,compDescriptions:i.arrayOf(i.shape({structure:i.object,props:i.object}))},displayName:"AspectSantaCompsPortal",componentDidCatch:function(e,t){r.integrations.ravenUtils.captureError(e,{tags:{aspect:!0},extra:{info:t,compDescriptions:this.props.compDescriptions}})},render:function(){var i=t.map(this.props.compDescriptions,function(i){var n=this.props.siteAPI,s=n.getSiteData().compFactoryRuntimeState,r=o.compFactory.getCompReactClass(i.structure.componentType,!1,s),c=o.compFactory.getCompClass(i.structure.componentType,!0,s),u=a.componentPropsBuilder.getCompProps(r,i.structure,n,i.pageId,null,i.props);t.assign(u,i.props,{key:u.key||i.structure.id,ref:i.structure.id});var p={compClass:r,key:"".concat(u.key,"Style"),siteAPI:n,structure:i.structure,requestRelayout:this.props.requestRelayout,invalidateCache:!0},l=o.styleNodeFactory(u.key,r);return[c(u),e.utils.createReactElement(l,p)]}.bind(this));return e.utils.createReactElement("div",{},t.flatten(i))}}))}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(0),i(4),i(13),i(33),i(18)],void 0===(s=function(e,t,i,n,s,a){"use strict";var o=a.scriptClass;return s.observer(n({displayName:"externalScriptContainer",propTypes:{siteAPI:i.shape({getAspectGlobalData:i.func.isRequired}).isRequired},getScriptComponents:function(){var i=this.props.siteAPI.getAspectGlobalData("externalScriptLoader");return t.map(i,(function(t,i){return e.utils.createReactElement(o,{key:i,ref:i,scriptData:t})}))},render:function(){return e.utils.createReactElement("div",null,this.getScriptComponents())}}))}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(4),i(13),i(33),i(552)],void 0===(s=function(e,t,i,n,s){"use strict";return n.observer(i({displayName:"ecomCheckoutAspectContrainer",propTypes:{siteAPI:t.shape({getAspectGlobalData:t.func.isRequired})},render:function(){var t=this.props.siteAPI.getAspectGlobalData("ecomCheckout");if(e.get(t,["modalOpened"])){var i=e.get(t,["src"]);return s(i)}return null}}))}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1)],void 0===(s=function(e){"use strict";return function(t){var i=e.utils.createReactElement("iframe",{src:t,id:"checkoutPageIFrame",style:{width:"900px",height:"600px",top:"50%",left:"50%",marginLeft:"-450px",marginTop:"-300px",position:"absolute"}});return e.utils.createReactElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"}},i)}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(4),i(13),i(33)],void 0===(s=function(e,t,i,n){"use strict";return n.observer(i({displayName:"extraSiteHeight",propTypes:{siteAPI:t.object.isRequired},render:function(){return 0===this.props.siteAPI.getRenderFlag("extraSiteHeight")?null:e.utils.createReactElement("div",{style:{height:this.props.siteAPI.getRenderFlag("extraSiteHeight"),position:"relative"}})}}))}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(13),i(20),i(33),i(2),i(1),i(22),i(8)],void 0===(s=function(e,t,i,n,s,a,o,r){"use strict";var c=a.utils.createReactElement;return e.memoize((function(a){return n.observer(t({displayName:"wixAdsRenderer",componentWillMount:function(){var e=a.getSiteData();a.setComponentRenderStart(s.constants.COMP_IDS.WIX_ADS),this.disposeReaction=i.reaction((function(){return{isHeaderFixedPosition:s.siteDataUtils.isHeaderFixedPosition(e),isPortrait:e.isPortrait,isWixAdsAllowed:s.siteDataUtils.isWixAdsAllowed(e),screenSize:e.getScreenSize()}}),(function(){a.registerReLayoutPending(s.constants.COMP_IDS.WIX_ADS),a.reLayoutIfPending()}),{context:this,name:"WixADS_measure_change"})},componentWillUnmount:function(){this.disposeReaction()},componentDidMount:function(){a.setComponentRenderEnd(s.constants.COMP_IDS.WIX_ADS)},componentWillReact:function(){a.setComponentRenderStart(s.constants.COMP_IDS.WIX_ADS)},componentWillUpdate:function(){a.setComponentRenderStart(s.constants.COMP_IDS.WIX_ADS)},componentDidUpdate:function(){a.setComponentRenderEnd(s.constants.COMP_IDS.WIX_ADS)},render:function(){var t=a.getSiteData(),i=t.isMobileView(),n="preview"===t.viewMode,u=s.constants.COMP_IDS.WIX_ADS,p=s.siteDataUtils.isWixAdsAllowed(t),l=s.siteDataUtils.isHeaderFixedPosition(t),d=s.wixUserApi.getLanguageFromSiteData(t),g=s.wixUserApi.getLangDirection(d),h=t.getMetaSiteId();if(!t.shouldShowWixAds())return null;var f={brandName:e.get(t,"rendererModel.siteOwnerCoBranding.accountName"),brandSiteUrl:e.get(t,"rendererModel.siteOwnerCoBranding.websiteUrl"),brandLogoUrl:e.get(t,"rendererModel.siteOwnerCoBranding.accountLogo")},m=f.brandName&&f.brandLogoUrl,v=m?"wysiwyg.viewer.components.WixCoBrandingFreemiumBanner":"wysiwyg.viewer.components.WixFreemiumBanner2",y=o.compFactory.getCompReactClass(v,!1,t.compFactoryRuntimeState),A={wixAdsId:u,isMobileView:i,isPreview:n,isWixAdsAllowed:p,metaSiteId:h,isHeaderFixedPosition:l,translations:s.translationsLoader.getTranslationAllKeys("Wix_Ads",d),isWixAdsForOneApp:r.isOpen("oneAppWixAds",t),isWixAdsForTopBarRedesign:r.isOpen("se_topBarRedesign",t),reportBI:a.reportBI,overlay:"true"===e.get(t,"currentUrl.query.isqa")&&"true"===e.get(t,"currentUrl.query.wixAdsOverlay"),direction:g},S=m?e.assign({},A,f):A;return c(y,S)}}))}))}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(16),i(1),i(0),i(14),i(4),i(13),i(6),i(39),i(188),i(194)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u){"use strict";var p=n.createElement.bind(null,c);p.type=c;var l=n.createElement.bind(null,u);l.type=u;var d=function(e,t,n,s){return i.assign({margin:"0 auto",width:t?n:"auto"},!e&&{minWidth:n,minHeight:s})};return a({displayName:"WixPopupRoot",propTypes:{siteAPI:s.shape({getSiteAspect:s.func.isRequired,getRuntimeDal:s.func.isRequired,getLayoutMechanism:s.func.isRequired,getRenderFlag:s.func.isRequired}).isRequired,viewerPrivateServices:s.shape({pointers:s.object.isRequired,displayedDAL:s.object.isRequired,siteDataAPI:s.object.isRequired}).isRequired,mobxObserverWrapperProps:s.object,siteData:s.object.isRequired,currentPopupId:s.string,measureMap:s.object},getInitialState:function(){return{activePopupId:this.props.currentPopupId,activePopupKey:1,animating:!1}},shouldComponentUpdate:function(e,t){if(!e.currentPopupId&&this.state.activePopupId&&!this.state.animating){var n=this.props.siteAPI.getSiteAspect("actionsAspect"),s=i.keys(this.refs[this.state.activePopupId].refs);this.setState({animating:!0});var a=!1;return n.registerComponentsExit(s,function(){e.currentPopupId||this.setState({activePopupId:null,animating:!1}),n.handleNavigationComplete(),a=!0}.bind(this)),a}return!(t.animating&&!e.currentPopupId)},componentWillReceiveProps:function(e){e.currentPopupId!==this.state.activePopupId&&this.setState({activePopupId:e.currentPopupId,activePopupKey:(this.state.activePopupKey||0)+1,animating:!1})},componentDidUpdate:function(){var e=this.state.activePopupId;e&&"preview"===this.props.siteAPI.getRenderFlag("componentViewMode")&&this.props.siteAPI.getRuntimeDal().markPopupAsBeenOpened(e)},render:function(){var i=this.props.siteData,n=this.props.siteAPI,s=this.state.activePopupId,a=i.isMobileView(),o=n.getLayoutMechanism()===e.constants.LAYOUT_MECHANISMS.MESH;if(s){var u=r.componentPropsBuilder.getRootProps(c,this.props.currentPopupId,this.props.siteAPI,this.props.viewerPrivateServices,this.props.measureMap);u.mobxObserverWrapperProps=this.props.mobxObserverWrapperProps,u.key=this.state.activePopupKey+(a?"_mobile":"_desktop");var g=[p(u),l({key:"blockingPopupLayer",siteAPI:this.props.siteAPI,layerName:"blockingPopupLayer"})],h=t.utils.createReactElement("div",{id:"POPUPS_WRAPPER",className:"POPUPS_WRAPPER",key:"POPUPS_WRAPPER",style:d(o,a,i.getSiteWidth(),i.getScreenHeight()),children:g});return t.utils.createReactElement("div",{id:"POPUPS_ROOT",className:a?"POPUPS_ROOT mobile":"POPUPS_ROOT",key:"POPUPS_ROOT",style:{overflow:this.props.siteAPI.getRenderFlag("allowSiteOverflow")?null:"hidden"},children:[h]})}return null},componentDidMount:function(){var e=o.findDOMNode(this);e&&e.focus()}})}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(195),i(16)],void 0===(s=function(e,t,i,n){"use strict";function s(e,i,n){var s=this.props.siteData,a=t.linkRenderer.isExternalLink(s,n),o=t.linkRenderer.isEmailLink(n),c="_self"===i.getAttribute("target"),u=this.siteAPI.getRenderRealtimeConfigItem("previewTooltipCallback");return!this.siteAPI.getRenderFlag("isExternalNavigationAllowed")&&u&&(a&&c||o)?(u(e.target.getBoundingClientRect(),"text_editor_inactive_link_on_preview"),!0):!!(this.siteAPI.getCustomClickOccurred()&&a&&c)||r.call(this,n)}function a(i,n){var s=function(e,i,n){var s=e.getAttribute("data-no-physical-url")||i;return t.wixUrlParser.parseUrl(n,s)}(i,n,this.props.siteData);if(!s||"_blank"===i.getAttribute("target"))return!1;!function(t,i){e.assign(t,{pageItemAdditionalData:i.getAttribute("data-page-item-context"),anchorData:i.getAttribute("data-anchor")})}(s,i);var a=function(e){return!e.getAttribute("data-no-physical-url")}(i),o=function(e){return!!e.getAttribute("data-keep-roots")}(i),r=this.siteAPI.getSiteData().getPrimaryPageId();return this.siteAPI.getCustomClickOccurred()&&s&&s.pageId&&s.pageId!==r||this.handleNavigation(s,n,a,o),!0}function o(e){var t=this.props.siteData.serviceTopology,i=n.urlUtils.parseUrl(t.premiumServerUrl).hostname;return n.urlUtils.parseUrl(e).hostname===i}function r(e){var t=this.siteAPI.getRenderRealtimeConfigItem("premiumNavigationHandler");return!(!t||!o.call(this,e))&&t()}function c(e){return function e(t,i){return t&&t.tagName?t.tagName.toLowerCase()===i?t:e(t.parentNode,i):null}(e.target,"a")}function u(e,o){var r,c,u=o.getAttribute("href");return r=this.siteAPI,(c=o).getAttribute("data-type")&&r.reportBI(i.CLICK_TO_ACTION,{field_type:c.getAttribute("data-type"),data:n.logger.sanitizePIIForBi(c.getAttribute("data-content")),input_type:c.getAttribute("data-auto-recognition")?"auto_recognized":"user_input"}),function(e,i){if(e.getAttribute("data-mobile")){var n=t.stringUtils.isTrue(e.getAttribute("data-mobile"));i.setMobileView(n),t.mobileViewportFixer.fixViewportTag(i.getSiteData())}}(o,this.siteAPI),s.call(this,e,o,u)||a.call(this,o,u)}return{clickHandler:function(e){var t=c(e),i=!!t&&u.call(this,e,t);return this.siteAPI.isSelectionSharerVisible()&&this.siteAPI.hideSelectionSharer(),this.siteAPI.resetCustomClickOccurred(),!i||function(e){return e.stopPropagation(),e.preventDefault(),!1}(e)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";function i(e,i){if(i){var n=e.getRootIdsWhichShouldBeRendered();return!t.componentUtils.shouldBeRendered(n,i)}}function n(e,t){return!i(e,t)}function s(t,n){return e(n).omit("").keys().pickBy((function(e){return!i(t,e)})).value()}function a(t){return e.get(t,["compRefs","SITE_PAGES","refs"])}return{getAllRenderedRootIds:function(){var t=this.getMasterPage();if(!t)return[];var i=this.props.siteData,o=this.siteAPI,r=a(t);if(!r)return[];var c,u=(c=this,e.get(c,["refs","popupRoot","refs"],{})),p=i.getPrimaryPageId(),l=i.getCurrentPopupId();return!n(o,p)||l&&!n(o,l)?e.flatten(["masterPage",s(o,r),s(o,u)]):e.compact(["masterPage",p,l])},getRootIdsWhichShouldBeRendered:function(){var t=this.props.siteData;if(!this.getMasterPage()){var i=t.getExistingRootNavigationInfo(t.getCurrentUrlPageId()),n=this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(i),s=this.siteAPI.getSiteAspect("siteMembers").getCustomSignupPageId();if(!n)return s?[s]:[]}return e.compact(["masterPage",t.getPrimaryPageId(),t.getCurrentPopupId()])},getComponentsByPageId:function(e){var t=this.getPageById(e);return t&&t.compRefs},getComponentByPageAndCompId:function(e,t){var i=this.getComponentsByPageId(e);return i&&i[t]},getPageRefs:a}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(1),i(0),i(4),i(13),i(2)],void 0===(s=function(e,t,i,n,s){"use strict";var a=s.wixappsClassicsLogger,o=s.socialShareHandler;return n({displayName:"selectionSharer",propTypes:{siteAPI:i.shape({getSiteData:i.func.isRequired,openPopup:i.func.isRequired}).isRequired},getInitialState:function(){return{visible:!1,position:null,shareInfo:null}},sharePostWrapper:function(e){var t=this.state.shareInfo;t.url=e,o.handleShareRequest(this.props.siteAPI,{url:e,service:t.service,title:t.title,storeId:t.storeId,postId:t.postId,hashTags:t.hashTags||"",imageUrl:t.imgSrc,addDeepLinkParam:!1,description:t.description})},show:function(e,t){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_OPENED,{post_id:t.postId,site_id:t.siteId}),this.setState({visible:!0,position:e,shareInfo:t})},hide:function(){this.setState({visible:!1,position:null,shareInfo:null})},isVisible:function(){return this.state.visible},twitterClickHandler:function(){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_CLICKED,{type:"twitter",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="twitter",e.title=e.description,o.shortenURL(e.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,e.url))},facebookClickHandler:function(){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_CLICKED,{type:"facebook",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="facebook",o.shortenURL(e.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,e.url))},mailClickHandler:function(){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_CLICKED,{type:"mail",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="email",e.description="".concat(e.description,"\r\n( ").concat(e.url," )"),o.handleShareRequest(this.props.siteAPI,e)},render:function(){if(this.state.visible){var t={position:"absolute",left:"".concat(this.state.position.x,"px"),top:"".concat(this.state.position.y,"px")},i=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/facebook.svg"),n=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/twitter.svg"),a=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/mail.svg");return e.utils.createReactElement("div",{className:"selectionSharerContainer",style:t},[e.utils.createReactElement("img",{key:"selection-sharer-facebook-img",className:"selectionSharerOption",src:i,onClick:this.facebookClickHandler}),e.utils.createReactElement("div",{key:"selection-sharer-first-separator",className:"selectionSharerVerticalSeparator"}),e.utils.createReactElement("img",{key:"selection-sharer-twitter-img",className:"selectionSharerOption",src:n,onClick:this.twitterClickHandler}),e.utils.createReactElement("div",{key:"selection-sharer-second-separator",className:"selectionSharerVerticalSeparator"}),e.utils.createReactElement("img",{key:"selection-sharer-mail-img",className:"selectionSharerOption",src:a,onClick:this.mailClickHandler})])}return null}})}.apply(t,n))||(e.exports=s)},function(e,t){e.exports=I},function(e,t,i){var n,s;n=[i(0),i(7),i(2),i(60)],void 0===(s=function(e,t,i,n){"use strict";var s=i.loggingUtils.logger;if("undefined"==typeof window)return{init:e.noop,send:e.noop};var a=window.queryUtil&&window.queryUtil.isParameterTrue("isEdited"),o=window.performance||{};function r(t){var i=[100,200,300,400,500,1e3,2e3,3e3];function a(e){return"_".concat(e,"k")}var r="_over".concat(e.last(i),"k");function c(t){var n=i.map(a).concat([r]);return e.zipObject(n,e.times(n.length,t))}var u=e(window.document.getElementsByTagName("img")).filter((function(t){return e.startsWith(t.src,window.serviceTopology.staticMediaUrl)})).reduce((function(t,n){if(n.complete){var s=function(t,i){var n={url:t.src,hadError:!1,width:t.width,height:t.height,size:t.width*t.height},s=i?i.startTime:0,a=i?i.duration:0;return e.defaults(n,{hadError:!i,start:Math.round(s),end:Math.round(s+a),speed:Math.round(n.size/(a+.01)*100)/100}),n}(n,o.getEntriesByName(n.src)[0]);if(s.hadError)t.errors++;else{var c=(u=s,(p=e.findLastIndex(i,(function(e){return 1e3*e<u.size}))+1)<i.length?a(i[p]):r);t.imagesBySize[c]++,t.imagesSamples[c].length<3&&t.imagesSamples[c].push(s)}}else t.loading++;var u,p;return t}),{loading:0,imagesBySize:c(e.constant(0)),imagesSamples:c((function(){return[]})),errors:0});s.reportBI(t,n.LOAD_IMAGES_DATA,{imagePerf:JSON.stringify(u)})}function c(t){var a=window.serviceTopology?window.serviceTopology.staticMediaUrl:"nothing";function r(t){var i=function(e){var t=e.name.replace(a,""),i=t.match(/\.([^/]+).+w_(\d+),h_(\d+),/);if(i){var n=Number(i[2]),s=Number(i[3]);return{url:t,format:i[1],width:n,height:s,size:n*s}}return{}}(t),n={start:Math.round(t.startTime),end:Math.round(t.startTime+t.duration),ttfb:Math.round(t.responseStart-t.requestStart),dns:Math.round(t.domainLookupEnd-t.domainLookupStart),ssl:t.secureConnectionStart?Math.round(t.connectEnd-t.secureConnectionStart):0,speed:t.duration>0?Math.round(i.size/t.duration):0,fileSize:t.fileSize,kbps:t.duration>0?Math.round(1e3*t.fileSize/t.duration):0};return e.assign({},i,n)}var c=e(o.getEntriesByType("resource")).toArray().filter((function(t){return t.duration>25&&e.startsWith(t.name,a)})).value().map((function(t){return new Promise((function(n){function s(i){n(e.assign(t,{fileSize:Math.round(i/1024)}))}var a=t.transferSize||t.encodedBodySize;a?s(a):i.ajaxLibrary.ajax({type:"HEAD",url:t.name,success:function(e,t,i){s(i.getResponseHeader("Content-Length")||0)},error:function(){s(0)}})}))}));Promise.all(c).then((function(i){var a=e(i).filter((function(e){return e.fileSize>5})).sortBy("fileSize").takeRight(10).map(r).filter((function(e){return e.kbps<=9216})).value();if(a.length){var o=e.reduce(a,(function(e,t){return{size:e.size+t.fileSize,duration:e.duration+t.end-t.start,ttfb:e.ttfb+t.ttfb}}),{size:0,duration:0,ttfb:0});s.reportBI(t,n.IMAGES_DOWNLOAD,{imagePerf:JSON.stringify(a),kbps:Math.round(1e3*o.size/o.duration),ttfb:Math.round(o.ttfb/a.length)})}}),e.noop)}function u(t,i){if(t.getEntriesByType){var a=e(t.getEntriesByType("resource")).filter({initiatorType:"css"}).map((function(e){var t=e.name;return/\/([^/.]*)\.(woff2|woff|ttf|svg|eot)(?:\??#[\w\-\d]*)?$/.exec(t)})).compact().map((function(e){return{name:e[1],format:e[2]}})).value(),o=a.filter((function(e){return"file"===e.name})).length,r=a.length-o;s.reportBI(i,n.FONTS_DOWNLOADED,{wixFonts:r,userFonts:o})}}return{init:function(i){a||(s.shouldSendReport(i,n.USER_INTERACTION)&&setTimeout((function(){!function(i){if(t){var a=function(o){t(window).off(".bi"),a=e.noop,s.reportBI(i,n.USER_INTERACTION,{type:o})},o=0,r=0,c=0;t(window).on({"keydown.bi":function(){++o>2&&a("key")},"mousemove.bi":function(){++r>44&&a("mouse")},"scroll.bi":function(){++c>11&&a("scroll")}})}}(i)}),300),s.shouldSendReport(i)&&o.getEntriesByName&&setTimeout((function(){r(i),c(i),u(o,i)}),10500))},reportFontsLoaded:u}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=t.constants.PAGE_DATA_DATA_TYPES;function n(n,s){var a=n.connectionQuery,o=t.dataResolver.getSinglePageDataByQuery(s,i.connections,a);if(o){var r=e.find(o.items,{type:"WixCodeConnectionItem"});return r&&r.role}}function s(n,s){var a=e.cloneDeep(n),o=a.dataQuery,r=a.propertyQuery,c=a.designQuery,u=a.styleId;return o&&(a.data=t.dataResolver.getSinglePageDataByQuery(s,i.data,o)),r&&(a.props=t.dataResolver.getSinglePageDataByQuery(s,i.props,r)),c&&(a.design=t.dataResolver.getSinglePageDataByQuery(s,i.design,c)),u&&(a.style=t.dataResolver.getSinglePageDataByQuery(s,i.style,u)),delete a.dataQuery,delete a.propertyQuery,delete a.connectionQuery,delete a.designQuery,delete a.styleId,a}return{buildGhostStructure:function(i){for(var o={},r=a(e.get(i,["structure","components"],[]));r.length>0;){var c=r.shift(),u=n(c,i);u&&(c.id=t.guidUtils.getUniqueId("ghost","-"),o[u]=s(c,i),r.push.apply(r,a(c.components||[])),c.components&&(o[u].children=e(c.components).map((function(e){return n(e,i)})).compact().value(),delete o[u].components))}return o}}}.apply(t,n))||(e.exports=s)},function(e){e.exports=JSON.parse('{"santa-data-fixer":"1.1583.0"}')},function(e,t,i){var n;void 0===(n=function(){"use strict";return{SITE_ASSETS_SERVER:{FIXED_PAGE_JASON_PATH:"/fixedData"}}}.apply(t,[]))||(e.exports=n)},function(e,t){e.exports=_},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=t.fontUtils;function n(e){var t=e.rendererModel.siteInfo.documentType;return i.getCssUrls(t,e.serviceTopology)}function s(e,t,n){var s=i.getBrowserFontSupport(e.browser,e.os);return i.getStyleWithSpecificFontFaces(e.serviceTopology,n,s)||t}return{getRequests:function(t){var i=[],a=n(t);return e.forEach(a,(function(n,a){e.startsWith(n,"//")&&(n="https:".concat(n)),i.push({urls:[s(t,n,a)],destination:["externalStyles",a],dataType:"text",onUrlRequestFailure:t.isInSSR()?function(e){throw new Error("Failed fetching external style: ".concat(e))}:void 0,isValidResponse:function(t){return e.isString(t)&&!e.isEmpty(t)}})})),i},getStylesIds:function(t){return e.keys(n(t))},getBrowserSpecificUrl:s}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(2),i(0)],void 0===(s=function(e,t){"use strict";var i,n,s,a,o,r,c,u,p,l,d="POST",g="GET",h="/_api/wix-sm-webapp/member/login",f="/_api/wix-sm-webapp/member/register",m="/_api/wix-sm-webapp/v1/auth/register",v="/_api/wix-sm-webapp/member/apply",y="/_api/wix-sm-webapp/member/sendForgotPasswordMail",A="/_api/wix-sm-webapp/member/changePasswordWithMailToken",S="/_api/wix-sm-webapp/member",P="/_api/wix-sm-webapp/social/token/handle",I="/_api/wix-sm-webapp/tokens/verify",_="/api/wix-sm/v1/authorize",D="/_api/wix-sm-webapp/tokens/logout",C="/_api/wix-sm-webapp/tokens/email/resend",E={};function b(e,i,n,s){if(t.get(n,"errorCode"))i(n.errorCode);else{s&&(n={payload:t.merge({},{sessionToken:t.get(n,["session","token"]),status:t.get(n,["member","status"]),siteMemberDto:{id:t.get(n,["member","id"])},raw:t.cloneDeep(n)})});var a,o,r=(a=n.payload,o=t.get(a,"sessionToken")||t.get(a,["smSession","sessionToken"])||"",t.get(o.match(/^JWS\.(.+)/),0));r?R(r,e,i,n.payload):e(n)}}function T(e,o,r,c,u,p,l,d){var g=t.merge(o||{},{collectionId:n,metaSiteId:a});p&&(t.merge(g,{svSession:p,appUrl:i}),l&&(g.initiator=l)),w({type:r,url:s+e,data:g,asForm:!0},c,u,d)}function R(e,i,n,s){w({type:"POST",url:o,data:{token:e},asForm:!0},(function(e){var n=t.merge({},e,{httpOnlySession:!0,payload:s});i(n)}),n)}function w(i,n,s,a){var o={type:i.type,url:i.url,data:i.data,asForm:i.asForm,dataType:"json",jsonp:!1,success:function(e){b(n,s,e,i.isPlatformizedEndpoint)},error:s};o.headers={"x-wix-site-revision":l},i.data&&t.assign(o.headers,{accept:"application/json","Content-Type":i.asForm?"application/x-www-form-urlencoded":"application/json"}),i.headers&&t.assign(o.headers,i.headers),!0===a&&(o=t.merge(o,{crossDomain:!0,xhrFields:{withCredentials:!0}})),e.ajaxLibrary.ajax(o)}return E.initializeData=function(e){a=e.getMetaSiteId(),l=e.getSiteRevision();var t=e.getClientSpecMapEntriesByType("sitemembers")[0],d=e.getPublicBaseUrl();n=t&&t.smcollectionId,s="//".concat(e.currentUrl.host),o="//".concat(e.currentUrl.host).concat(I,"/").concat(a,"/").concat(e.siteId),r="//".concat(e.currentUrl.host).concat(D,"/").concat(a),c="//".concat(e.currentUrl.host).concat(C),i=e.currentUrl.full,u="https://".concat(e.currentUrl.host).concat(m),p="".concat(d).concat(_,"/").concat(e.siteId,"/pages")},E.login=function(e,t,i,n,s){T(h,e,d,t,i,n,s)},E.register=function(e,t,i,n,s){T(f,e,d,t,i,n,s)},E.apply=function(e,t,i,n,s){T(v,e,d,t,i,n,s)},E.sendForgotPasswordMail=function(e,t,i){T(y,{email:e.email,returnUrl:e.homePageUrl,lang:e.lang},d,t,i)},E.resetMemberPassword=function(e,t,i){T(A,e,d,t,i)},E.getMemberDetails=function(e,t,i,n){e=e||"",T("".concat(S,"/").concat(e),null,g,t,i,null,null,n)},E.handleOauthToken=function(t,i,o){!function(t,i,o){var r="?".concat(e.urlUtils.toQueryString({collectionId:n,metaSiteId:a}));w({type:"POST",url:s+P+r,data:t},i,o)}(o,t,i)},E.logout=function(e,t){w({type:"POST",url:r,asForm:!0},e,t)},E.resendEmailVerification=function(e,t,i){w({type:"GET",url:"".concat(c,"/").concat(e),asForm:!1},t,i)},E.authByToken=function(e,t,i){R(e,t,i,{})},E.customRegister=function(e,t,i){var n=e.instance;w({type:d,url:u,data:{email:e.email,password:e.password,contactInfo:e.contactInfo},headers:{Authorization:n},isPlatformizedEndpoint:!0},t,i)},E.getAuthorizedPages=function(e,t){w({type:g,url:p,asForm:!1,isPlatformizedEndpoint:!0},e,t)},E}.apply(t,n))||(e.exports=s)},function(e,t){e.exports=D},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";function i(i,n){return e.compact([t.svg.createSvgFetchRequest(i.serviceTopology.mediaRootUrl,i,e.get(n,["data","svgId"]))])}return{"wixui.RatingsDisplay":i,"wixui.RatingsInput":i,"wixui.StylableButton":i}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";function i(i,n,s){var a=function(t,i,n,s){var a=t.cache.getBoundCacheInstance(!0),o=t.pointers.full.components.getPage(i,s),r=o&&t.pointers.full.components.getComponent(n,o),c=r&&a.getPath(r);return c?e.get(t.fullPagesData,c):null}(i,n,t.displayedOnlyStructureUtil.getRepeaterTemplateId(s),i.siteData.getViewMode());return t.dataUtils.getAllCompsInStructure(a,i.siteData.isMobileView())}function n(t,n,s){var a=t.siteDataAPI.runtime,o=i(t,n,s);return e.reduce(o,(function(t,i){var s=a.getDisplayedOnlyCompsForFullComp(i.id,n);return e.forEach(s,(function(e){t[e.id]=e})),t[i.id]=i,t}),{})}function s(t,i,n){var s=t.cache.getBoundCacheInstance(!0).getPath(t.pointers.getInnerPointer(i,n));return s?e.get(t.fullPagesData,s):null}function a(t,i){var n=t.cache.getBoundCacheInstance(!0).getPath(i);return n?e.get(t.fullPagesData,n):null}function o(e){return e.fullPagesData.pagesData}return function(t){var r={getAllCompsUnderRoot:e.partial(i,t),getFullAndDisplayedOnlyCompsUnderRoot:e.partial(n,t),getFullStructureProperty:e.partial(s,t),getFullDataItem:e.partial(a,t)};return(t.siteData.isInSSR()||window.isMockWindow)&&(r.getFullPagesData=e.partial(o,t)),r}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE;function n(e){return(this._pointers.full.components.getPageOfComponent(e)||this._pointers.components.getPageOfComponent(e)).id}function s(i){var n=this._pointers.components.getAllDisplayedOnlyComponents(i);return e.filter(n,(function(e){return t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id)}))}function a(t){return e.reduce(t,function(t,i){var n=s.call(this,i);return e.forEach(n,(function(e){t.push(e)})),t.push(i),t}.bind(this),[])}function o(t,i){this._roots=i,this._viewMode=t,this._compPointers=e(i).flatMap(function(e){var i=this._pointers.full.components.getPage(e,t);if(!i)return[];var n=this._pointers.full.components.getChildrenRecursively(i),s=a.call(this,n);return[i].concat(s)}.bind(this)).keyBy("id").value()}function r(i){if(t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(i.id))return!1;var n=this._pointers.components.getAllDisplayedOnlyComponents(i);return!e.isEqual(n,[i])}function c(e,t,i){this._compPointers={},this._pointers=e,this._displayedDal=t,this._documentAPI=i,this._roots=[],this._viewMode=null}return c.prototype={reset:function(){this._compPointers={}},isEmpty:function(){return e.isEmpty(this._compPointers)},getAllCompIds:function(t,i){return e.isEqual(this._roots,i)&&this._viewMode===t||o.call(this,t,i),e.keys(this._compPointers)},getCompPointer:function(e,t,i){if(!e)return null;var n=this._compPointers[e];return n&&(this._displayedDal.isExist(n)||r.call(this,n))?n:(o.call(this,t,i),this._compPointers[e])},getCompDataId:function(e,t){if(!e)return null;var n=this._pointers.getInnerPointer(e,i[t]);return this._displayedDal.get(n)},getCompDataItemPointer:function(e,t,s){if(!e)return null;var a,o;s?a=this._documentAPI.getFullStructureProperty(e,i[t]):(o=this._pointers.getInnerPointer(e,i[t]),a=this._displayedDal.get(o));var r=null;return a&&(r=this._pointers.data.getItem(t,a.replace("#",""),n.call(this,e))),r&&this._displayedDal.isExist(r)?r:null}},c}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=t.constants.DATA_TYPES,n=t.constants.PAGE_DATA_DATA_TYPES,s=t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE,a={props:"props",data:"data",design:"design",layout:"layout",style:"style",actionsBehaviors:"actionsBehaviors",resetActionsBehaviors:"resetActionsBehaviors",dynamicBehaviorsCounter:"dynamicBehaviorsCounter"},o=t.dataResolver;function r(e){return this._pointers.full.components.getPageOfComponent(e).id}function c(t,i,n,a,o){o=o||e.uniqueId("_runtime_");var c=this._pointers.getInnerPointer(t,s[i]);this._displayedDal.set(c,"#".concat(o));var u=this._pointers.data.getItem(i,o,r.call(this,t));return a?this._displayedDal.set(u,n):this._displayedDal.set(u,e.assign({id:o},n)),u}function u(t){var n=this._pointers.getInnerPointer(t,s[i.theme]),a=this._displayedDal.get(n),o=a+e.uniqueId("_runtime_"),r=this._pointers.data.getItem(i.theme,a),c=this._displayedDal.get(r),u=e.defaults({id:o},c),p=this._pointers.data.getItem(i.theme,o,"masterPage");this._displayedDal.set(n,o),this._displayedDal.set(p,u)}function p(t,i){var n=o.getDataRefsForDataItems(i,t.type);if(n){var s=e.keys(n),a=e.pick(t,s),r=e.filter(a,(function(t){return t&&!e.includes(t.id,"_runtime_")}));return!e.isEmpty(r)}return!1}function l(t,i,n){if("type"===n&&!t){if(i)return!0;throw new Error("data items have to be passed with a type")}return"id"===n&&!e.includes(t,"_runtime_")}function d(t,n,s){if(n.type)return n;var a=null;if(s&&s.type)a=e.assign({},n,{type:s.type});else{if(t!==i.prop)throw new Error("data items have to be passed with a type");a=e.assign({},n,{type:"DefaultProperties"})}return a}function g(i,s,a,r){var c=this._pointers.data.getPageIdOfData(a),u=this._pointers.components.getPageOfComponent(r)&&this._pointers.components.getPageOfComponent(r).id,g=n[s],h=this._siteData.getDataByQuery(a.id,c,g);if(t.objectUtils.isSubset(h,i))return a;p.call(this,h,g)&&(h=o.cloneDataItemWithNewRefIdsRecursively(h,g,"_runtime_",this._siteData.getClonedDataItemsIdsMap(r.id)));var f=d(s,i,h),m=t.objectUtils.cloneAndConditionalMergeOfFields(f,h,l),v=o.getFlatMapOfNestedItem(m,g);return v=e.mapValues(v,(function(e){return t.objectUtils.cloneDeep(e)})),this._displayedDal.merge(a,v[a.id]),delete v[a.id],e.forOwn(v,function(t,i){var n=function(t,i,n,s,a,o){return e.find([n,s],(function(e){var n=t.data.getItem(o,a,e);return i.isExist(n)}))||s}(this._pointers,this._displayedDal,u,c,i,s),a=this._pointers.data.getItem(s,i,n);this._pointers.data.validatePath(a),this._displayedDal.set(a,t)}.bind(this)),a}function h(t,n,o,r){var p=this._compPointersCache.getCompDataItemPointer(o,t,r);if(p||(p=c.call(this,o,t)),n[p.id]&&t===i.theme){var l=this._pointers.getInnerPointer(o,s[i.theme]),d=this._displayedDal.get(l);if(!d)return null;d&&!e.includes(d,"_runtime_")&&u.call(this,o);var h=this._displayedDal.get(p);return n=n[p.id],e.forOwn(n,(function(t,i){e.defaultsDeep(n[i],h[i])})),f[a.style].call(this,n,o)}return g.call(this,n,t,p,o)}var f={};function m(e,t,i,n,s){this._pointers=i,this._displayedDal=t,this._siteData=e,this._compPointersCache=n,this._documentAPI=s}function v(t,i){var n=null;return n=e.isPlainObject(t)?t:this._compPointersCache.getCompPointer(t,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots()),i||n&&this._displayedDal.isExist(n)?n:null}return f[a.dynamicBehaviorsCounter]=e.noop,f[a.data]=e.partial(h,i.data),f[a.style]=e.partial(h,i.theme),f[a.design]=e.partial(h,i.design),f[a.props]=function(n,s,a){var o=i.prop,r=this._compPointersCache.getCompDataItemPointer(s,o,a),u=t.displayedOnlyStructureUtil.isRepeatedComponent(s.id),p=r&&t.displayedOnlyStructureUtil.isRepeatedComponent(r.id),l=u&&!p;if(!r||l){var g=t.displayedOnlyStructureUtil.getRepeaterItemId(s.id),h=t.displayedOnlyStructureUtil.getRepeaterTemplateId(s.id),f=r?r.id:e.uniqueId("".concat(h,"_props")),m=l&&t.displayedOnlyStructureUtil.getUniqueDisplayedId(f,g);r=l?c.call(this,s,o,{},!1,m):c.call(this,s,o,{},!0)}var v=e.defaults({id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(s.id)},s),y=this._compPointersCache.getCompDataItemPointer(v,o,!0),A=y&&this._documentAPI.getFullDataItem(y),S=d(o,n,A),P=e.defaults({},S,A);return t.objectUtils.isSubset(this._displayedDal.get(r),P)||this._displayedDal.merge(r,P),r},f[a.actionsBehaviors]=function(n,s){var a=i.behaviors,o=this._compPointersCache.getCompDataItemPointer(s,a),r=t.displayedOnlyStructureUtil.isRepeatedComponent(s.id),u=o&&t.displayedOnlyStructureUtil.isRepeatedComponent(o.id),p=r&&!u;if(!o||p){var l=t.displayedOnlyStructureUtil.getRepeaterItemId(s.id),d=t.displayedOnlyStructureUtil.getRepeaterTemplateId(s.id),g=o?o.id:e.uniqueId("".concat(d,"_behavior")),h=p&&t.displayedOnlyStructureUtil.getUniqueDisplayedId(g,l);o=c.call(this,s,a,{type:"ObsoleteBehaviorsList"},!1,h)}var f=e.defaults({id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(s.id)},s),m=this._compPointersCache.getCompDataItemPointer(f,a,!0),v=m&&this._documentAPI.getFullDataItem(m),y=v&&v.items||[],A=(e.isString(y)?JSON.parse(y):y).concat(n),S=this._pointers.getInnerPointer(o,"items"),P=JSON.stringify(A);return e.isEqual(this._displayedDal.get(S),P)||this._displayedDal.set(S,P),S},f[a.resetActionsBehaviors]=function(e){var t=i.behaviors,n=this._compPointersCache.getCompDataItemPointer(e,t),s=this._pointers.getInnerPointer(n,"items");return this._displayedDal.set(s,JSON.stringify({})),s},f[a.layout]=function(e,t){var i=this._pointers.getInnerPointer(t,"layout");return this._displayedDal.merge(i,e),i},Object.freeze(f),m.prototype={updateDataItem:function(e,t,i,n){var s=v.call(this,e,n);return s?f[t].call(this,i,s,n):null},updateActionsAndBehaviorsItems:function(e,t){var i=v.call(this,e);return i?f[a.actionsBehaviors].call(this,t,i):null},resetActionsAndBehaviorsItems:function(e){var t=v.call(this,e);return t?f[a.resetActionsBehaviors].call(this,t):null},updateCompLayout:function(e,t){var i=v.call(this,e);return i?f[a.layout].call(this,t,i):null},updateCompStyle:function(t,n){var o=v.call(this,t);if(!o)return null;var r=this._pointers.getInnerPointer(o,s[i.theme]),c=this._displayedDal.get(r);if(!c)return null;c&&!e.includes(c,"_runtime_")&&u.call(this,o);var p=this._pointers.data.getItem(i.theme,c),l=this._displayedDal.get(p);return e.forOwn(n,(function(t,i){e.defaultsDeep(n[i],l[i])})),f[a.style].call(this,n,o)},updateAll:function(t){var i=this,n=e.map(t,(function(t,n){var s=t.overrides,a=v.call(i,n);return a?(e.forOwn(s,(function(e,t){f[t].call(i,e,a)})),a):null}));return e.compact(n)},OVERRIDE_TYPES:a},m}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=new t.SiteDataPrivates;function n(e){this.privatesKey=e,i.set(e,{siteData:e})}return n.prototype={createPageOriginalValuesMap:function(n,s){var a=i.get(this.privatesKey).siteData,o=a.getPageData(n,["structure"]),r=a.getAllStylesFromPage("masterPage"),c=n===t.siteConstants.MASTER_PAGE_ID?r:Object.assign({},r,a.getAllStylesFromPage(n)),u=s?t.constants.VIEW_MODES.MOBILE:a.getViewMode(),p=u===t.constants.VIEW_MODES.MOBILE,l=t.originalValuesMapGenerator.createOriginalValuesMap(o,c,p);e.set(a,["originalValuesMap",o.id,u],l)},removePageOriginalValues:function(n,s){var a=i.get(this.privatesKey).siteData,o=a.getPageData(n,["structure"]),r=s?t.constants.VIEW_MODES.MOBILE:a.getViewMode();e.set(a,["originalValuesMap",o.id,r],{})}},n}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(20),i(2),i(16)],void 0===(s=function(e,t,i,n){"use strict";function s(t){this.queue=[],this.duringFlushQueue=[],this.isDuringFlush=!1,this.preFlushOp=e.noop,this.postFlushOp=e.noop,this.shouldThrowOnErrors=t}function a(){if(!e.isEmpty(this.duringFlushQueue)){var t=this.duringFlushQueue;this.duringFlushQueue=[],c(t,this.shouldThrowOnErrors)}}function o(e){var t=this;this.isDuringFlush=!0;var i,n=function(){c(e,t.shouldThrowOnErrors),a.call(t)};if(this.shouldThrowOnErrors)try{n()}catch(e){i=e}else n();if(this.isDuringFlush=!1,i&&this.shouldThrowOnErrors)throw i}s.prototype.addItem=function(e){i.wSpy.logCallBackRegistration(e,"registerAction",[e.name||e],"ActionQueue"),this.queue.push(e)};var r={actionQueue:!0};function c(s,a){e.forEach(s,(function(s,o,u){var p;if(a)i.wSpy.logCallBackExecution(s,"runAction",[s.name||s],"ActionQueue"),p=s();else try{i.wSpy.logCallBackExecution(s,"runAction",[s.name||s],"ActionQueue"),p=s()}catch(e){n.integrations.ravenUtils.captureError(e,{tags:r})}if(e.get(p,"then"))return function(i,n,s,a){i.then((function(i){t.action((function(){var t=e.slice(n,s+1);c(i?e.concat(i,t):t,a)}))()}))}(p,u,o,a),!1}))}return s.prototype.flush=function(){if(this.isDuringFlush)e.isEmpty(this.queue)||(this.duringFlushQueue=this.queue);else{var i=this.queue;this.queue=[],this.preFlushOp(),t.runInAction(o.bind(this,i)),this.postFlushOp()}},s.prototype.runImmediately=function(e){this.isDuringFlush?(i.wSpy.logCallBackExecution(e,"runAction",[e.name||e],"ActionQueue"),e()):(this.addItem(e),this.flush())},s.prototype.registerPreFlushOperation=function(e){this.preFlushOp=e},s.prototype.registerPostFlushOperation=function(e){this.postFlushOp=e},s}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(2),i(0)],void 0===(s=function(e,t){"use strict";var i=e.constants,n={};n[e.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES]=!0;var s=new e.SiteDataPrivates;function a(e,t,n){var s=function(e){return e.siteData.isMobileView()?i.VIEW_MODES.MOBILE:i.VIEW_MODES.DESKTOP}(e),a=e.pointers.components.getPage(n,s);return e.pointers.components.getComponent(t,a)}function o(e,i,n,a,o,r){this.privatesKey=e,s.set(e,{siteData:e,createDisplayedPage:i,createDisplayedNode:n,pointers:a,displayedDal:o,actionQueue:r}),t.bindAll(this,t.functionsIn(this))}function r(i,n,s,a,o){var r=i.pointers.activeModes.getPageActiveModes(n);i.displayedDal.isExist(r)||i.displayedDal.set(r,{});var c=i.pointers.activeModes.getPageActiveModes(n),u=i.pointers.componentStructure.getModesDefinitions(s),p=i.displayedDal.get(u),l=o&&t.find(p,{modeId:o}),d=a&&t.find(p,{modeId:a}),g=i.displayedDal.get(c),h=e.modesUtils.getActiveModesForActivationChange(p,g,l,d);i.displayedDal.set(c,h)}function c(e,i,n){var s=e.pointers.activeModes.getPageActiveModes(i),a=e.displayedDal.get(s);if(!t.isEmpty(a)){var o=n?t.omitBy(a,n):{};return e.displayedDal.set(s,o),e.createDisplayedPage(i)}return!1}function u(e){return!Boolean(n[e.modeType])}return o.prototype={resetAllActiveModes:function(){var e=s.get(this.privatesKey),i=e.pointers.activeModes.getAllActiveModes(),n=e.displayedDal.getKeys(i);t.forEach(n,(function(t){c(e,t,u)}))},deactivateModesInPage:function(e){return c(s.get(this.privatesKey),e)},getActiveModes:function(){var e=s.get(this.privatesKey),i=e.pointers.activeModes.getAllActiveModes(),n=e.displayedDal.getKeys(i);return t.reduce(n,function(e,i){var n=this.getPageActiveModes(i);return t.isEmpty(n)||(e[i]=n),e}.bind(this),{})},getPageActiveModes:function(e){var i=s.get(this.privatesKey),n=i.pointers.activeModes.getPageActiveModes(e),a=i.displayedDal.get(n);return t.pickBy(a)},activateModeById:function(e,t,i){var n=a(s.get(this.privatesKey),e,t);return this.activateMode(n,i)},activateMode:function(e,t){var i=s.get(this.privatesKey),n=i.pointers.full.components.getPageOfComponent(e);if(n&&n.id){var a=this.getActiveModes()[n.id];return(!a||!a[t])&&(i.actionQueue.runImmediately((function(){r(i,n.id,e,null,t),i.createDisplayedNode(e)})),!0)}return!1},deactivateModeById:function(e,t,i){var n=a(s.get(this.privatesKey),e,t);return this.deactivateMode(n,i)},deactivateMode:function(e,t){var i=s.get(this.privatesKey),n=i.pointers.full.components.getPageOfComponent(e);if(n&&n.id){var a=this.getActiveModes()[n.id];return!(!a||!a[t])&&(i.actionQueue.runImmediately((function(){r(i,n.id,e,t),i.createDisplayedNode(e)})),!0)}return!1},switchModesByIds:function(e,t,i,n){var o=a(s.get(this.privatesKey),e,t);return this.switchModes(o,i,n)},switchModes:function(e,t,i){var n=s.get(this.privatesKey);if(t===i)return!1;var a=n.pointers.full.components.getPageOfComponent(e),o=this.getActiveModes()[a.id]||{},c=!o[i]||o[t];return c&&n.actionQueue.runImmediately((function(){r(n,a.id,e,t,i),n.createDisplayedNode(e)})),c}},o}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(197)],void 0===(s=function(e,t){"use strict";return{register:function(e){t.register(e)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(3),i(577),i(578),i(579),i(581),i(582),i(583),i(584),i(202),i(586),i(587),i(588),i(589),i(590),i(591),i(592),i(593),i(208),i(594),i(595),i(604),i(607),i(608),i(609),i(610),i(611),i(614),i(615),i(616),i(617),i(618),i(619),i(620),i(621),i(622),i(623),i(624),i(625),i(626)],void 0===(s=function(e,t,i,n){"use strict";e.siteAspectsRegistry.registerSiteAspect("behaviorsAspect",t),e.siteAspectsRegistry.registerSiteAspect("animationsAspect",i),e.siteAspectsRegistry.registerSiteAspect("designDataChangeAspect",n)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=["sourceId","type","name"],n=["behaviors","registeredActionsByTypeSource"],s=t.behaviorsService;function a(t){return e.at(t,i).join(",")}function o(e){return"".concat(e.type,":").concat(e.sourceId)}function r(t,i,n,s){var a=e(t).map(n).keyBy(s).value(),o=e.keys(a),r=e.keys(i),c=e.intersection(o,r);return{map:a,added:e.difference(o,c),removed:e.difference(r,c)}}function c(i,n){var o=r(i,this._registeredBehaviors[n]||{},"behavior",s.behaviorUniqueIdentifier);this._behaviorsAdded[n]=o.added.concat(this._behaviorsAdded[n]||[]),this._behaviorsRemoved[n]=o.removed.concat(this._behaviorsRemoved[n]||[]),e(this._registeredBehaviors[n]).pick(o.removed).forEach(function(i){var n=t.behaviorHandlersFactory.getHandler(i.type),s=e.find(this._triggeredBehaviors,(function(t){return e.isEqual(t,i)})),a=!!s;e.has(n,"cancelPreCondition")&&!a&&n.cancelPreCondition(i,this._aspectSiteAPI),e.has(n,"cancel")&&n.cancel(i,this._aspectSiteAPI),this._triggeredBehaviors=e.without(this._triggeredBehaviors,s)}.bind(this)),this._registeredBehaviors[n]=o.map;var c=r(i,this._registeredActions[n]||{},"action",a);this._actionsRemoved[n]=this._actionsRemoved[n]||{},e.assign(this._actionsRemoved[n],e.pick(this._registeredActions[n],c.removed)),this._registeredActions[n]=c.map,this._actionsAdded[n]=c.added.concat(this._actionsAdded[n]||[]),this._actionsToBehaviorsMap[n]=e(i).groupBy((function(e){return a(e.action)})).mapValues((function(t){return e(t).map("behavior").map(s.behaviorUniqueIdentifier).value()})).value(),this._behaviorsToActionsMap[n]=e(i).groupBy((function(e){return s.behaviorUniqueIdentifier(e.behavior)})).mapValues((function(t){return e(t).map("action").map(a).value()})).value()}function u(t,i,n){var s=e(t).pick(i).map((function(t,i){return!0===n?t:e.pick(t,n[i])})).values().value();return e.assign.apply(e,[{}].concat(s))}function p(e){return this._aspectSiteAPI.getSiteAspect("actionsAspect").needToRunPreConditions(e)}function l(i,n,a){var o=this._aspectSiteAPI.getSiteAPI(),r=o.getAllRenderedRootIds(),c=e.map(i,function(i){var n=function(t,i,n){return e(i).chain().pick(t).map((function(t){return e.flatten(e.values(t))})).find((function(t){return e(t).map("behavior").some(n)})).find((function(t){return e.isEqual(t.behavior,n)})).get("action").value()}(r,this._rawBehaviorsForActions,i);return"widget"!==a||n?t.behaviorHandlersFactory.getBehaviorPreprocessor(a)(i,n,o):null}.bind(this));s.handleBehaviors(o,e.compact(c),n,a)}function d(t){return e(t).map("action").groupBy(o).value()}function g(i,n){var s=t.behaviorHandlersFactory.getHandler(e.get(n,"behavior.type","animation"));return e.isUndefined(s.isEnabled)||s.isEnabled(n.behavior,i.getSiteAPI())}function h(t,i,n){var s=t.getSiteAspect("actionsAspect");return e(i).reject((function(e){return s.isActionDisabled(e.action.name)})).filter((function(e){return g(t,e)})).map((function(t){return e.defaultsDeep(t,{behavior:{type:"animation",pageId:n},action:{pageId:n}})})).value()}function f(t){this._aspectSiteAPI=t,this._registeredActions={},this._registeredBehaviors={},this._ranOnce={},this._rawBehaviorsForActions={},this._behaviorsAdded={},this._behaviorsRemoved={},this._actionsAdded={},this._actionsRemoved={},this._actionsToBehaviorsMap={},this._behaviorsToActionsMap={},this._triggeredBehaviors=[],this._behaviorsToExecute={},this._behaviorsToExecuteListeners={},e.set(t.getSiteData(),n,{}),e.bindAll(this,["handleActions","handleAction","setBehaviorsForActions","resetBehaviorsForActions","getActions","getCompActions","convertBehaviors","_handleDidLayout","_handleRootsChanged","_handleRootsAddedDidLayout","resetBehaviorsRegistration","_registerPendingBehaviors","registerBehavior","handleBehavior","isBehaviorEnabled"]),this._aspectSiteAPI.registerToDidLayout(this._handleDidLayout),this._aspectSiteAPI.registerToAddedRenderedRootsDidLayout(this._handleRootsAddedDidLayout),this._aspectSiteAPI.registerToRenderedRootsChange(this._handleRootsChanged),this.applySsrChanges=this._registerPendingBehaviors.bind(this)}return f.prototype={handleActions:function(t,i){e.forEach(this._actionsToBehaviorsMap,function(n,o){e(n).pick(e.map(t,a)).values().flatten().map(e.get.bind(e,this._registeredBehaviors[o])).groupBy("type").forEach(function(n,a){this._triggeredBehaviors=this._triggeredBehaviors.concat(n),n=function(t,i){return e.filter(t,(function(e){var t=s.behaviorUniqueIdentifier(e);return(!e.playOnce||!i[t])&&(i[t]=!0,!0)}))}(n,this._ranOnce),i=e.defaults({},i,{action:"action"}),t=t||[{name:"action"}],i.action=t[0].name,l.call(this,n,i,a)}.bind(this))}.bind(this))},handleAction:function(e,t){this.handleActions([e],t)},setBehaviorsForActions:function(t,i,s){var a=h(this._aspectSiteAPI,t,i);e.set(this._aspectSiteAPI.getSiteData(),n.concat([i,s]),d(t)),e.set(this._rawBehaviorsForActions,[i,s],a)},resetBehaviorsForActions:function(e){var t=this._aspectSiteAPI.getRootOfComponentId(e);this._aspectSiteAPI.getSiteAPI().resetCompBehavioursByPageAndCompId(t,e)},getActions:function(t,i){var s=e.get(this._aspectSiteAPI.getSiteData(),n,{});return e(s).map(i).flatMap("".concat(t,":").concat(i)).compact().uniq().mapKeys((function(e){return e.name})).value()},getCompActions:function(t,i,n,s){var a=d(h(this._aspectSiteAPI,s,n));return e(e.get(a,["".concat(t,":").concat(i)])).compact().uniq().mapKeys((function(e){return e.name})).value()},convertBehaviors:function(t,i){return e.map(t,(function(t){if(t.behavior&&t.action)return t;var n={name:t.action,sourceId:t.sourceId||i,type:"comp"},s=e.omit(t,["action","sourceId","pageId","duration","delay","params"]);return s.targetId=s.targetId||i,s.params=e.assign(e.cloneDeep(t.params),e.pick(t,["duration","delay"])),{action:n,behavior:s}}))},_handleDidLayout:function(){var i=this._aspectSiteAPI.getAllRenderedRootIds();e.forEach(i,function(t){var i=e.flatten(e.values(this._rawBehaviorsForActions[t])),n=e.get(this._aspectSiteAPI.getSiteData(),"measureMap.top",{});i=e.filter(i,(function(t){var i=t.action.sourceId,s=t.action.type,a=t.behavior.type,o=t.behavior.targetId,r="comp"!==s||e.isNumber(n[i]),c="widget"===a||"site"===a||e.isNumber(n[o]);return r&&c})),c.call(this,i,t)}.bind(this));var n=u(this._registeredActions,i,this._actionsAdded),s=e(this._actionsRemoved).pick(i).values().reduce(e.assign,{}),a=e(this._registeredActions).pick(i).values().reduce(e.assign,{}),o=u(this._registeredBehaviors,i,this._behaviorsAdded);e.forEach(o,function(n,s){var o=e(this._behaviorsToActionsMap).pick(i).values().map(s).compact().flatten().map(e.get.bind(e,a)).every(p.bind(this));if((!n.playOnce||!this._ranOnce[s])&&o){var r=t.behaviorHandlersFactory.getHandler(n.type);e.has(r,"handlePreCondition")&&r.handlePreCondition(n,this._aspectSiteAPI)}}.bind(this)),e.forEach(i,function(e){this._actionsAdded[e]=[],this._actionsRemoved[e]={},this._behaviorsAdded[e]=[],this._behaviorsRemoved[e]=[]}.bind(this)),e.isEmpty(s)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(s),e.isEmpty(n)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsAddedLayouted(n)},_handleRootsChanged:function(t,i){var s=u(this._registeredActions,i,!0);e.forEach(i,function(t){this._rawBehaviorsForActions[t]=[],this._registeredActions[t]={},this._registeredBehaviors[t]={},this._behaviorsAdded[t]=[],this._behaviorsRemoved[t]=[],this._actionsAdded[t]=[],this._actionsRemoved[t]={},this._actionsToBehaviorsMap[t]={},this._behaviorsToActionsMap[t]={},e.set(this._aspectSiteAPI.getSiteData(),n.concat(t),{})}.bind(this)),this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(s)},_handleRootsAddedDidLayout:function(){},resetBehaviorsRegistration:function(){this._ranOnce={}},_registerPendingBehaviors:function(){e.forEach(this._aspectSiteAPI.getSiteData().ssr.pendingBehaviours,function(e){this.registerBehavior(e,e.callback,!0)}.bind(this))},registerBehavior:function(t,i,n){var s=e.toArray(this._behaviorsToExecute[t.targetId]).concat({name:t.name,params:t.params,callback:i});n&&e.get(t,"params.requiresDom.requiresFullRender")&&function(t,i){e.remove(t,["name",i])}(s,t.name),this._behaviorsToExecuteListeners[t.targetId]?this._behaviorsToExecuteListeners[t.targetId](s):this._behaviorsToExecute[t.targetId]=s},trackBehaviorsToExecute:function(e,t){var i=this;return this._behaviorsToExecuteListeners[e]=t,this._behaviorsToExecute[e]&&(t(this._behaviorsToExecute[e]),delete this._behaviorsToExecute[e]),function(){i._behaviorsToExecuteListeners[e]===t&&(delete i._behaviorsToExecuteListeners[e],delete i._behaviorsToExecute[e])}},handleBehavior:function(e,t){l.call(this,[e],t,e.type)},handleProcessedBehavior:function(e,t){var i=this._aspectSiteAPI.getSiteAPI();s.handleBehaviors(i,[e],t,e.type)},isBehaviorEnabled:function(t){var i=this.convertBehaviors([t]);return g(this._aspectSiteAPI,e.head(i))}},f}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(6)],void 0===(s=function(e,t){"use strict";var i={props:"clip,clipPath,webkitClipPath,opacity,transform,transformOrigin",immediateRender:!1};function n(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animationsPackage=this._siteData.animations,this._liveSequenceIdsByGroup={},this._compsWithRuntimeAnimations={}}function s(t){for(var i=t.targetId||t.sourceId;e.isArray(i);)i=i[0];return this._aspectSiteAPI.getRootOfComponentId(i)||t.pageId}function a(i,n){e.forEach(i,function(e){var i=this.animationsPackage.getProperties(e.name),a=!e.viewMode||e.viewMode===this._siteData.getViewMode();if(i&&i.hideOnStart&&a){var o=s.call(this,e),r=this._aspectSiteAPI.getComponentByPageAndCompId(o,e.targetId||e.sourceId),c=r?t.findDOMNode(r):null;c&&(c.style.opacity=n)}}.bind(this))}return n.prototype.previewAnimation=function(e,t,n,s){var a,o=this._aspectSiteAPI.getPageById(t);if(o)return(a=o.sequence()).add(e,n.name,n.duration,n.delay,n.params),a.add(e,"BaseClear",0,0,i),s&&a.onCompleteAll(s),a.execute()},n.prototype.addAnimationToSequence=function(t,n,a){var o=n[s.call(this,t)],r=t.targetId,c=t.name,u=t.params,p=u.duration,l=u.delay,d=e.omit(t.params,["duration","delay"]);return o.add(r,c,p,l,d,0),a&&o.add(r,"BaseClear",0,0,i),t.targetId},n.prototype.playAnimations=function(t,i,n,a){var o={},r={},c=[];e.forEach(i,function(t){var i=s.call(this,t),a=this._aspectSiteAPI.getPageComponents(i);if(a){var c=t.targetId||t.sourceId;if(!e.isString(c)||a[c]){if(!r[i]){var u=this._aspectSiteAPI.getPageById(i);r[i]=u.sequence(),o[i]=[]}this._compsWithRuntimeAnimations[c]=i,this.addAnimationToSequence(t,r,n),o[i].push(c)}}}.bind(this));var u=1,p=function(i){u--,this._liveSequenceIdsByGroup[t]=e.reject(this._liveSequenceIdsByGroup[t],{sequenceId:i}),0===u&&a()}.bind(this);return e.forEach(r,function(t,i){t.hasAnimations()&&(u++,t.onCompleteAll(p.bind(this,t.getId())),o[i]=e.compact(o[i]),c.push({parentId:i,sequenceId:t.getId()}),t.execute())}.bind(this)),p(),this._liveSequenceIdsByGroup[t]=this._liveSequenceIdsByGroup[t].concat(c),o},n.prototype.hideElementsByAnimationType=function(e){a.call(this,e,0)},n.prototype.revertHideElementsByAnimations=function(e){a.call(this,e,"")},n.prototype.previewTransition=function(e,t,n,s,a){var o;if(o="masterPage"===n?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var r=o.sequence();return r.add({sourceRefs:e,destRefs:t},s.name,s.duration,s.delay,s.params),r.add(e.concat(t),"BaseClear",0,0,i),a&&r.onCompleteAll(a),r.execute()}},n.prototype.stopPreviewAnimation=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this._aspectSiteAPI.getAllRenderedRoots();e.forEach(n,(function(e){e.stopSequence(t,i)}))},n.prototype.stopAndClearAllAnimations=function(){var t=this;e.forEach(this._liveSequenceIdsByGroup,(function(e,i){return t.stopAndClearAnimations(i,1)}))},n.prototype.stopAndClearAnimations=function(t,n){var s=this;e.forEach(this._liveSequenceIdsByGroup[t],(function(e){var t=s._aspectSiteAPI.getPageById(e.parentId);t&&t.stopSequence(e.sequenceId,n)})),this._liveSequenceIdsByGroup[t]=[],"command"===t&&(e.forEach(this._compsWithRuntimeAnimations,(function(e,t){var n=s._aspectSiteAPI.getPageById(e);n&&n.sequence().add(t,"ClearSequence",0,0).add(t,"BaseClear",0,0,i).execute()})),this._compsWithRuntimeAnimations={})},n.prototype.isAnimationPlayable=function(e){return s.call(this,e)},n}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(580)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredHandlers={},this.registerHandler("designDataChangeBgBehaviorsHandler",t.handle)}return i.prototype={registerHandler:function(e,t){this._registeredHandlers[e]=t},unregisterHandler:function(t){this._registeredHandlers=e.omit(this._registeredHandlers,t)},notify:function(e,t,i){this.propagate(e,t,i)},propagate:function(t,i,n){e.forEach(this._registeredHandlers,function(e){e(this._aspectSiteAPI,t,i,n)}.bind(this))}},i}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=t.mediaConsts.balataConsts,n={FadeIn:{type:"animation",defaults:{params:{}}},FadeOut:{type:"animation",defaults:{params:{}}},Scale:{type:"animation",defaults:{params:{scale:1}}}};function s(t,s){var a=e(s).map("part").uniq().value(),o=e.transform(s,(function(t,i){var s=e.get(n,[i.name,"defaults","params"]);t[i.part]=e.assign({},t[i.part],s)}),{});return e.transform(a,(function(n,s){var a=e.get(t,["background",i[s]]);n[s]=e.merge({},o[s],e.pick(a,e.keys(o[s])))}),{})}function a(s,a,o,r){var c=s.getSiteAspect("behaviorsAspect");e.forEach(r,(function(s){var r=e.get(o,["background",i[s.part]],{}),u=e.get(n,[s.name,"defaults","params"]);c.handleBehavior(function(i,n,s,a){var o={name:n.name,type:n.type,targetId:[[i,t.mediaConsts.balataConsts.BALATA,n.part]],params:e.clone(n.params)||{}};return e.isEmpty(s)||e.assign(o.params,s,e.pick(a,e.keys(s))),o}(a,s,u,r),{group:a})}))}function o(t,i,n,o){var r=function(e,t){return e.getComponentById(t).refs.balata}(t,i),c=n||{},u=function(t,i,n){var s=[];e.forEach(e.filter(t.dataChangeBehaviors,{trigger:"out"}),(function(e){s.push(e)})),e.forEach(e.filter(i.dataChangeBehaviors,{trigger:"in"}),(function(t){e.find(s,e.pick(t,["type","part","name"]))||s.push(t)}));var a={callbacks:{onComplete:function(){n.setState({transforms:{}})}}};return e.map(s,(function(t){var i=e.defaults({},a,t.params);return e.defaults({params:i},t)}))}(n,o,r);!function(e,t){e.getSiteAspect("animationsAspect").stopAndClearAnimations(t)}(t,i),a(t,i,o,u),r.setState({transforms:s(c,u)})}return Object.freeze(n),{handle:function(t,i,n,s){e.isEmpty(e.get(n,"dataChangeBehaviors"))&&e.isEmpty(e.get(s,"dataChangeBehaviors"))||e.get(s,"background.mediaRef.type")!==e.get(n,"background.mediaRef.type")||o(t,i,n,s)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(3),i(0)],void 0===(s=function(e,t){"use strict";function i(){var e,i=this.aspectSiteApi.getSiteAPI().getSiteData().measureMap,n=t.get(i,"height.masterPage",0);n&&n!==this.storedHeight&&(this.storedHeight=n,window.parent.postMessage?e=window.parent:window.parent.document.postMessage&&(e=window.parent.document),e&&void 0!==e&&e.postMessage(n,"*"))}function n(e){this.aspectSiteApi=e,this.storedHeight=0,e.registerToDidLayout(i.bind(this))}return e.siteAspectsRegistry.registerSiteAspect("parentFrame",n),n}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(207),i(3)],void 0===(s=function(e,t,i){"use strict";function n(t){var i={};if(t){var n=t.split(" ");return e.forEach(n,(function(e){var t=e.split(":");t[0]&&t[1]&&(i[t[0]]=t[1])})),e.isEmpty(i)?t:i}}function s(t){var i={},s=t.getFocusedRootId(),a=n(t.getExistingRootNavigationInfo(s).pageItemAdditionalData);if(e.isPlainObject(a)){var o=t.getDataByQuery(a.galleryId)||a.galleryId;o&&(i.pageItemAdditionalData=o),a.galleryCompId&&(i.galleryCompId=a.galleryCompId)}else i.pageItemAdditionalData=a;return i}function a(){}a.prototype={getComponentsToRender:function(i){var a=i.getSiteData(),o=function(i){var s=i.getExistingRootNavigationInfo(i.getFocusedRootId()),a=i.getDataByQuery(s.pageItemId);if(!a)return null;var o=n(s.pageItemAdditionalData),r=e.get(o,"propertyQuery"),c=t.getCompStructure(a.type,a,r,i);return c||null}(a);return o?[{structure:o,pageId:a.getFocusedRootId(),props:s(a)}]:null}},i.siteAspectsRegistry.registerSiteAspect("pageItem",a)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(207),i(3)],void 0===(s=function(e,t,i){"use strict";function n(t){this._aspectSiteAPI=t,e.bindAll(this,["zoom","unzoom"])}return n.prototype={zoom:function(e,t){if(!e||"Image"!==e.type||!t)throw new Error("nonPageItemZoom should be used only with (imageData, galleryData)");this._aspectSiteAPI.setAspectGlobalData("nonPageItemZoom",{image:e,galleryData:t})},unzoom:function(){this._aspectSiteAPI.removeAspectGlobalData("nonPageItemZoom")},getComponentsToRender:function(e){var i=e.getAspectGlobalData("nonPageItemZoom");if(i){var n=e.getSiteData(),s=t.getCompStructure("Image",i.image,null,n);return s.compData=i.image,delete s.dataQuery,[{structure:s,props:{key:s.key,compData:i.image,closeFunction:this.unzoom,pageItemAdditionalData:i.galleryData}}]}return null}},i.siteAspectsRegistry.registerSiteAspect("nonPageItemZoom",n),n}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3),i(585)],void 0===(s=function(e,t,i){"use strict";var n="externalScriptLoader";function s(e){this.siteAPI=e}return s.prototype={loadScript:function(t,s,a){var o=e.get(this.siteAPI.getAspectGlobalData(n),t),r=!o;if(r){var c=i.getScriptDescription(t,a);if(!c)return;o={script:c,callbacks:[]}}s&&o.callbacks.push({callback:s,context:a}),r&&e.isFunction(o.script.actionBefore)&&o.script.actionBefore(),(s||r)&&this.siteAPI.updateAspectGlobalData(n,e.fromPairs([[t,o]])),r&&this.siteAPI.forceUpdate()},unsubscribe:function(t,i){var s=e.get(this.siteAPI.getAspectGlobalData(n),t);s&&(e.pull(s.callbacks,i),this.siteAPI.updateAspectGlobalData(n,e.fromPairs([[t,s]])))},loadExternalScript:function(){}},t.siteAspectsRegistry.registerSiteAspect(n,s),s}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";return t.externalScriptRegistery}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";var i=function(){function t(i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i.getSiteData().isInSSR()||(this.aspectSiteAPI=i,this.scrollableNodes=new Map,this.scrollableCompIds=new Map,this.compsToIgnoreOnNextScrollEvent=[],this.onScroll=function(t){var i=t.target;e.includes(n.compsToIgnoreOnNextScrollEvent,i)?n.compsToIgnoreOnNextScrollEvent=e.without(n.compsToIgnoreOnNextScrollEvent,i):n.registerCurrentScrollToMaps(i)})}var i,n,s;return i=t,(n=[{key:"registerCurrentScrollToMaps",value:function(e){if(this.scrollableNodes.has(e)){var t=this.scrollableNodes.get(e).compId,i={x:e.scrollLeft,y:e.scrollTop};this.scrollableNodes.set(e,{compId:t,value:i}),this.scrollableCompIds.set(t,{scrollableNode:e,value:i})}}},{key:"registerComponent",value:function(e,t){var i=window.document.getElementById(e).querySelector(t),n={x:i.scrollLeft,y:i.scrollTop};this.scrollableNodes.set(i,{compId:e,value:n}),this.scrollableCompIds.set(e,{scrollableNode:i,value:n}),i.addEventListener("scroll",this.onScroll)}},{key:"unregisterComponent",value:function(e){var t=this.scrollableCompIds.get(e);if(t){var i=t.scrollableNode;i.scrollTo(0,0),this.scrollableNodes.delete(i),this.scrollableCompIds.delete(e),i.removeEventListener("scroll",this.onScroll)}}},{key:"scroll",value:function(t,i,n,s){var a=this.scrollableCompIds.get(t);if(a){var o=a.scrollableNode;o.scrollTo(i,n),this.registerCurrentScrollToMaps(o),this.compsToIgnoreOnNextScrollEvent.push(o),e.isFunction(s)&&s()}}},{key:"scrollBy",value:function(t,i,n,s){var a=this.scrollableCompIds.get(t);if(a){var o=a.scrollableNode;o.scrollBy(i,n),this.registerCurrentScrollToMaps(o),this.compsToIgnoreOnNextScrollEvent.push(o),e.isFunction(s)&&s()}}},{key:"getTotalScroll",value:function(t){var i=this,n=this.aspectSiteAPI.getPointers().components,s=this.aspectSiteAPI.getSiteData(),a=n.getPage(s.getFocusedRootId(),s.getViewMode()),o=n.getComponent(t,a),r=n.getAncestors(o);return e.reduce(r,(function(t,n){var s=e.get(i.scrollableCompIds.get(n.id),"value",{x:0,y:0});return{x:t.x+s.x,y:t.y+s.y}}),{x:0,y:0})}}])&&a(i.prototype,n),s&&a(i,s),t}();t.siteAspectsRegistry.registerSiteAspect("scrollableAspect",i)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";t.siteAspectsRegistry.registerSiteAspect("welcomeScreenAspect",(function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i.registerToSiteReady((function(){e.invoke(window,"requestCloseWelcomeScreen")}))}))}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3),i(2)],void 0===(s=function(e,t,i){"use strict";var n=i.stringUtils,s=["focus","blur"],a=function(e){this._aspectSiteAPI=e,this._registerToFocusEvents()};a.prototype={_registerToFocusEvents:function(){this._compsRegistry={},e.forEach(s,function(e){this._compsRegistry[e]={},this._aspectSiteAPI.registerToFocusEvents(e,this.propagateFocusEvent.bind(this,e))}.bind(this))},registerToFocusEvent:function(e,t){this._compsRegistry[e][t.props.id]=t.props.id},unregisterFromFocusEvent:function(e,t){delete this._compsRegistry[e][t.props.id]},propagateFocusEvent:function(t){var i,s=this._compsRegistry[t],a="on".concat(n.capitalize(t));e.forEach(s,function(e){(i=this._aspectSiteAPI.getComponentById(e))?i[a]&&i[a]():delete this._compsRegistry[t][e]}.bind(this))}},t.siteAspectsRegistry.registerSiteAspect("windowFocusEvents",a)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(t,i){e.forEach(i,(function(i){!function(t,i){e.forEach(i,(function(i){var n=e.findLast(i.scrollModes,(function(e){return e.settings.scrollPos<=t}));n&&i.debouncedActivateModeById(n.modeId)}))}(t,i)}))}function n(e,t,i){var n,s;return function(a){a!==s&&(s=a,clearTimeout(n),n=setTimeout((function(){e.activateModeById(t,i,s)}),50))}}function s(e){var t=this;this._aspectSiteAPI=e,this._registeredCompIds={},this.invokeOnce=[],this._registeredScrollModes={},this._prevScrollPosition={x:0,y:0},this._prevScrollDirection="",this._aspectSiteAPI.getSiteData().isInSSR()?this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",{x:0,y:0}):this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",this._aspectSiteAPI.getSiteScroll()),this._aspectSiteAPI.registerToSiteReady((function(){t._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",t._aspectSiteAPI.getSiteScroll()),e.registerToScroll(t.propagateScrollEvent.bind(t)),t._aspectSiteAPI.isExperimentOpen("scrollModes")&&e.registerToRenderedRootsChange(t.cleanNonRenderedScrollModes.bind(t))}))}s.prototype={scrollSiteTo:function(e,t,i){var n=this._aspectSiteAPI.getSiteData(),s=this.getScrollPosition(),a=n.getScreenSize(),o=n.measureMap.height.masterPage,r=n.measureMap.width.masterPage,c=function(e,t,i,n){if(e<=t)return!1;var s=i.y;return n>s&&e>s+t||n<s&&s>0}(o,a.height,s,t),u=function(e,t,i,n){if(e<=t)return!1;var s=i.x;return n>s&&e>s+t||n<s&&s>0}(r,a.width,s,e);c||u?(i&&this.invokeOnce.push(i),this._aspectSiteAPI.scrollSiteTo(u?e:s.x,c?t:s.y)):i&&i()},registerToScroll:function(e){this._registeredCompIds[e.props.id]=e.props.id},unregisterToScroll:function(e){delete this._registeredCompIds[e.props.id]},propagateScrollEvent:function(t){var n=this;this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",t);var s=this.getScrollDirection(t);this._aspectSiteAPI.isExperimentOpen("scrollModes")&&i(t.y,this._registeredScrollModes),this._prevScrollPosition=t,this._prevScrollDirection=s,e.forEach(this._registeredCompIds,(function(e){var i=n._aspectSiteAPI.getComponentById(e);i?i.onScroll&&i.onScroll(t,s):delete n._registeredCompIds[e]})),e.forEach(this.invokeOnce,(function(e){e(t,s)})),this.invokeOnce=[]},getScrollDirection:function(e){return e.y!==this._prevScrollPosition.y?e.y>this._prevScrollPosition.y?"DOWN":"UP":e.x!==this._prevScrollPosition.x?e.x>this._prevScrollPosition.x?"RIGHT":"LEFT":this._prevScrollDirection},getScrollPosition:function(){return this._aspectSiteAPI.getAspectGlobalData("windowScrollEvent")},registerCompScrollModes:function(t,i,s){this._registeredScrollModes[i]=this._registeredScrollModes[i]||{};var a=e.findKey(this._registeredScrollModes,t);a&&a!==i&&delete this._registeredScrollModes[a][t];var o=this._aspectSiteAPI;this._registeredScrollModes[i][t]={scrollModes:e.sortBy(s,"settings.scrollPos"),debouncedActivateModeById:n(o,t,i)}},clearCompScrollModes:function(t){var i=e.findKey(this._registeredScrollModes,t);i&&delete this._registeredScrollModes[i][t]},cleanNonRenderedScrollModes:function(t,i){this._aspectSiteAPI.isExperimentOpen("scrollModes")&&(this._registeredScrollModes=e.omit(this._registeredScrollModes,i))}},t.siteAspectsRegistry.registerSiteAspect("windowScrollEvent",s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(7),i(3)],void 0===(s=function(e,t,i){"use strict";function n(e){this._aspectSiteAPI=e,this._registeredCompIds={},this._registeredCompIdsOrientation={},this._aspectSiteAPI.registerToResize(this.propagateResizeEvent.bind(this)),this._aspectSiteAPI.registerToOrientationChange(this.propagateOrientationEvent.bind(this))}n.prototype={registerToResize:function(e){this._registeredCompIds[e.props.id]=e.props.id},unregisterToResize:function(e){delete this._registeredCompIds[e.props.id]},registerToOrientationChange:function(e){this._registeredCompIdsOrientation[e.props.id]=e.props.id},unregisterToOrientationChange:function(e){delete this._registeredCompIdsOrientation[e.props.id]},propagateResizeEvent:function(){var i=null;e.forEach(this._registeredCompIds,function(e){var n=this._aspectSiteAPI.getComponentById(e);if(n){if(n.onResize){if(!i){var s=t(window.document.body);i={height:s.height(),width:s.width()}}n.onResize(i)}}else delete this._registeredCompIds[e]}.bind(this))},propagateOrientationEvent:function(){e.forEach(this._registeredCompIdsOrientation,function(e){var t=this._aspectSiteAPI.getComponentById(e);t?t.onOrientationChange&&t.onOrientationChange():delete this._registeredCompIdsOrientation[e]}.bind(this))}},i.siteAspectsRegistry.registerSiteAspect("windowResizeEvent",n)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";var i=function(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToDocumentClick(this.propagateDocumentClickEvent.bind(this)),this._registeredCompIds=[]};i.prototype={registerToDocumentClickEvent:function(t){this._registeredCompIds=e.union(this._registeredCompIds,[t])},unRegisterToDocumentClickEvent:function(t){e.pull(this._registeredCompIds,t)},propagateDocumentClickEvent:function(t){e.forEach(this._registeredCompIds,function(e){var i=this._aspectSiteAPI.getComponentById(e);i&&i.onDocumentClick&&i.onDocumentClick(t)}.bind(this))}},t.siteAspectsRegistry.registerSiteAspect("windowClickEventAspect",i)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";var i={39:"ArrowRight",37:"ArrowLeft",27:"Escape",13:"Enter",32:"Space"};function n(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToKeyDown(this.propagateKeyDownSpecificKeyEvent.bind(this)),this._aspectSiteAPI.registerToKeyUp(this.propagateKeyboardEvent.bind(this,"KeyUp")),this._registeredCompIds={specificKeysKeyDown:{Escape:[],ArrowRight:[],ArrowLeft:[]},KeyDown:[],KeyUp:[]}}n.prototype={registerToKeyDownWithFocus:function(e,t){t.addEventListener("focus",function(){this.registerToKeyDown(e)}.bind(this)),t.addEventListener("blur",function(){this.unRegisterKeyDown(e)}.bind(this))},registerToEscapeKey:function(e){this._registeredCompIds.specificKeysKeyDown.Escape.push(e.props.id)},registerToArrowRightKey:function(e){this._registeredCompIds.specificKeysKeyDown.ArrowRight.push(e.props.id)},registerToArrowLeftKey:function(e){this._registeredCompIds.specificKeysKeyDown.ArrowLeft.push(e.props.id)},unRegisterKeys:function(t){e.forEach(this._registeredCompIds.specificKeysKeyDown,function(i,n){this._registeredCompIds.specificKeysKeyDown[n]=e.without(this._registeredCompIds.specificKeysKeyDown[n],t.props.id)}.bind(this))},registerToKeyDown:function(e){this._registeredCompIds.KeyDown.push(e.props.id)},unRegisterKeyDown:function(t){this._registeredCompIds.KeyDown=e.without(this._registeredCompIds.KeyDown,t.props.id)},registerToKeyUp:function(e){this._registeredCompIds.KeyUp.push(e.props.id)},unRegisterKeyUp:function(t){this._registeredCompIds.KeyUp=e.without(this._registeredCompIds.KeyUp,t.props.id)},unRegisterAll:function(e){this.unRegisterKeys(e),this.unRegisterKeyDown(e),this.unRegisterKeyUp(e)},propagateKeyDownSpecificKeyEvent:function(t){this.propagateKeyboardEvent("KeyDown",t);var n=i[t.keyCode||t.which];if(!e.isEmpty(this._registeredCompIds.specificKeysKeyDown[n])){var s=e.last(this._registeredCompIds.specificKeysKeyDown[n]),a=this._aspectSiteAPI.getComponentById(s),o="on".concat(n,"Key");a?a[o]&&(t.preventDefault(),a[o]()):this._registeredCompIds.specificKeysKeyDown[n]=e.without(this._registeredCompIds.specificKeysKeyDown[n],s)}},propagateKeyboardEvent:function(t,n){!e.isEmpty(this._registeredCompIds[t])&&function(e){return Boolean(i[e.keyCode||e.which])}(n)&&e.forEach(this._registeredCompIds[t],function(i){var s=this._aspectSiteAPI.getComponentById(i),a="on".concat(t);s?s[a]&&(n.preventDefault(),s[a](n)):this._registeredCompIds[t]=e.without(this._registeredCompIds[t],i)}.bind(this))}},t.siteAspectsRegistry.registerSiteAspect("windowKeyboardEvent",n)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,e.bindAll(this,e.functionsIn(this))}return i.prototype={getComponentsToRender:function(t){var i=t.getAspectGlobalData("addComponent");return e.values(i)},addComponent:function(e,t,i){var n={};n[e]={structure:t,props:i},this._aspectSiteAPI.updateAspectGlobalData("addComponent",n),this._aspectSiteAPI.forceUpdate()},deleteComponent:function(e){var t=this._aspectSiteAPI.getAspectGlobalData("addComponent");delete t[e],this._aspectSiteAPI.setAspectGlobalData("addComponent",t),this._aspectSiteAPI.forceUpdate()}},t.siteAspectsRegistry.registerSiteAspect("addComponent",i),i}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(3)],void 0===(s=function(e,t,i){"use strict";var n="QuickActionBarAspect",s=e.map(t.constants.SUPPORTED_DYNAMIC_ACTIONS,"appId");function a(t,i){var n=e.find(t,{appId:i.appId});n?e.merge(n,i):t.push(i)}function o(t){this.aspectSiteApi=t,this.aspectSiteApi.updateAspectGlobalData(n,{dynamicActions:[]}),e.bindAll(this,e.functionsIn(this))}Object.freeze(s),o.prototype={updateDynamicActions:function(t){!function(t){var i=e(t).map("appId").difference(s).value();if(e.some(i))throw new Error('failed to add unsupported dynamic actions with app ids: "'.concat(i,'"'))}(t=[].concat(t));var i=this.aspectSiteApi.getAspectGlobalData(n).dynamicActions;!function(t,i){e.forEach(i,e.partial(a,t,e))}(i,t),this.aspectSiteApi.updateAspectGlobalData(n,{dynamicActions:i}),this.aspectSiteApi.forceUpdate()}},i.siteAspectsRegistry.registerSiteAspect(n,o)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3),i(596),i(597),i(598),i(599),i(600),i(601),i(602),i(603),i(16)],void 0===(s=function(e,t,i,n,s,a,o,r,c,u,p){"use strict";var l=p.triggerTypesConsts;function d(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this._behaviors=[],this._pageTransitionComplete=[],this._pageTransitionStarted=[],this._pageNavigationCanceled=[],this._isDuringPageTransition=!1,this._navigationComplete=[],this._navigationError={},this._actions={},this._previouslyRegisteredPages=[],this._didFirstLayout=!1,this._didPageChange=!1,this._noopFirstLayout=this._siteData.isClientAfterSSR(),this.registerAction(i),this.registerAction(n),this.registerAction(s),this.registerAction(a),this.registerAction(r),this.registerAction(c),this.registerAction(u),this.registerAction(o),this.enableAction("pageTransition"),"preview"===(this._aspectSiteAPI.getRenderFlag("componentViewMode")||"preview")&&(this.enableAction("bgScrub"),this.enableAction("screenIn"),this.enableAction("scrollScrub"),this.enableAction("exit"),this.enableAction("load"),this.enableAction("modeChange")),this._registerTriggers(),e.registerToAddedRenderedRootsDidLayout(g.bind(this))}function g(t){e.some(t,this._siteData.isPopupPage.bind(this._siteData))&&this.handleNavigationComplete()}d.prototype.previewAnimation=function(e,t,i,n){var s=this._aspectSiteAPI.getPageById(t).sequence();return s.add(e,i.name,i.duration,i.delay,i.params),s.add(e,"BaseClear",0,0,{props:"clip,clipPath,webkitClipPath,opacity,transform,transformOrigin",immediateRender:!1}),n&&s.onCompleteAll(n),s.execute()},d.prototype.previewTransition=function(e,t,i,n,s){var a;if(a="masterPage"===i?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var o=a.sequence();return o.add({sourceRefs:e,destRefs:t},n.name,n.duration,n.delay,n.params),o.add(e.concat(t),"BaseClear",0,0,{props:"clip,clipPath,webkitClipPath,opacity,transform,transformOrigin",immediateRender:!1}),s&&o.onCompleteAll(s),o.execute()}},d.prototype.stopPreviewAnimation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this._aspectSiteAPI.getMasterPage(),n=this._aspectSiteAPI.getCurrentPopup()||this._aspectSiteAPI.getCurrentPage();n.stopSequence(e,t),i.stopSequence(e,t)},d.prototype.enableAction=function(e){this._actions[e]&&this._actions[e].shouldEnable()&&this._actions[e].enableAction()},d.prototype.isActionDisabled=function(e){return this._actions[e]&&!this._actions[e].isEnabled()},d.prototype.needToRunPreConditions=function(e){var t=e.name,i=this._actions[t];return!!i&&(!i.needToRunPreConditions||i.needToRunPreConditions(e))},d.prototype.disableAction=function(e){this._actions[e]&&this._actions[e].disableAction()},d.prototype.executeAction=function(t,i){var n=e.drop(arguments,2);if(this._actions[t]){var s=this._actions[t];s.executeAction.apply(s,[i].concat(n))}},d.prototype.registerBehaviors=function(t,i,n){0!==n.length&&(n=e.isString(n)?JSON.parse(n):n,n=e.map(n,(function(n){return e.assign({},n,{pageId:i,sourceId:t,targetId:n&&n.targetId||t})})),this.unRegisterBehaviors(t,n,!1),this._behaviors=this._behaviors.concat(n),this._propagateBehaviorsUpdate(this._behaviors))},d.prototype.unRegisterBehaviors=function(t,i,n){n=!1!==n,this._behaviors=e.reject(this._behaviors,{sourceId:t}),n&&this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.resetBehaviorsRegistration=function(){this._previouslyRegisteredPages=[],this._behaviors=[],this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.registerNextPageTransition=function(t,i,n,s,a,o,r,c){this._isDuringPageTransition=!0,this._actions.pageTransition.registerNextPageTransition(t,i,n,s,a,o,r,c),this._actions.screenIn.registerPageTransitionDuration(a),e.forEach(this._pageTransitionStarted,(function(e){e()}))},d.prototype.registerPageTransitionComplete=function(t){e.isFunction(t)&&this._pageTransitionComplete.push(t)},d.prototype.registerPageTransitionStarted=function(t){e.isFunction(t)&&this._pageTransitionStarted.push(t)},d.prototype.registerToPageNavigationCanceled=function(t){e.isFunction(t)&&this._pageNavigationCanceled.push(t)},d.prototype.handlePagePageNavigationCanceled=function(){this._aspectSiteAPI.endingPageTransition(),this._isDuringPageTransition=!1,e.forEach(this._pageNavigationCanceled,(function(e){e()})),this._pageNavigationCanceled=[],this.handleNavigationComplete()},d.prototype.handlePageTransitionComplete=function(t,i){this._aspectSiteAPI.endingPageTransition(),this._isDuringPageTransition=!1,e.forEach(this._pageTransitionComplete,(function(e){e(t,i)})),this._pageTransitionComplete=[],this.handleNavigationComplete()},d.prototype.registerNavigationComplete=function(t){e.isFunction(t)&&this._navigationComplete.push(t)},d.prototype.registerNavigationError=function(t,i){e.isFunction(i)&&(this._navigationError[t]=i)},d.prototype.unregisterNavigationError=function(e){delete this._navigationError[e]},d.prototype.handleNavigationComplete=function(){this._isDuringPageTransition||(this._aspectSiteAPI.endingPageTransition(),e.forEach(this._navigationComplete,(function(e){e()})),this._navigationComplete=[],this._pageNavigationCanceled=[])},d.prototype.registerNextBGPageTransition=function(e,t,i,n){this._actions.pageTransition.registerNextBGPageTransition(e,t,i,n)},d.prototype.registerNextAnchorScroll=function(e){this._actions.pageTransition.registerNextAnchorScroll(e)},d.prototype.hasNextAnchorScroll=function(){return this._actions.pageTransition.hasNextAnchorScroll()},d.prototype.registerComponentsExit=function(e,t){this._actions.exit.registerComponentsExit(e,t)},d.prototype.registerAction=function(t){var i=new t(this._aspectSiteAPI),n=[].concat(i.ACTIONS_SUPPORTED||i.ACTION_NAME);e.forEach(n,function(e){if(this._actions[e])throw new Error("Action ".concat(e," already registered"));if(!e)throw new Error("Action missing it's ACTION_NAME parameter, cannot register it");this._actions[e]=i}.bind(this))},d.prototype._propagateTrigger=function(t){var i=arguments;e.forEach(this._actions,(function(n){e.includes(n.ACTION_TRIGGERS,t)&&n.handleTrigger.apply(n,i)})),e.forEach(e.get(this._registeredCallbacks,[t],[]),(function(e){return e(t)}))},d.prototype.registerTriggerCallback=function(t,i){e.set(this._registeredCallbacks,[t],e.get(this._registeredCallbacks,[t],[]).push(i))},d.prototype._propagatePageChangeTriggerAfterLayout=function(){if(this._noopFirstLayout&&!this._didFirstLayout&&this._aspectSiteAPI.notifyOnRendered(),this._didPageChange||!this._noopFirstLayout&&!this._didFirstLayout){this._noopFirstLayout=!1;var e=this._aspectSiteAPI.getSiteData(),t=e.getExistingRootNavigationInfo(e.getPrimaryPageId());this._aspectSiteAPI.isPageAllowedAndLoaded(t)&&this._propagateTrigger(l.PAGE_CHANGED)}this._didPageChange=!1,this._propagateTrigger(l.DID_LAYOUT)},d.prototype._enablePageChangeTransitionsAfterLayout=function(){this._didFirstLayout?this._didPageChange=!0:this._didFirstLayout=!0},d.prototype.reloadPageAnimations=function(){this._propagateTrigger(l.PAGE_RELOADED)},d.prototype._propagateBehaviorsUpdate=function(t){e.forEach(this._actions,(function(i){i.handleBehaviorsUpdate(e.clone(t))}))},d.prototype._registerTriggers=function(){this._aspectSiteAPI.registerToSiteReady(this._propagateTrigger.bind(this,l.SITE_READY)),this.registerPageTransitionComplete(this._propagateTrigger.bind(this,l.TRANSITION_ENDED)),this.registerPageTransitionStarted(this._propagateTrigger.bind(this,l.TRANSITION_STARTED)),this._aspectSiteAPI.registerToUrlPageChange(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToSiteReady(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToDidLayout(this._propagatePageChangeTriggerAfterLayout.bind(this)),this._aspectSiteAPI.registerToScroll(this._propagateTrigger.bind(this,l.SCROLL)),this._aspectSiteAPI.registerToResize(this._propagateTrigger.bind(this,l.RESIZE)),this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,l.MODE_CHANGED_INIT)),this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,l.MODE_CHANGED_EXECUTE))},d.prototype.actionsRemoved=function(e){this._propagateTrigger(l.ACTIONS_REMOVED,e)},d.prototype.actionsAddedLayouted=function(e){this._propagateTrigger(l.ACTIONS_ADDED_LAYOUTED,e)},d.prototype.isInPageTransition=function(){return this._isDuringPageTransition},t.siteAspectsRegistry.registerSiteAspect("actionsAspect",d)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(9),i(2),i(16),i(8),i(72)],void 0===(s=function(e,t,i,n,s,a){"use strict";var o=i.mediaConsts.balataConsts,r=n.triggerTypesConsts,c={BackgroundParallax:[o.BALATA,o.MEDIA],BackgroundReveal:[o.BALATA,o.MEDIA],BackgroundZoom:[o.BALATA,o.MEDIA],BackgroundFadeIn:[o.BALATA],BackgroundBlurIn:[o.BALATA,o.MEDIA],SiteBackgroundParallax:[]};function u(e,t){if(e===r.SCROLL)return t;var i=this._aspectSiteAPI.getSiteAspect("windowScrollEvent");return i&&i.getScrollPosition?i.getScrollPosition():this._aspectSiteAPI.getSiteScroll()}function p(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._liveSequenceIds=[],this._currentPageBehaviors=[],this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1,this.didFireInitialResizeEvent=!1}return Object.freeze(c),p.prototype=e.create(Object.prototype,{constructor:p,ACTION_TRIGGERS:[r.PAGE_CHANGED,r.PAGE_RELOADED,r.TRANSITION_ENDED,r.SCROLL,r.RESIZE],ACTION_NAME:"bgScrub",_currentScroll:{x:0,y:0},_currentPopupScroll:{x:0,y:0},shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),n=this._siteData.isMobileView();return e&&!t&&!i&&!n},enableAction:function(){this._isEnabled||(this.initiateBehaviors(),this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this._currentPageBehaviors=[],this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},executeAction:function(){e.isEmpty(this._currentPageBehaviors)||this.setAnimationsProgress()},setSequenceProgress:function(e,i,n){var s=n.getSequence(e.sequenceId);s?s.progress(i):t.loggingUtils.logger.reportBI(this._siteData,a.NO_SEQUENCE_TO_RUN_ANIMATIONS_ON,{sequenceId:e.sequenceId})},setAnimationsProgress:function(){var t=Math.max(this._currentScroll.y,0);e.forEach(this._liveSequenceIds,function(e){if(this.isComponentInViewport(e.compId,e.parentId)){var i=(this._viewportHeight+t-e.componentTop)/e.maxTravel;this.setSequenceProgress(e,i,this.getComponentParent(e.parentId))}}.bind(this))},getComponentMeasure:function(t){var i=this._siteData.measureMap||{};return{height:e.get(i,["height",t],0),top:e.get(i,["absoluteTop",t],0)}},setSiteMeasure:function(){this._viewportHeight=this._siteData.getScreenHeight(),this._siteHeight=this.getSiteHeight()-this._siteData.getWixTopAdHeight()},initiateBehaviors:function(){this._currentPageBehaviors=this.getCurrentPageBehaviors(this._behaviors,this._siteData.getPrimaryPageId())},getComponentParent:function(e){return"masterPage"===e?this._aspectSiteAPI.getMasterPage():"siteBackground"===e?this._aspectSiteAPI.getComponentById("SITE_BACKGROUND"):this._aspectSiteAPI.getCurrentPage()},isComponentInViewport:function(e,t){if(i.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,t))return!0;var n=this._currentScroll,s=this._aspectSiteAPI.getCurrentPopupId();return s&&s===this._aspectSiteAPI.getRootOfComponentId(e)&&(n=this._currentPopupScroll),i.viewportUtils.isInViewport(this._aspectSiteAPI,n,e)},getSequenceParams:function(){return{suppressReactRendering:!1,forgetSequenceOnComplete:!1,paused:!0}},getCurrentPageBehaviors:function(t,i){return e.filter(t,function(e){return e.action===this.ACTION_NAME&&(e.pageId===i||"masterPage"===e.pageId||"siteBackground"===e.pageId)}.bind(this))},createSequences:function(){var t=!1;(this._liveSequenceIds=e.map(this._currentPageBehaviors,function(i){var n="siteBackground"===i.pageId,s=this.getComponentParent(i.pageId).sequence(),a=this.getComponentMeasure(i.targetId),o=this.animations.getProperties(i.name),r=(o.getMaxTravel||e.noop)(a,this._viewportHeight,this._siteHeight)||this._viewportHeight,u=i.params||{};u.browserFlags=this._siteData.browserFlags(),u.componentTop=a.top,u.componentHeight=a.height,u.viewPortHeight=this._viewportHeight;var p=[[i.targetId].concat(c[i.name])];s.add(p,i.name,i.duration,i.delay,u),t=o.shouldDisableSmoothScrolling||t;var l=s.execute(this.getSequenceParams());return{path:p,compId:i.targetId,parentId:i.pageId,behaviorName:i.name,componentTop:n?this._viewportHeight:a.top,componentHeight:a.height,maxTravel:r,sequenceId:l}}.bind(this)),s.isOpen("DisableSmoothScrolling",this._siteData))&&(t&&this._siteData.browserFlags().shouldDisableSmoothScrolling&&this._aspectSiteAPI.getSiteAspect("mouseWheelOverride").overrideMouseWheel())},handleTrigger:function(e,t){if(this._isEnabled)switch(this._currentScroll=u.call(this,e,t),this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll(),e){case r.PAGE_CHANGED:case r.TRANSITION_ENDED:this.clearAllAndReload(0),this._animateOnNextTick=!0,this._behaviorsUpdated=!1;break;case r.PAGE_RELOADED:case r.SCROLL:case r.RESIZE:(this._behaviorsUpdated||this._viewportHeightUpdated)&&(this.clearAllAndReload(0),this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1),this._animateOnNextTick=!0}},_shouldForceResizeEvent:function(){!this._siteData.measureMap||this.didFireInitialResizeEvent&&this._siteData.getScreenHeight()===this._viewportHeight||(this.didFireInitialResizeEvent=!0,this._viewportHeight=this._siteData.getScreenHeight(),this._viewportHeightUpdated=!0,this.handleTrigger(r.RESIZE))},_executeActionOnTick:function(){this._shouldForceResizeEvent(),this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},clearAllAndReload:function(e){this.stopAndClearAnimations(e),this.initiateBehaviors(),this.setSiteMeasure(),this.createSequences()},stopAndClearAnimations:function(t){var i=this,n=this._aspectSiteAPI.getSiteAspect("mouseWheelOverride");n&&n.releaseMouseWheel&&n.releaseMouseWheel(),t=e.isNumber(t)?t:1,e.forEach(this._liveSequenceIds,(function(e){var n=i.getComponentParent(e.parentId);n&&n.getSequence(e.sequenceId)&&n.stopSequence(e.sequenceId,t)})),this._liveSequenceIds=[]},handleBehaviorsUpdate:function(e){this._behaviors=e,this._behaviorsUpdated=!0},getSiteHeight:function(){var t=this._aspectSiteAPI.getSiteData().measureMap||{},i=this._aspectSiteAPI.getRenderFlag("extraSiteHeight");return e.get(t,"height.masterPage",0)+(t.siteMarginBottom||0)+(i||0)}}),p}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(16),i(94)],void 0===(s=function(e,t,i){"use strict";var n=t.triggerTypesConsts;function s(){i.apply(this,arguments),this._windowScrollAspect=this._aspectSiteAPI.getSiteAspect("windowScrollEvent"),this._currentScroll=this.getCurrentScroll(),this._previousScroll=void 0,this._accumulatedScroll=0}return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.SCROLL,n.PAGE_CHANGED,n.RESIZE,n.ACTIONS_ADDED_LAYOUTED,n.ACTIONS_REMOVED,n.DID_LAYOUT],ACTION_NAME:"scrollScrub",ACTIONS_SUPPORTED:["scrollScrub"],runAction:function(t){this._previousScroll=this._currentScroll,this._currentScroll=this.getCurrentScroll(),this._accumulatedScroll=this.getAccumulatedScroll(),t=e.assign(t,{scroll:{previous:this._previousScroll,current:this._currentScroll,accumulatedScroll:this._accumulatedScroll}}),this.triggerActions(e.keys(this._currentActions),t)},getAccumulatedScroll:function(){var e=this._currentScroll.direction!==this._previousScroll.direction,t=Math.abs(this._currentScroll.position.y-this._previousScroll.position.y);return e?0:this._accumulatedScroll+t},getCurrentScroll:function(){if(!this._windowScrollAspect)return{};var t=this._windowScrollAspect.getScrollPosition();return{direction:this._windowScrollAspect.getScrollDirection(t),position:e.defaults(t,{x:0,y:0})}},handleActionTrigger:function(e){switch(e){case n.ACTIONS_REMOVED:case n.ACTIONS_ADDED_LAYOUTED:break;case n.RESIZE:case n.DID_LAYOUT:case n.PAGE_CHANGED:case n.SCROLL:this.executeOnNextTick(this.runAction)}},shouldEnable:function(){return"undefined"!=typeof window},resetActionState:e.noop}),s}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(16),i(94)],void 0===(s=function(e,t,i,n){"use strict";var s=i.triggerTypesConsts;function a(){n.apply(this,arguments)}function o(i){return e.pickBy(i,{sourceId:t.siteConstants.SITE_STRUCTURE_ID})}return a.prototype=e.create(n.prototype,{constructor:a,ACTION_TRIGGERS:[s.SITE_READY,s.PAGE_RELOADED,s.PAGE_CHANGED,s.DID_LAYOUT,s.ACTIONS_REMOVED,s.ACTIONS_ADDED_LAYOUTED],ACTION_NAME:"load",ACTIONS_SUPPORTED:["load"],shouldEnable:e.constant(!0),runAction:function(){var t=e(this._currentActions).omit(e.keys(this._triggeredOnce)).keys().value();this.triggerActions(t)},handleActionTrigger:function(t){switch(t){case s.ACTIONS_REMOVED:this._triggeredOnce=e(this._triggeredOnce).omit(e.keys(arguments[1])).omit(e.keys(o(this._currentActions))).value();break;case s.SITE_READY:case s.PAGE_RELOADED:case s.PAGE_CHANGED:case s.DID_LAYOUT:this.executeOnNextTick(this.runAction)}},resetActionState:e.noop}),a}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(16),i(9),i(94)],void 0===(s=function(e,t,i,n,s){"use strict";var a=i.triggerTypesConsts;function o(){s.apply(this,arguments),this._currentScroll={x:0,y:0},this._currentPopupScroll={x:0,y:0}}return o.prototype=e.create(s.prototype,{constructor:o,ACTION_TRIGGERS:[a.SCROLL,a.RESIZE,a.ACTIONS_ADDED_LAYOUTED,a.ACTIONS_REMOVED,a.DID_LAYOUT],ACTION_NAME:"screenIn",ACTIONS_SUPPORTED:["screenIn"],getComponentParent:function(e){return this._aspectSiteAPI.getPageById(e)},isComponentInViewport:function(i,n){var s=this._aspectSiteAPI.getCurrentPopupId()===i.pageId?this._currentPopupScroll:this._currentScroll;return n=e.isNumber(n)?n:.15,t.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,i.sourceId)||t.viewportUtils.isInViewport(this._aspectSiteAPI,s,i.sourceId,n)||this.isChildOfFixedFooter(i.pageId,i.sourceId)||this.isPinnedElement(i.sourceId)||this.isChildOfPopover(i.sourceId,i.pageId)},isChildOfFixedFooter:function(e,t){var i=!1,s=n.measurerUtils.isFooterFixedPosition();if("masterPage"===e&&s){var a=this._aspectSiteAPI.getComponentById("SITE_FOOTER");i=this.isDescendantOf(a.props.structure,t)}return i},isChildOfPopover:function(e,t){return"wysiwyg.viewer.components.Popover"===this._aspectSiteAPI.getParentComponentType(e,t)},isPinnedElement:function(t){var i=this._aspectSiteAPI.getComponentById(t);if(i)return e.get(i,"props.structure.layout.fixedPosition")},isDescendantOf:function(t,i){return!!t.components&&e.some(t.components,function(e){return e.id===i||this.isDescendantOf(e,i)}.bind(this))},runScreenInActions:function(t){var i=e(t).omit(e.keys(this._triggeredOnce)).pickBy(this.isComponentInViewport).keys().value();this.triggerActions(i)},runAction:function(){var t=e.pickBy(this._currentActions,["name","screenIn"]);this.runScreenInActions(t)},handleActionTrigger:function(t,i){var n=this._aspectSiteAPI.getSiteAspect("windowScrollEvent");switch(t===a.SCROLL?this._currentScroll=e.pick(i,["x","y"]):this._currentScroll=n.getScrollPosition()||this._currentScroll,this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll(),t){case a.ACTIONS_REMOVED:this._triggeredOnce=e.omit(this._triggeredOnce,e.keys(e.toArray(arguments)[1]));break;case a.DID_LAYOUT:case a.SCROLL:case a.RESIZE:case a.ACTIONS_ADDED_LAYOUTED:var s=1e3*Math.max(this._delayActionByTransitionDuration-.2,0);s>0?e.delay(function(){this._delayActionByTransitionDuration=0,this.executeOnNextTick(this.runAction)}.bind(this),s):this.executeOnNextTick(this.runAction)}},shouldEnable:function(){return"undefined"!=typeof window},resetActionState:e.noop}),o}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(7),i(2),i(16),i(6)],void 0===(s=function(e,t,i,n,s){"use strict";var a=n.triggerTypesConsts,o={ENTER:i.siteConstants.Animations.Modes.AnimationType.ENTER,LEAVE:i.siteConstants.Animations.Modes.AnimationType.LEAVE,TRANSITION:i.siteConstants.Animations.Modes.AnimationType.TRANSITION},r={};r[o.ENTER]=o.LEAVE,r[o.LEAVE]=o.ENTER,Object.freeze(r);var c={};c[o.ENTER]="modeIn",c[o.LEAVE]="modeOut",c[o.TRANSITION]="modeChange",Object.freeze(c);var u={"wysiwyg.viewer.components.SiteButton":i.siteConstants.Animations.TransitionType.NO_SCALE,"wysiwyg.viewer.components.WRichText":i.siteConstants.Animations.TransitionType.NO_DIMESIONS};function p(t,i,n){var s=e.get(n,"params.modeIds");switch(n.action){case"modeIn":return"enter"===t[n.targetId]&&e.every(s,(function(e){return!0===i[e]}));case"modeOut":return"leave"===t[n.targetId]&&e.every(s,(function(e){return!1===i[e]}));case"modeChange":return"transition"===t[n.targetId]&&e.every(s,(function(t){return!e.isUndefined(i[t])}));default:return!1}}function l(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._behaviorsById={},this.playingSequences={},this.componentAnimationsInfo={}}return l.prototype=e.create(Object.prototype,{constructor:l,ACTION_TRIGGERS:[a.MODE_CHANGED_INIT,a.MODE_CHANGED_EXECUTE],ACTION_NAME:"modeChange",ACTIONS_SUPPORTED:["modeChange","modeIn","modeOut"],shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice();return e&&!t&&!i},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this.revertHideElementsByAnimationType(this._behaviorsById),this._behaviorsById={},this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},needToRunPreConditions:function(){return!1},_executeActionOnTick:function(){this._animateOnNextTick&&(this._executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){this._behaviorsById={},e.forEach(this.playingSequences,function(e,t){this.getComponentPage(e.parentId).stopSequence(e.sequence.getId(),1),this.handleSequenceEnded(t,e.parentId,e.type)}.bind(this)),e.forEach(this.componentAnimationsInfo,function(e,t){e.hasPendingAnimation=!1,this.handleSequenceEnded(t,e.pageId,e.type)}.bind(this))},_executeAction:function(){e.isEmpty(this._behaviorsById)||e.assign(this.playingSequences,this.playJsAnimations())},executeAction:function(){this.handleTrigger.apply(this,arguments)},clearPlayedBehaviors:function(t){this._behaviorsById=e.omitBy(this._behaviorsById,(function(e,i){return t[i]}))},convertBehaviorTimingFunctionToCSS:function(e){return i.siteConstants.Animations.TimingFunctions[e]},clearCssTransitionFromNode:function(e){e.css({"transition-property":"","transition-duration":"","transition-delay":"","transition-timing-function":"","-webkit-transition-timing-function":"","-moz-transition-timing-function":"","-o-transition-timing-function":""})},addCssTransitionToNode:function(e,t){var i=this.convertBehaviorTimingFunctionToCSS(e.params.timingFunction);t.css({"transition-property":"background-color, color !important","transition-duration":"".concat(e.duration,"s !important"),"transition-delay":"".concat(e.delay,"s !important"),"transition-timing-function":"".concat(i," !important"),"-webkit-transition-timing-function":"".concat(i," !important"),"-moz-transition-timing-function":"".concat(i," !important"),"-o-transition-timing-function":"".concat(i," !important")})},initCssTransitions:function(){var i=e.filter(this._behaviorsById,{animationType:"transition"});i.length&&e.forEach(i,function(e){var i=e.targetId,n=t(this.getComponentNode(e.pageId,i));this.componentAnimationsInfo[i].didCssTransitionStartExecuting||(this.componentAnimationsInfo[i].didCssTransitionStartExecuting=!0,this.addCssTransitionToNode(e,n))}.bind(this))},handleSequenceEnded:function(e,i,n){n===o.TRANSITION&&this.clearCssTransitionFromNode(t(this.getComponentNode(i,e))),delete this.playingSequences[e],this.notifyAnimationEnded(e)},playJsAnimations:function(){var t={},i={};return e.forEach(this._behaviorsById,function(e){var n=this.getComponentPage(e.pageId),s=e.targetId,a=this.playingSequences[s],o=a&&r[a.type]===e.animationType,c=a&&a.type===e.animationType;t[s]=!0,c||(o?this.reverseAnimation(e):(a&&n.stopSequence(a.sequence.id),i[s]={sequence:n.sequence(),parentId:e.pageId,type:e.animationType},this.addAnimationToSequence(e,this.componentAnimationsInfo[e.targetId],i[e.targetId].sequence)))}.bind(this)),e.forEach(i,this.executeSequenceIfNeeded.bind(this)),this.clearPlayedBehaviors(t),i},reverseAnimation:function(e){var t=e.targetId,i=this.getComponentPage(e.pageId),n=this.playingSequences[t];n.type=e.animationType,this.componentAnimationsInfo[t].hasPendingAnimation=!1,i.reverseSequence(n.sequence.getId())},executeSequenceIfNeeded:function(e,t){var i=e.sequence;if(i.hasAnimations()){var n=this.componentAnimationsInfo[t].progress,s=this.handleSequenceEnded.bind(this,t,e.parentId,e.type);this.componentAnimationsInfo[t].hasPendingAnimation=!1,i.onCompleteAll(s),i.onReverseAll(s),n&&i.onInit((function(e){e.progress(1-n)})),i.execute()}},getComponentPage:function(e){return this._aspectSiteAPI.getPageById(e)},getPageComponents:function(e){return this._aspectSiteAPI.getPageComponents(e)},getComponentNode:function(e,t){var i=this.getPageComponents(e)[t];return i?s.findDOMNode(i):null},addAnimationToSequence:function(e,t,n){var s=this.getPageComponents(e.pageId),a=e.targetId,r="modeOut"===e.action?"clip,clipPath,webkitClipPath,transform,transformOrigin":"clip,clipPath,webkitClipPath,opacity,transform,transformOrigin";if(!s[a])return null;var c=s[a].props.structure,p=e.duration,l=e.delay;if(e.animationType===o.TRANSITION){var d=t.prevLayout,g=e.name+(u[c.componentType]||i.siteConstants.Animations.TransitionType.SCALE);n.add(a,g,p,l,{from:d})}else n.add(a,e.name,p,l,e.params,0);return n.add(a,"BaseClear",0,0,{props:r,immediateRender:!1}),a},hideElementsByAnimationType:function(t){e.forEach(t,function(e,t){if(this.animations.getProperties(e.name).hideOnStart){var i=this.getComponentNode(e.pageId,t),n=this.playingSequences[t],s=n&&r[n.type]===e.animationType;i&&!s&&(i.style.opacity=0)}}.bind(this))},revertHideElementsByAnimationType:function(t){e.forEach(t,function(t){e.forEach(t,function(e,t){if(this.animations.getProperties(e.name).hideOnStart){var i=this.getComponentNode(e.pageId,t);i&&(i.style.opacity="")}}.bind(this))}.bind(this))},initiateBehaviors:function(t,i,n,s,a){this._behaviorsById=e.assign(this._behaviorsById,i),e.forEach(n,function(e,i){var n=this.componentAnimationsInfo[i]=this.componentAnimationsInfo[i]||{};n.pageId=t,n.type=e,n.hasPendingAnimation=!0,n.onComplete=a,e===o.TRANSITION&&(n.prevLayout=s[i])}.bind(this))},handleBehaviorsUpdate:function(e){this._behaviors=e},runJsAnimationsOnNextTick:function(){this._animateOnNextTick=!0},runJsAnimationsImmediately:function(){this._executeAction()},notifyAnimationEnded:function(e){if(this.componentAnimationsInfo[e]&&!this.componentAnimationsInfo[e].hasPendingAnimation){var t={};t[e]=this.componentAnimationsInfo[e].type;var i=this.componentAnimationsInfo[e].onComplete;delete this.componentAnimationsInfo[e],i(t)}},handleDidLayout:function(){this._aspectSiteAPI.unRegisterFromDidLayout();var e=this._siteData.getBrowser();e&&(e.ie||e.edge||e.safari)?this.runJsAnimationsImmediately():this.runJsAnimationsOnNextTick()},handleReverseTransitionAnimations:function(t){var i=e.transform(t,(function(e,t,i){t===o.TRANSITION&&e.push(i)}),[]),n=e.transform(this.playingSequences,(function(e,t,i){t.type===o.TRANSITION&&e.push(i)}),[]),s=e.intersection(i,n);e.forEach(s,function(e){var t=this.componentAnimationsInfo[e],i=this.getComponentPage(t.pageId),n=this.playingSequences[e].sequence.getId(),s=i.getSequence(n),a=this.getComponentNode(t.pageId,e);t.progress=s.progress(),s.set(a,{clearProps:"clip,opacity"}),i.stopSequence(n,1),delete this.playingSequences[e]}.bind(this))},handleTrigger:function(t,i){var n,s,o;if(this._isEnabled)switch(t){case a.MODE_CHANGED_INIT:var r=(n=this._behaviors,s=i.componentAnimations,o=i.modeChanges,e(n).filter(e.partial(p,s,o)).map((function(t){return e.assign({animationType:s[t.targetId]},t)})).keyBy("targetId").value()),c=e.pick(i.componentAnimations,e.keys(r)),u=e.omit(i.componentAnimations,e.keys(r));this.initiateBehaviors(i.pageId,r,c,i.transitioningComponentsPrevLayout,i.onComplete),this.handleReverseTransitionAnimations(i.componentAnimations),this.initCssTransitions(),i.onComplete(u);break;case a.MODE_CHANGED_EXECUTE:this.hideElementsByAnimationType(this._behaviorsById),this._aspectSiteAPI.registerToDidLayout(this.handleDidLayout.bind(this))}else i&&i.onComplete&&i.onComplete(i.componentAnimations)}}),l}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(16)],void 0===(s=function(e,t,i){"use strict";var n=i.triggerTypesConsts;function s(e,t){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=t,this._isEnabled=!1,this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null}return e.assign(s.prototype,{ACTION_TRIGGERS:[n.PAGE_CHANGED],ACTION_NAME:"pageTransition",shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),n=this._siteData.isMobileView();return e&&!t&&!i&&!n},enableAction:function(){this._isEnabled=!0},disableAction:function(){this._isEnabled=!1},isEnabled:function(){return this._isEnabled},executeAction:function(){this.executeTransitions(this._nextPageTransition,this._nextPageBGTransition,this._nextPageInitialScrollData),this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null},handleTrigger:function(t){this._isEnabled||e.isEmpty(this._nextPageTransition)||(this._nextPageTransition.duration=0,this._nextPageTransition.transitionName="NoTransition"),t===n.PAGE_CHANGED&&this.executeAction()},handleBehaviorsUpdate:function(e){this._behaviors=e},registerNextPageTransition:function(e,t,i,n,s,a,o,r){this._nextPageTransition={comp:e,previousRef:t,currentRef:i,transitionName:n,duration:s,delay:a,params:o,callbacks:r}},registerNextBGPageTransition:function(e,t,i,n){this._nextPageBGTransition={comp:e,previousRef:t,currentRef:i,callbacks:n}},registerNextAnchorScroll:function(e){this._nextPageInitialScrollData=e},hasNextAnchorScroll:function(){return null!==this._nextPageInitialScrollData},getNormalizedTransitionDuration:function(e,t){var i=e;return(t=t||{}).width?i=e*t.width/t.siteWidth:t.height&&(i=e*(Math.max(t.height,t.screenHeight)/t.screenHeight)),Math.min(i,1.2)},executeTransitions:function(i,n,s){var a,o,r=this._aspectSiteAPI,c="function"==typeof i.params?i.params():i.params,u=this.getNormalizedTransitionDuration(i.duration||0,c);if(!e.isEmpty(i)){a=i.comp.sequence(),(o=i.callbacks||{}).onStart&&a.onStartAll(o.onStart),o.onInterrupt&&a.onInterruptAll(o.onInterrupt),o.onComplete&&a.onCompleteAll(o.onComplete);var p={sourceRefs:i.previousRef,destRefs:i.currentRef};a.add(p,i.transitionName,u,i.delay,c).add([i.previousRef,i.currentRef],"BaseClear",0,0,{props:"opacity,x,y",immediateRender:!1}).execute()}e.isEmpty(n)||n.comp.transition(n.previousRef,n.currentRef,i.transitionName,u,i.delay,c,n.callbacks);var l=r.getSiteData(),d=t.scrollAnchors.calcAnchorScrollToPosition(s,r);s=d.anchorQuery,this.animations.animate("BaseScroll",r.getSiteContainer(),u,i.delay,{x:d.x||0,y:d.y||0,callbacks:{onComplete:function(){var e=this._aspectSiteAPI.getSiteAspect("anchorChangeEvent");e&&e.setSelectedAnchorAsync(l,s,l.getPrimaryPageId(),t.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL),this._aspectSiteAPI.notifyOnRendered()}.bind(this)}})}}),s}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(16)],void 0===(s=function(e,t){"use strict";var i=t.triggerTypesConsts;function n(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._liveSequenceIds=[],this._animateOnNextTick=!1,this._pendingComponentExits=[]}return n.prototype=e.create(Object.prototype,{constructor:n,ACTION_TRIGGERS:[i.PAGE_CHANGED,i.PAGE_RELOADED],ACTION_NAME:"exit",shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),n=this._siteData.isMobileView();return e&&!t&&!i&&!n},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){if(this._isEnabled){this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations();var t=e.map(this._pendingComponentExits,"callback");this._pendingComponentExits=[],this._isEnabled=!1,e.forEach(t,(function(e){e()}))}},isEnabled:function(){return this._isEnabled},executeAction:function(){if(!e.isEmpty(this._pendingComponentExits)){var t=this._pendingComponentExits;this._pendingComponentExits=[],e.forEach(t,function(e){this._liveSequenceIds=this._liveSequenceIds.concat(this.playPageAnimations(e.leavingCompIds,e.callback))}.bind(this))}},playPageAnimations:function(t,i){var n={},s={},a=[],o=e(this._behaviors).filter(function(i){return i.action===this.ACTION_NAME&&e.includes(t,i.sourceId)}.bind(this)).keyBy("sourceId").value();e.forEach(o,function(e){var t=this.getComponentParent(e.pageId);t.refs[e.sourceId]&&(s[e.pageId]||(s[e.pageId]=t.sequence(),n[e.pageId]=[]),n[e.pageId].push(this.addAnimationToSequence(e,s)))}.bind(this));var r=1;function c(){0===--r&&i()}return e.forEach(s,(function(t,i){t.hasAnimations()&&(r++,t.onCompleteAll(c),t.onInterruptAll(c),n[i]=e.compact(n[i]),a.push({parentId:i,sequenceId:t.getId()}),t.execute())})),c(),a},getComponentParent:function(e){return this._aspectSiteAPI.getPageById(e)},addAnimationToSequence:function(e,t){var i=t[e.pageId];return i.add(e.targetId,e.name,e.duration,e.delay,e.params,0),i.add(e.targetId,"BaseClear",0,0,{props:"clip,clipPath,webkitClipPath,opacity,transform,transformOrigin",immediateRender:!1}),e.targetId},registerComponentsExit:function(e,t){this._isEnabled?(this._pendingComponentExits.push({leavingCompIds:e,callback:t}),this._animateOnNextTick=!0):t()},handleTrigger:function(){},handleBehaviorsUpdate:function(e){this._behaviors=e},_executeActionOnTick:function(){this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){e.forEach(this._liveSequenceIds,function(e){var t=this.getComponentParent(e.parentId);t&&t.stopSequence(e.sequenceId,1)}.bind(this)),this._liveSequenceIds=[]}}),n}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(16),i(94)],void 0===(s=function(e,t,i){"use strict";var n=t.triggerTypesConsts;function s(){i.apply(this,arguments),this._componentsLastVisableState={},this._registeredActions={},this._isEnabled=!0,this._currentPageId=null}return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.ACTIONS_ADDED_LAYOUTED,n.ACTIONS_REMOVED,n.DID_LAYOUT,n.PAGE_CHANGED],ACTION_NAME:"viewport",ACTIONS_SUPPORTED:["viewportEnter","viewportLeave"],shouldEnable:e.constant(!0),isComponentHiddenOrCollapsed:function(e){var t=this._siteData.measureMap||{},i=t.isHidden[e],n=t.collapsed[e];return i||n},triggerViewPortEventIfNeeded:function(t,i){var n=this._aspectSiteAPI.getSiteAspect("viewportChange").get(t);if(n&&n.in&&this._componentsLastVisableState[t]){var s=e.find(i,{name:"viewportLeave"});if(s)this._aspectSiteAPI.getSiteAspect("behaviorsAspect").handleAction(s)}},compVisibilityChange:function(t){if(!this._componentsLastVisableState[t]){var i=e(this._currentActions).filter({sourceId:t}).values().value();e.forEach(i,this.registerAction)}var n=e.values(this._registeredActions[t]);this.triggerViewPortEventIfNeeded(t,n),this._componentsLastVisableState[t]&&e.forEach(n,this.unRegisterAction)},checkIfCompVisibilityChanged:function(t){var i;e.isNil(this._componentsLastVisableState[t])||(i=this._componentsLastVisableState[t]),this._componentsLastVisableState[t]=this.isComponentHiddenOrCollapsed(t),e.isNil(i)||i===this._componentsLastVisableState[t]||this.compVisibilityChange(t,i,this._componentsLastVisableState[t])},registerAction:function(t){var i=t.sourceId,n=t.name,s=!0;(this._registeredActions[i]||(s=!1,this._registeredActions[i]={}),this._registeredActions[i][n])||(this._registeredActions[i][n]=t,s||this._aspectSiteAPI.getSiteAspect("viewportChange").register(i,function(t){var n=this._aspectSiteAPI.getSiteAspect("behaviorsAspect");if(t.in){var s=e.get(this._registeredActions[i],"viewportEnter");s&&n.handleAction(s)}if(t.out){var a=e.get(this._registeredActions[i],"viewportLeave");a&&n.handleAction(a)}}.bind(this),["in","out"]))},unRegisterAction:function(t){var i=t.sourceId,n=t.name;(e.isEmpty(this._registeredActions[i])||delete this._registeredActions[i][n],e.isEmpty(this._registeredActions[i]))&&(delete this._registeredActions[i],this._aspectSiteAPI.getSiteAspect("viewportChange").unregister(i))},handleActionTrigger:function(t){var i=e(this._currentActions).map("sourceId").uniq().value();switch(t){case n.DID_LAYOUT:e.forEach(i,this.checkIfCompVisibilityChanged);break;case n.PAGE_CHANGED:var s=this._siteData.getFocusedRootId();s!==this._currentPageId&&(this._currentPageId=s,this.resetActionState());break;case n.ACTIONS_ADDED_LAYOUTED:e.forEach(i,this.checkIfCompVisibilityChanged),e.forEach(this._currentActions,function(e){this._componentsLastVisableState[e.sourceId]||this.registerAction(e)}.bind(this))}},resetActionState:function(){e.forEach(this._componentsLastVisableState,function(e,t){this._aspectSiteAPI.getComponentByPageAndCompId("masterPage",t)||delete this._componentsLastVisableState[t]}.bind(this)),e.forEach(this._registeredActions,function(e,t){this._aspectSiteAPI.getComponentByPageAndCompId("masterPage",t)||delete this._registeredActions[t]}.bind(this))}}),s}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(6),i(3),i(605),i(606)],void 0===(s=function(e,t,i,n,s){"use strict";var a=s.queueActions,o=a.ADD,r=a.PLAY,c=a.PLAY_REVERSE,u=a.PAUSE,p=a.CLEAR,l=a.SEEK,d=a.EVENT_ADD,g=a.EVENT_REMOVE,h=s.addActionToQueue,f=s.addCreateActionToQueue,m=s.removeTimeline,v=s.createTimeline,y=s.addToTimeline,A=s.playTimeline,S=s.playReverseTimeline,P=s.pauseTimeline,I=s.seekTimeline,_=s.clearTimeline,D=s.addEventCallback,C=s.removeEventCallback;function E(i,n){return e(i).map((function(e){return function(e,i){var n=i.getRootOfComponentId(e),s=i.getComponentByPageAndCompId(n,e);return s?t.findDOMNode(s):null}(e,n)})).compact().value()}function b(t,i,n,s){e.map(t,(function(e){var t=e.action,a=e.data,h=void 0===a?{}:a,f=e.resolve,m=e.reject,v=e.id,b=i.getTimelineSequence(v),T=E(h.compIds,s);switch(t){case o:return y(i,n,b,T,v,h,f,m);case r:return A(b,f,m);case c:return S(b,f,m);case u:return P(b,f,m);case p:return _(i,b,v,f,m);case l:return I(b,h.progress,f,m);case d:return D(b,h,f,m);case g:return C(b,h,f,m)}}))}function T(t,i){var n=i.getSiteData(),s=n.getCurrentUrlPageId(),a=t.getPageId(),o=n.animations,r="preview"===i.getRenderFlag("componentViewMode"),c=n.isMobileView(),u=t.getIsMobileView(),p=s===a&&c===u;!function(t,i,n,s,a){var o=i.getQueues();s&&a&&e.forEach(o,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,a=e.items,o=e.createItem;o?v(i,s,n,o):a&&(b(a,i,n,t),i.setTimelineQueue(s))}))}(i,t,o,r,p),function(t,i,n,s,a){var o=i.getTimelines();e.forEach(o,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,r=e.compIds||[],c=e.sequence;if(c){var u=E(r,t);s&&a&&(!r.length||u.length)||m(i,o,n,c,u)}}))}(i,t,o,r,p),c!==u&&t.setIsMobileView(c),s!==a&&i.registerNavigationComplete((function(){return t.setPageId(s)}))}function R(e){var t=this;this._aspectSiteAPI=e;var i=e.getSiteData();this.model=new n,this.model.setPageId(i.getCurrentUrlPageId()),this.model.setUpdateCallback((function(){return T(t.model,t._aspectSiteAPI)})),this._initiated=!1}return R.prototype={createTimeline:function(e,t){return this._initiated||(this._aspectSiteAPI.registerToDidLayout(this.model.triggerImmediateUpdate),this._initiated=!0),f(this.model,e,t)},addToTimeline:function(e,t){return h(this.model,e,o,t)},clearTimeline:function(e){return h(this.model,e,p)},playTimeline:function(e){return h(this.model,e,r)},playReverseTimeline:function(e){return h(this.model,e,c)},pauseTimeline:function(e){return h(this.model,e,u)},seekTimeline:function(e,t){return h(this.model,e,l,{progress:t})},addTimelineEvent:function(e,t,i){return h(this.model,e,d,{eventName:t,handler:i})},removeTimelineEvent:function(e,t){return h(this.model,e,g,{eventName:t})}},i.siteAspectsRegistry.registerSiteAspect("TimelineAspect",R),R}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=[i(0)],void 0===(s=function(e){"use strict";return function(){var t="undefined"!=typeof Proxy?function(e,t){return new Proxy(e,t)}:function(e){return e},i={set:function(e,t,i){return"updateOnNextTick"===t&&i&&i!==e[t]&&("undefined"!=typeof requestAnimationFrame?requestAnimationFrame(c):setTimeout(c,20)),e[t]=i,!0}},n={set:function(e,i,s){return"object"===a(s)&&null!==s?e[i]=t(s,n):e[i]=s,r(),!0},deleteProperty:function(e,t){return t in e&&(delete e[t],r(),!0)}},s=t({onUpdate:e.noop,updateOnNextTick:!1},i),o=t({timelines:t({},n),timelineQueues:t({},n),isMobileView:!1,pageId:null},n);function r(){s.updateOnNextTick=!0}function c(){s.onUpdate(),s.updateOnNextTick=!1}return{getTimelines:function(){return e.clone(o.timelines)},getQueues:function(){return e.clone(o.timelineQueues)},triggerUpdate:r,triggerImmediateUpdate:c,setIsMobileView:function(e){o.isMobileView=e},getIsMobileView:function(){return o.isMobileView},setPageId:function(e){o.pageId=e},getPageId:function(){return o.pageId},setUpdateCallback:function(e){s.onUpdate=e},addActionToTimelineQueue:function(t,i){var n=e.get(o.timelineQueues,[t,"items"]);n?n.push(i):e.set(o.timelineQueues,[t,"items"],[i])},setTimelineQueue:function(t,i){i?e.set(o.timelineQueues,[t],i):delete o.timelineQueues[t]},setCreateTimelineActionToQueue:function(t,i){i?e.set(o.timelineQueues,[t,"createItem"],i):delete o.timelineQueues[t].createItem},setTimeline:function(t,i){i?e.set(o.timelines,[t],i):delete o.timelines[t]},setTimelineSequence:function(t,i){e.set(o.timelines,[t,"sequence"],i)},getTimelineSequence:function(t){return e.get(o.timelines,[t,"sequence"])},addTimelineCompId:function(t,i){var n=e.get(o.timelines,[t,"compIds"]);n?e.includes(n,i)||n.push(i):e.set(o.timelines,[t,"compIds"],[i])},setTimelineCompIds:function(t,i){e.set(o.timelines,[t,"compIds"],i)}}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t="Timeline not initiated";return{queueActions:{CREATE:"create",ADD:"add",PLAY:"play",PLAY_REVERSE:"playReverse",PAUSE:"pause",SEEK:"seek",CLEAR:"clear",EVENT_ADD:"add_event",EVENT_REMOVE:"remove_event"},addActionToQueue:function(e,t,i){var n=e.addActionToTimelineQueue,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(e,a){n(t,{id:t,action:i,data:s,resolve:e,reject:a})}))},addCreateActionToQueue:function(e,t){var i=e.setCreateTimelineActionToQueue,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(e,s){i(t,{id:t,data:n,resolve:e,reject:s})}))},removeTimeline:function(e,t,i,n,s){var a=e.setTimeline;return i.kill(n.get(),0),s.length&&i.animate("BaseClear",s,0,0,{props:"clip,clipPath,webkitClipPath,willChange,opacity,transform,transformOrigin",immediateRender:!1}),a(t),null},createTimeline:function(i,n,s,a){var o=i.setTimelineSequence,r=i.setCreateTimelineActionToQueue,c=a.data,u=a.resolve,p=a.reject,l=c.params,d=void 0===l?{}:l;(d=e.clone(d)).data=e.clone(d.data||{}),d.data.id=n;var g=s.sequence(d);return g?(o(n,g),r(n),u({id:n}),!0):(p("Timeline create: ".concat(t)),!0)},addToTimeline:function(i,n,s,a,o,r,c,u){var p=i.addTimelineCompId,l=r.compIds,d=r.params,g=r.offset;if(!s)return u("Timeline add: ".concat(t)),!0;if(e.isEmpty(a))return u("Timeline add: ".concat("Timeline has no elements")),!0;return l.forEach((function(e){return p(o,e)})),s.add(d.map((function(t){var i=t,s=i.duration,o=void 0===s?0:s,r=i.delay,c=void 0===r?0:r;return t=e.omit(t,["duration","delay"]),n.animate("TimelineAnimation",a,o,c,t)})),g),c(),!0},playTimeline:function(e,i,n){return e?(e.play(),i(),!0):(n("Timeline play: ".concat(t)),!0)},playReverseTimeline:function(e,i,n){return e?(e.reverse(),i(),!0):(n("Timeline play reverse: ".concat(t)),!0)},pauseTimeline:function(e,i,n){return e?(e.pause(),i(),!0):(n("Timeline pause: ".concat(t)),!0)},clearTimeline:function(e,i,n,s,a){var o=e.setTimelineCompIds;return i?(i.clear(),o(n),s(),!0):(a("Timeline pause: ".concat(t)),!0)},seekTimeline:function(e,i,n,s){return e?(e.seek(i),n(),!0):(s("Timeline seek: ".concat(t)),!0)},addEventCallback:function(e,i,n,s){var a=i.eventName,o=i.handler;return e?(e.event(a,o),n(),!0):(s("Timeline add event: ".concat(t)),!0)},removeEventCallback:function(e,i,n,s){var a=i.eventName;return e?(e.event(a,null),n(),!0):(s("Timeline remove event: ".concat(t)),!0)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n=[i(0),i(3),i(2),i(20)],void 0===(s=function(e,t,i,n){"use strict";function s(t,i){var n=this,a=e.get(t,[-666,"expirationDate"]);if(a&&!i){var o=function(e){return new Date(e).getTime()-Date.now()-18e5}(a),r=this.aspectState.read("instanceTimeout");r&&clearTimeout(r);var c=setTimeout((function(){var a=function(t){var a=e.get(t,["clientSpecMap"])||t;if(a){var o=e(a).mapValues((function(e){return e.instance})).omitBy((function(e){return!e})).value();e.forEach(o,(function(e,t){d.call(n,t,e)})),n._aspectSiteAPI.getSiteAspect("WidgetAspect").triggerAppInstanceUpdate(o),n._aspectSiteAPI.triggerClientSpecMapUpdatedCallbacks(a),s.call(n,a,i)}};if(n._aspectSiteAPI.getSiteData().isPreviewMode()){var o=e.get(t,[-666,"instance"]);l.call(n,a,o)}else p.call(n,a)}),o);this.aspectState.update({instanceTimeout:c})}}function o(t,n){var s="".concat(t.replace(/\/$/,""),"/_api/dynamicmodel"),a=e.isEmpty(n)?"":"?".concat(i.urlUtils.toQueryString(n));return"undefined"!=typeof window&&(s=s.replace(/^[^:]+:/,window.location.protocol)),s+a}var r=!0;function c(t,i,n){var s="error",a={url:o(t.getExternalBaseUrl(),n.urlParams),destination:["dynamicClientSpecMapLoaded"],force:!0,cache:r,syncCache:!0,transformFunc:function(){return!0},callback:function(n,a){s="success",e.invokeMap(this.reloadSpecMapPlugin,"callback"),a.visitorId&&this._aspectSiteAPI.setBiVisitorId(a.visitorId),a.siteMemberId&&this._aspectSiteAPI.setBiSiteMemberId(a.siteMemberId),a.clientSpecMap&&(this.aspectState.delete("appInstanceMap"),this._aspectSiteAPI.setClientSpecMap(a.clientSpecMap)),a.svSession&&(t.pubSvSession(a.svSession),this._aspectSiteAPI._site.notifyAspects(this._aspectSiteAPI._site.supportedEvents.svSessionChange,a.svSession)),a.hs&&t.setHubSecurityToken(a.hs),a.ctToken&&t.setCTToken(a.ctToken),i&&i(a)}.bind(this)};t.store.loadBatch([a],(function(){"error"===s&&i({status:s})})),r=!1}function u(t,i){var n=this;p.call(this,(function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.get(s.clientSpecMap,[t,"instance"]);n.updateAppInstance(t,a),n._aspectSiteAPI.triggerClientSpecMapUpdatedCallbacks(),i(a)}),(function(){return i()}))}function p(e,t){i.ajaxLibrary.ajax({type:"GET",url:o(this._aspectSiteAPI.getSiteData().getExternalBaseUrl(),{}),dataType:"json",contentType:"application/json",success:e,error:t})}function l(e,t,n){i.ajaxLibrary.ajax({type:"GET",url:"/_api/wix-html-editor-webapp/fetch-editor-client-spec-map",dataType:"json",contentType:"application/json",headers:{Authorization:t},success:e,error:n})}function d(e,t){var i=this.aspectState.read("appInstanceMap")||{};i[e]=t,this.aspectState.update({appInstanceMap:i}),g.call(this,e,t)}function g(t,i){e.forEach(this.instanceChangedRegisteredComps[t],(function(e){e.sendPostMessage({intent:"addEventListener",eventType:"INSTANCE_CHANGED",params:{instance:i}})}))}var h=function(){function t(i){var a,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.reloadSpecMapPlugin=[],this.instanceChangedRegisteredComps={},this._aspectSiteAPI=i,this.aspectState=(a=i,{read:function(t){var i=a.getAspectGlobalData("dynamicClientSpecMap");return t?e.get(i,t):i},update:function(e){a.updateAspectGlobalData("dynamicClientSpecMap",e)},delete:function(t){var i=e.set(a.getAspectGlobalData("dynamicClientSpecMap"),t,void 0);a.updateAspectGlobalData("dynamicClientSpecMap",i)}}),n&&n.reaction&&n.reaction((function(){return e.get(i.getClientSpecMap(),[-666,"instance"])}),(function(){return s.call(o,i.getClientSpecMap(),i.getSiteData().isTemplate())}),{fireImmediately:!0})}var i,o,r;return i=t,(o=[{key:"reloadClientSpecMap",value:function(t,i){var n=this._aspectSiteAPI.getSiteData();n&&n.isViewerMode()&&c.call(this,n,t,e.isObject(i)?i:{})}},{key:"getNewAppInstance",value:function(e,t){u.call(this,e,t)}},{key:"updateAppInstance",value:function(e,t){d.call(this,e,t)}},{key:"getAppInstance",value:function(t){var i=this.aspectState.read("appInstanceMap");return e.get(i,[t])}},{key:"registerToInstanceChanged",value:function(t){var i=t.props.compData.applicationId;e.set(this.instanceChangedRegisteredComps,[i,t.props.id],t)}},{key:"unRegisterToInstanceChanged",value:function(e){var t=e.props.compData.applicationId;this.instanceChangedRegisteredComps[t]&&delete this.instanceChangedRegisteredComps[t][e.props.id]}},{key:"registerReloadSpecMapPlugin",value:function(e,t){var i=this;this.reloadSpecMapPlugin.push({compPageId:e,callback:function(){i._aspectSiteAPI.getSiteData().getCurrentUrlPageId()===e&&t()}})}}])&&a(i.prototype,o),r&&a(i,r),t}();t.siteAspectsRegistry.registerSiteAspect("dynamicClientSpecMap",h)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(3),i(0),i(2)],void 0===(s=function(e,t,i){"use strict";var n="VerticalAnchorsMenuAspect";function s(e){t.forEach(e,(function(e){e()}))}function a(e,i){return e?{top:e.absoluteTop[i],left:t.get(e,"custom[".concat(i,"].backgroundLeft"),0)+e.absoluteLeft[i],height:e.height[i],width:t.get(e,"custom[".concat(i,"].backgroundWidth"),e.width[i])}:{}}function o(){var e=this.aspectSiteAPI.getAspectGlobalData(n)||{},i=this.aspectSiteAPI.getSiteData().measureMap;!e.anchorsData&&this.activeAnchorObservers.length>0&&(u.call(this,0),e=this.aspectSiteAPI.getAspectGlobalData(n)||{});var o=e;o.colorInfo=t.mapValues(e.colorInfo,(function(e){return t.mapValues(e,(function(e,n){return t.assign(e,{layout:a(i,n)})}))})),this.aspectSiteAPI.setAspectGlobalData(n,o),s(this.autoColorObservers)}function r(e,i){var s=this.aspectSiteAPI.getAspectGlobalData(n)||{},a=s;a.colorInfo=t.omit(s.colorInfo,i),this.aspectSiteAPI.setAspectGlobalData(n,a)}function c(e,t){i.imageUtils.getImageMeanBrightness(t.thumbnailImageUrl,{width:1,height:1},(function(i,n){e.updateInformation(t.compId,t.rootId,{brightness:i,alpha:n})}),(function(){return null}))}function u(e){this.activeAnchorObservers.length>0&&this.aspectSiteAPI.updateAspectGlobalData(n,{anchorsData:i.scrollAnchors.getAnchorsDataSortedByY(this.aspectSiteAPI.getSiteData(),e)})}function p(e){u.call(this,e.y),s(this.autoColorObservers)}var l=function(e){this.aspectSiteAPI=e,this.autoColorObservers=[],this.activeAnchorObservers=[],this.imagesToCheckColorOf={},t.bindAll(this,t.functionsIn(this)),e.registerToDidLayout(o.bind(this)),e.registerToScroll(p.bind(this)),e.registerToRenderedRootsChange(r.bind(this))};return l.prototype={updateInformation:function(e,i,o){var r=this.aspectSiteAPI.getSiteData().measureMap;r&&t.assign(o,{layout:a(r,e)});var c=this.aspectSiteAPI.getAspectGlobalData(n)||{};t.set(c,["colorInfo",i,e],o),this.aspectSiteAPI.setAspectGlobalData(n,c),s(this.autoColorObservers)},updateImageInfo:function(e,i,n){var s={thumbnailImageUrl:n,compId:e,rootId:i};if(this.autoColorObservers.length)c(this,s);else{var a="".concat(i.toString(),"-").concat(e.toString());this.imagesToCheckColorOf[a]?t.assign(this.imagesToCheckColorOf[a],s):this.imagesToCheckColorOf[a]=s}},registerToMeanColor:function(e){var i,n;this.autoColorObservers.push(e),i=this,n=c.bind(null,i),t.forOwn(i.imagesToCheckColorOf,n),i.imagesToCheckColorOf=[]},unregisterToMeanColor:function(e){t.pull(this.autoColorObservers,e)},registerToActiveAnchor:function(e){this.activeAnchorObservers.push(e)},unregisterToActiveAnchor:function(e){t.pull(this.activeAnchorObservers,e)}},e.siteAspectsRegistry.registerSiteAspect("VerticalAnchorsMenuAspect",l),l}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(e){var t=this;this._aspectSiteAPI=e,this._aspectSiteAPI.registerToSiteReady((function(){return t._aspectSiteAPI.registerToVisibilityChange(t.propagateEvent.bind(t))})),this.registeredCallbacks={}}return i.prototype={propagateEvent:function(){var t=this.get();e.forEach(this.registeredCallbacks,(function(e){e(t)}))},register:function(e,t,i){this.registeredCallbacks[e]=t,i&&t(this.get())},unregister:function(t){this.registeredCallbacks=e.omit(this.registeredCallbacks,t)},get:function(){return this._aspectSiteAPI.getVisibilityState()}},t.siteAspectsRegistry.registerSiteAspect("siteVisibilityChange",i),i}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";var i=["in","out","while_in"];function n(t,i,n,s,a){if(!e.isUndefined(t)&&!e.isUndefined(i)){var o=t+i,r=s+n,c=o<s,u=o>r,p=t<s,l=t>r,d=!(p||l),g=!(c||u),h=p&&u,f=d||g||h,m=g&&!d,v=d&&!g,y=g&&d,A=0;return h?A=n:m?A=o-s:v?A=r-t:y&&(A=i),{in:f,inPartialAbove:m,inPartialBelow:v,inCover:h,inContained:y,out:!f,outAbove:c,outBelow:l,percentVisible:A/i,percentOfViewport:A/n,isFixed:!!a}}}function s(t,i){return{windowHeight:t.getScreenHeight(),compAbsTop:e.get(t,["measureMap","absoluteTop",i]),compHeight:e.get(t,["measureMap","height",i]),isFixed:e.get(t,["measureMap","shownInFixed",i])}}function a(e){return e.isPopupOpened()?e.getCurrentPopupScroll():e.getAspectGlobalData("windowScrollEvent")||{x:0,y:0}}function o(t,i){var o=a(t),r=t.getSiteData();e.forEach(i,(function(t,i){var a=s(r,i),c=n(a.compAbsTop,a.compHeight,a.windowHeight,o.y,a.isFixed);if(c){var u=function(e,t){return{in:e.in&&t.out,out:e.out&&t.in,while_in:e.in&&t.in}}(c,t.previousState),p=e.some(t.eventTypes,(function(e){return u[e]}));t.previousState=c,p&&t.callback(c)}}))}function r(t){this._aspectSiteAPI=t,this.registeredListeners={};var i=e.partial(o,t,this.registeredListeners);t.registerToSiteReady((function(){t.registerToScroll(i),t.registerToResize(i),t.registerToOrientationChange(i),t.registerToDidLayout(i),i()}))}return r.prototype={eventTypes:i,register:function(e,t,n){this.registeredListeners[e]={callback:t,eventTypes:n||i,previousState:{out:!0,in:!1}}},unregister:function(e){delete this.registeredListeners[e]},get:function(e){var t=a(this._aspectSiteAPI),i=s(this._aspectSiteAPI.getSiteData(),e);return n(i.compAbsTop,i.compHeight,i.windowHeight,t.y,i.isFixed)}},t.siteAspectsRegistry.registerSiteAspect("viewportChange",r),r}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(3),i(612),i(613)],void 0===(s=function(e,t,i,n){"use strict";var s=function e(t){var i=this,n=t.isMobile;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=n?6:14,this.counter=0,this.listeners=[],this.add=function(){return i.counter<i.limit&&(i.counter+=1,!0)},this.remove=function(){i.counter=Math.max(0,i.counter-1)}};function o(e){var t=this;"undefined"==typeof window||window.Hls||requirejs(["hls-light"],(function(){return t.updateQualityState("adaptiveVideo",{hlsLoaded:!0})})),this.aspectSiteAPI=e,this.siteData=e.getSiteData(),this.isEnabled=!0,this.playerStateChangeListeners={};var n={videoQualityCheckInterval:5e3,headRequestStaticUrl:this.siteData.getStaticVideoHeadRequestUrl()};this.fileAvailabilityUtil=new i(n),this.aspectSiteAPI.setAspectGlobalData("mediaAspect",{});var a=this.siteData.isMobileView()||this.siteData.isMobileDevice();this.webglContexts=new s({isMobile:a})}return o.prototype={getData:function(e){return this.aspectSiteAPI.getAspectComponentData("mediaAspect",e)||{}},getQualityData:function(t){return e.get(this.aspectSiteAPI.getAspectGlobalData("mediaAspect"),t)},updatePlayerState:function(t,i){var n=this.getData(t),s=e.pick(n,Object.keys(i));e.isEqual(s,i)||(this.aspectSiteAPI.updateAspectComponentData("mediaAspect",t,i),this.notifyStateChange(t))},updateQualityState:function(t,i){var n=e.assign({},this.getQualityData(t),i);this.aspectSiteAPI.updateAspectGlobalData("mediaAspect",a({},t,n))},removePlayerState:function(t){e.isEmpty(this.getData(t))||(this.aspectSiteAPI.setAspectComponentData("mediaAspect",t,{}),this.notifyStateChange(t))},registerPlayer:function(t,i){i=i||{};var n=e.get(i,"mediaData"),s=e.get(n,"videoId");this.updatePlayerState(t,{playerType:i.playerType||"none",videoId:s,duration:e.get(n,"duration",0)}),this.registerPlayerServices(t,i.mediaData,i.services)},unregisterPlayer:function(e){this.removePlayerState(e),this.unregisterPlayerServices(e)},registerPlayerServices:function(t,i,n){(n=n||{}).viewport&&this.aspectSiteAPI.getSiteAspect("viewportChange").register(t,n.viewport.callback,n.viewport.eventTypes),n.visibility&&this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").register(t,n.visibility.callback),n.fileAvailability&&e.forEach(n.fileAvailability.videoParts,function(e){this.fileAvailabilityUtil.register(t,i,e.quality,e.name,n.fileAvailability.callback)}.bind(this))},unregisterPlayerServices:function(e){this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").unregister(e),this.aspectSiteAPI.getSiteAspect("viewportChange").unregister(e),this.fileAvailabilityUtil.unregister(e)},registerStateChange:function(t,i,n){e.set(this.playerStateChangeListeners,[i,t],n);var s=this.getData(i);e.isEmpty(s)||n(s)},unregisterStateChange:function(t,i){this.playerStateChangeListeners[i]=e.omit(this.playerStateChangeListeners[i],t),e.isEmpty(this.playerStateChangeListeners[i])&&(this.playerStateChangeListeners=e.omit(this.playerStateChangeListeners,i))},notifyStateChange:function(t){e.forEach(this.playerStateChangeListeners[t],e.bind((function(e){e(this.getData(t))}),this))},shouldPlay:function(e){var t=this.aspectSiteAPI.getSiteAspect("viewportChange").get(e);return!(!t||!t.in)&&!this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").get().hidden},initFeatureDetections:function(){this.siteData.isViewerMode()&&(this.siteData.isInSSR()||e.get(this.aspectSiteAPI.getAspectGlobalData("mediaAspect"),"featureDetections"))||this.aspectSiteAPI.updateAspectGlobalData("mediaAspect",a({},"featureDetections",n()))},getPrevPageBackground:e.noop},t.siteAspectsRegistry.registerSiteAspect("mediaAspect",o),o}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2)],void 0===(s=function(e,t){"use strict";var i=t.mediaConsts;function n(t,i){return e.includes(i.readyQualities,i.qualities[t].quality)}function s(e,i,n){return i.url?t.urlUtils.joinURL(n,i.url):t.urlUtils.joinURL(n,e,i.quality,"mp4","file.".concat("mp4"))}function a(e){this.config=e,this.videoAvailabilityCollection={},this.componentsCallbackCollection={}}return a.prototype={register:function(t,i,n,s,a){var o=function(t,i){var n;switch(i){case"video":n=e.reject(t.qualities,{quality:"storyboard"});break;case"storyboard":n=e.filter(t.qualities,{quality:"storyboard"})}return n}(i,s);if(!e.isEmpty(o)){this.componentsCallbackCollection[s+t]={type:s,playerId:t,videoId:i.videoId,onSuccessCallback:a,targetQuality:n};var r=this.videoAvailabilityCollection[s+i.videoId];if(r)e.isEmpty(r.readyQualities)||this.notifySingleReadyState(this.componentsCallbackCollection[s+t],r,r.key);else{r={type:s,videoId:i.videoId,key:s+i.videoId,readyQualities:[],testingQuality:n,qualities:o,timeStamp:(new Date).getTime(),duration:1e3*i.duration,timerInterval:0},this.videoAvailabilityCollection[r.key]=r;var c=e.find(r.qualities,{quality:r.testingQuality});this.loadDummyVideo(r.key,r.videoId,c)}}},unregister:function(t){this.componentsCallbackCollection=e.omit(this.componentsCallbackCollection,t)},loadDummyVideo:function(e,i,n){t.ajaxLibrary.ajax({url:s(i,n,this.config.headRequestStaticUrl),type:"HEAD",success:function(){this.canPlay(e)}.bind(this),error:function(){this.onError(e)}.bind(this)})},onError:function(e){var t=this.videoAvailabilityCollection[e];if(t){var i=this.getNextIndexToCheck(t);"undefined"!=typeof window&&i>=0&&!n(i,t)?(t.testingQuality=t.qualities[i].quality,setTimeout(function(){this.loadDummyVideo(e,t.videoId,t.qualities[i])}.bind(this),100)):this.resetQualityTest(t),this.notifyReadyState(t.key)}},getNextIndexToCheck:function(t){return e.findIndex(t.qualities,{quality:t.testingQuality})-1},canPlay:function(t){var i=this.videoAvailabilityCollection[t];if(i){if(e.includes(i.readyQualities,i.testingQuality)||i.readyQualities.push(i.testingQuality),!this.isAllQualitiesAvailable(i)){var s=this.getNextIndexToCheck(i);"undefined"!=typeof window&&s>=0&&!n(s,i)?(i.testingQuality=i.qualities[s].quality,setTimeout(function(){this.loadDummyVideo(t,i.videoId,i.qualities[s])}.bind(this),100)):this.resetQualityTest(i)}this.notifyReadyState(t)}},resetQualityTest:function(t){if(t){t.testingQuality=e.last(t.qualities).quality;var i=function(t,i){var n=e.now()-t.timeStamp;if(n>6e4&&n>5*t.duration)return 0;var s=n>t.duration&&n<=2*t.duration?4:8;return Math.max(i,t.duration/s)}(t,this.config.videoQualityCheckInterval);"undefined"!=typeof window&&i>0&&(clearTimeout(t.timerInterval),t.timerInterval=setTimeout(function(){var i=e.find(t.qualities,{quality:t.testingQuality});this.loadDummyVideo(t.key,t.videoId,i)}.bind(this),i))}},notifyReadyState:function(t){var i=this.videoAvailabilityCollection[t];i&&e.forEach(e.filter(this.componentsCallbackCollection,{videoId:i.videoId}),e.bind((function(e){this.notifySingleReadyState(e)}),this))},notifySingleReadyState:function(t){var n,s,a=t.type+t.videoId,o=this.videoAvailabilityCollection[a];t.onSuccessCallback({videoId:o.videoId,readyQualities:o.readyQualities,availabilityState:(n=o.readyQualities,s=t.targetQuality,e.isEmpty(n)?i.availabilityReadyStates.IN_PROCESS:e.includes(n,s)?i.availabilityReadyStates.IDLE:i.availabilityReadyStates.PLAYING_PREVIEW),type:o.type}),this.isAllQualitiesAvailable(o)&&this.unregister(t.type+t.playerId)},isAllQualitiesAvailable:function(e){return e.readyQualities.length===e.qualities.length}},a}.apply(t,n))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";return function(){return{playsInline:!/(iPhone|iPod)/g.test(navigator.userAgent)||"playsInline"in window.document.createElement("video"),hasCSSMask:(e=window.document.createElement("video"),t=e&&e.style,"maskRepeat"in t||"webkitMaskRepeat"in t)};var e,t}}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,this._aspectSiteAPI.updateAspectGlobalData("InlinePopupAspect",{openedId:null}),e.bindAll(this,e.functionsIn(this))}return i.prototype={open:function(e){this.close(),this._aspectSiteAPI.updateAspectGlobalData("InlinePopupAspect",{openedId:e})},close:function(){this._aspectSiteAPI.updateAspectGlobalData("InlinePopupAspect",{openedId:null})}},t.siteAspectsRegistry.registerSiteAspect("InlinePopupAspect",i),i}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3),i(2)],void 0===(s=function(e,t,i){"use strict";var n=i.stringUtils,s={},a=["touchstart","touchmove","touchend","touchcancel"];function o(e){a.forEach((function(e){s[e]={}}),this),e.getSiteData().isInSSR()||(this.siteAspectAPI=e,r.call(this))}function r(){a.forEach(function(e){this.siteAspectAPI.registerToWindowTouchEvent(e,c.bind(this))}.bind(this))}function c(t){var i,a=t.type.slice("touch".length),o="WindowTouch".concat(n.capitalize(a)),r=s[t.type],c="on".concat(o);e.forEach(r,function(e){(i=this.siteAspectAPI.getComponentById(e))?i[c]&&i[c](t):delete r[e]}.bind(this))}o.prototype={registerToWindowTouchEvent:function(e,t){s[e.toLowerCase()][t.props.id]=t.props.id},unregisterFromWindowTouchEvent:function(e,t){delete s[e.toLowerCase()][t.props.id]}},t.siteAspectsRegistry.registerSiteAspect("windowTouchEvents",o)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(3)],void 0===(s=function(e,t,i){"use strict";function n(e){this._aspectSiteAPI=e,this._registeredCompCallbacks={},e.registerToScroll(this.onScroll.bind(this)),e.registerToRenderedRootsChange(this.onRenderedRootsChange.bind(this))}function s(t){var i=this._aspectSiteAPI.getAspectGlobalData("anchorChangeEvent"),n=e.get(i,"activeAnchorComp.id"),s=e.get(t,"activeAnchorComp.id");s&&s!==n&&(this._aspectSiteAPI.updateAspectGlobalData("anchorChangeEvent",t),this.propagateAnchorChangeEvent(t))}function a(i,n,a){var o=n?function(i,n,s){s=s||i.getPrimaryPageId();var a=t.scrollAnchors.getPageAnchors(i,s),o=t.scrollAnchors.getSortedAnchorsByY(i,a);return e.find(o,{id:n.replace("#","")})}(i,n,a):n;if(o){var r={activeAnchorComp:o};s.call(this,r)}}function o(i){var n=this._aspectSiteAPI.getSiteData(),a=n.isPopupOpened();if(i&&!a&&!e.isUndefined(i.y)){var o=t.scrollAnchors.getActiveAnchor(n,i.y);s.call(this,o)}}return n.prototype={registerToAnchorChange:function(e){e.onAnchorChange&&(this._registeredCompCallbacks[e.props.id]=e.onAnchorChange)},unregisterToAnchorChange:function(e){delete this._registeredCompCallbacks[e.props.id]},onScroll:function(t){e.isEmpty(this._registeredCompCallbacks)||o.call(this,t)},onRenderedRootsChange:function(i){if(e.isEmpty(i)){var n=this._aspectSiteAPI.getSiteAspect("windowScrollEvent").getScrollPosition();o.call(this,n)}else{var a=this._aspectSiteAPI.getSiteData().getPrimaryPageId(),r={activeAnchorComp:t.scrollAnchors.getPageTopAnchor(a)};s.call(this,r)}},setSelectedAnchorAsync:function(e,t,i,n){t&&(t=t.replace("#",""),setTimeout(a.bind(this,e,t,i),n))},propagateAnchorChangeEvent:function(t){e.forEach(this._registeredCompCallbacks,(function(e){e(t)}))}},i.siteAspectsRegistry.registerSiteAspect("anchorChangeEvent",n),n}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(3),i(0),i(7)],void 0===(s=function(e,t,i){"use strict";function n(e){this._siteAPI=e.getSiteAPI();var t=this._siteAPI.getSiteData();this.fixOverflowScrollEdges=t.browserFlags().fixOverflowScrollEdges,this._blockersList=[],this._scrollCorrection=void 0,this.blockListeners=[]}function s(){this._scrollCorrection=window.scrollY}function a(){window.scrollTo(0,this._scrollCorrection)}function o(e){s.call(this),i("html").css({marginTop:"".concat(-Math.max(.5,window.scrollY),"px")}).addClass("blockSiteScrolling"),this.blockListeners.forEach((function(t){t.handleBlockedBy(e)}))}function r(e){i("html").removeClass("blockSiteScrolling").css({marginTop:""}),a.call(this),this.blockListeners.forEach((function(t){t.handleUnblockedBy(e)}))}n.prototype={setSiteScrollingBlocked:function(e,i){var n=t.head(this._blockersList);this._blockersList=i?t(this._blockersList).concat(e).uniq().value():t.without(this._blockersList,e);var s=t.head(this._blockersList);n!==s&&(s?o:r).call(this,e)},setSiteScrollingBlockedForModal:function(e,t,n){if(!n)return this.setSiteScrollingBlocked(e,t);var s=i("#SITE_CONTAINER");return t||"hidden"!==s.css("overflow")?void 0:s.css({height:"auto",overflow:"auto"})},isSiteScrollingBlocked:function(){return!!t.size(this._blockersList)},registerScrollingLayer:function(e){this.fixOverflowScrollEdges&&e.addEventListener("scroll",(function(){e.scrollTop=t.clamp(e.scrollTop,1,e.scrollHeight-e.clientHeight-1)}))},registerScrollBlockedListener:function(e){this.blockListeners.push(e)},onHeightChanged:function(e,t){if(e)return this._siteAPI.exitFullScreenMode(),i("#SITE_CONTAINER").css({height:t,overflow:"hidden"})},getDeviceSpecificProperties:function(e,t,i){return e&&t&&i>0?{"":{style:{position:"absolute",height:i}},dialog:{style:{position:"absolute"}},iframe:{style:{height:i}}}:{}}},e.siteAspectsRegistry.registerSiteAspect("siteScrollingBlocker",n)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._isOverride=!1}function n(e){"undefined"!=typeof window&&(e.preventDefault(),window.scrollBy(0,-e.wheelDelta/2))}i.prototype={overrideMouseWheel:function(){var e=window.document.body;if(!this._isOverride){if(void 0!==e.onwheel)e.addEventListener("wheel",n);else{if(void 0===e.onmousewheel)return;e.addEventListener("mousewheel",n)}this._isOverride=!0}},releaseMouseWheel:function(){var e=window.document.body;e.removeEventListener("wheel",n),e.removeEventListener("mousewheel",n),this._isOverride=!1},isOverride:function(){return this._isOverride}},t.siteAspectsRegistry.registerSiteAspect("mouseWheelOverride",i)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredComps={},e.registerToSvSessionChange(this.notifySessionChanged.bind(this))}i.prototype={registerToSessionChanged:function(e){this._registeredComps[e.props.id]=e},unRegisterToSessionChanged:function(e){delete this._registeredComps[e.props.id]},notifySessionChanged:function(t){e.forEach(this._registeredComps,(function(e){e.sendPostMessage({intent:"addEventListener",eventType:"SESSION_CHANGED",params:{userSession:t}})}))}},t.siteAspectsRegistry.registerSiteAspect("svSessionChangeEvent",i)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(3)],void 0===(s=function(e){"use strict";function t(){}t.prototype={registerToConsentPolicyUpdated:function(){},unRegisterToConsentPolicyUpdated:function(){}},e.siteAspectsRegistry.registerSiteAspect("consentPolicyUpdateEvent",t)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(3)],void 0===(s=function(e){"use strict";function t(){}t.prototype={registerToCommonConfigUpdated:function(){},unRegisterToCommonConfigUpdated:function(){}},e.siteAspectsRegistry.registerSiteAspect("commonConfigUpdateEvent",t)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3),i(2)],void 0===(s=function(e,t,i){"use strict";var n=i.behaviorsService,s=function(t){t.registerToMessage(this.handleMessage.bind(this)),this.siteAPI=t,this.callbacks={},this.components={},this.queue={},e.bindAll(this,["handleMessage","registerComponent","unRegisterComponent","postMessage"])};function a(){e.size(this.queue)>0&&e.forEach(this.queue,function(t,i){var s=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(i);n.handleBehaviors(this.siteAPI,e.map(s,"behavior"),t,"widget"),delete this.queue[i]}.bind(this))}return s.prototype={handleMessage:function(t){e.forEach(this.components,function(i,s){if(t.source===i){var o=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(s);0===e.size(o)?this.queue[s]=t:(a.call(this),n.handleBehaviors(this.siteAPI,e.map(o,"behavior"),t,"widget"))}}.bind(this))},registerComponent:function(e,t){this.components[e]=t},unRegisterComponent:function(e){delete this.components[e]},postMessage:function(e,t){var i=this.components[e];i&&i.postMessage(t,"*")}},t.siteAspectsRegistry.registerSiteAspect("HtmlPostMessageAspect",s),s}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredComps={},e.registerToSiteMetadataChange(this.notifySiteMetadataChanged.bind(this))}i.prototype={registerToSiteMetadataChange:function(e){this._registeredComps[e.props.id]=e},unRegisterToSiteMetadataChange:function(e){delete this._registeredComps[e.props.id]},notifySiteMetadataChanged:function(t){e.forEach(this._registeredComps,(function(e){e.sendPostMessage({intent:"addEventListener",eventType:"SITE_METADATA_CHANGED",params:t})}))}},t.siteAspectsRegistry.registerSiteAspect("siteMetadataChangeAspect",i)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,this._registeredCloseHandlers={},e.bindAll(this,["registerCloseHandler","unregisterCloseHandler","closePopupPage","openPopupPage"])}return i.prototype={registerCloseHandler:function(e,t){this._registeredCloseHandlers[e]=t},unregisterCloseHandler:function(t){this._registeredCloseHandlers=e.omit(this._registeredCloseHandlers,t)},closePopupPage:function(){var t=this._aspectSiteAPI.getCurrentPopupId();t&&(this._aspectSiteAPI.closePopupPage(),e.isFunction(this._registeredCloseHandlers[t])&&(this._registeredCloseHandlers[t].apply(this,arguments),this.unregisterCloseHandler(t)))},openPopupPage:function(e){this._aspectSiteAPI.openPopupPage(e)}},t.siteAspectsRegistry.registerSiteAspect("PopupPageAspect",i),i}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(7),i(0),i(3),i(20)],void 0===(s=function(e,t,i,n){"use strict";var s=i.utils.accessibility.addFocusRingClass,a=27,o=32,r=9,c=35,u=36,p=39,l=37,d=38,g=40;function h(e){e.registerToComponentDidMount(function(){this.disposeReaction=n.reaction(e.getSiteData().isVisualFocusEnabled,this.addOrRemoveListeners.bind(this),{fireImmediately:!0})}.bind(this)),e.registerToWillUnmount(function(){this.disposeReaction(),this.unregisterListeners()}.bind(this))}h.prototype={addOrRemoveListeners:function(e){e?this.registerListeners():this.unregisterListeners()},registerListeners:function(){this.unregisterListeners(),this.keyUpEventListener=this.onKeyUp.bind(this),this.elementBlurEventListener=this.onElementBlur.bind(this),this.elementFocusEventListener=this.onElementFocus.bind(this),this.windowFocusEventListener=this.onWindowFocus.bind(this),this.windowBlurEventListener=this.onWindowBlur.bind(this),window.document.addEventListener("keyup",this.keyUpEventListener,!0),window.document.addEventListener("blur",this.elementBlurEventListener,!0),window.document.addEventListener("focus",this.elementFocusEventListener,!0),window.addEventListener("focus",this.windowFocusEventListener,!0),window.addEventListener("blur",this.windowBlurEventListener,!0)},unregisterListeners:function(){window.document.removeEventListener("keyup",this.keyUpEventListener,!0),window.document.removeEventListener("focus",this.elementFocusEventListener,!0),window.document.removeEventListener("blur",this.elementBlurEventListener,!0),window.removeEventListener("focus",this.windowFocusEventListener,!0),window.removeEventListener("blur",this.windowBlurEventListener,!0)},onWindowFocus:function(){window.document.activeElement===this.elementWithFocusRing&&s(this.elementWithFocusRing)},onWindowBlur:function(){e(window.document.activeElement).hasClass("focus-ring")&&(this.elementWithFocusRing=window.document.activeElement)},onKeyUp:function(e){e.altKey||e.ctrlKey||e.metaKey||t.includes([a,o,r,u,c,p,l,d,g],e.keyCode)&&s(e.target)},onElementBlur:function(t){var i;e(t.target).hasClass("focus-ring")&&(this.elementWithFocusRing=t.target,i=t.target,e(i).removeClass("focus-ring"))},onElementFocus:function(){window.document.activeElement===this.elementWithFocusRing&&s(this.elementWithFocusRing)}},i.siteAspectsRegistry.registerSiteAspect("visualFocusAspect",h)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(3),i(2),i(72)],void 0===(s=function(e,t,i,n){"use strict";var s,o,r=0,c=1,u=2,p=["head","bodyStart","bodyEnd"];function l(e){switch(e){case"head":return window.document.head;case"bodyStart":case"bodyEnd":return window.document.body;default:return null}}var d=(a(s={},"head","head html embeds start"),a(s,"bodyStart","body start html embeds start"),a(s,"bodyEnd","body end html embeds start"),s),g=(a(o={},"head","head html embeds end"),a(o,"bodyStart","body start html embeds end"),a(o,"bodyEnd","body end html embeds end"),o);function h(t,i,n){var s=t.getCodeEmbeds();return e(s).filter({position:i}).filter((function(e){return"custom"===e.embedType||"verificationCode"===e.embedType})).filter((function(t){return!t.pages||e.some(t.pages,(function(e){return e===n}))||y(t)})).value()}function f(t,i,n,s,a){var o=n,r=l(i),c=0;e.forEach(h(t,i,t.getCurrentUrlPageId()),(function(t){var i=window.document.createElement("div");if(s.length>0&&s[c]===t.id)o=a[c],c++;else{var n=window.document.createElement("div");for(n.innerHTML=t.content.html,function t(i,n){e.forEach(i.childNodes,(function(i){var s=null;i.nodeType===window.Node.ELEMENT_NODE?(s=window.document.createElement(i.tagName),e.forEach(i.attributes,(function(e){s.setAttribute(e.name,e.value)})),t(i,s)):i.nodeType===window.Node.TEXT_NODE?s=window.document.createTextNode(i.textContent):i.nodeType===window.Node.COMMENT_NODE&&(s=window.document.createComment(i.textContent)),s&&n.appendChild(s)}))}(n,i);i.children.length;)r.insertBefore(i.children[0],o.nextSibling);o=o.nextSibling}}))}function m(t){for(var i=d[t],n=g[t],s=l(t),a=null,o=null,r=0;r<s.childNodes.length;r++){var c=s.childNodes[r];if(c.nodeType===window.Node.COMMENT_NODE)if(c.textContent===i)a=r,o={location:t},e.set(o,["index","start"],a),e.set(o,["nodes","start"],c);else if(c.textContent===n){o=e.merge(o,{index:{end:r},nodes:{end:c}});break}}return o}function v(e,t){for(var i=0;i<t.length;++i)e.removeChild(t[i])}var y=function(e){return e.loadOnce&&!e.pages};function A(e){var t=this;this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this._aspectSiteAPI.registerToUrlPageChange(this.onUrlPageChanged.bind(this)),this._aspectSiteAPI.registerToSiteReady(this.onSiteReady.bind(this)),this._aspectSiteAPI.registerToComponentDidMount((function(){t.previousPageId=t._siteData.getCurrentUrlPageId()}))}A.prototype.onSiteReady=function(){if(this._siteData.getCodeEmbeds()&&!e.isEmpty(this._siteData.getCodeEmbeds())){var t,s,a,o=e.map(p,(function(t){return function(t){if(!t)return c;var i=e.get(t,["index","start"]),n=e.get(t,["index","end"]),s=e.get(t,["nodes","start"])&&e.get(t,["nodes","end"]);return i&&n&&i<n&&s?r:u}(m(t))}));e.includes(o,u)?(this._commentNodeStatus=u,i.loggingUtils.logger.reportBI(this._siteData,n.INVALID_CODE_EMBED_SCRIPT,{})):e.includes(o,c)?(this._commentNodeStatus=r,a=window.document.getElementById("SITE_CONTAINER"),window.document.body.insertBefore(window.document.createComment(d.bodyStart),a),window.document.body.insertBefore(window.document.createComment(g.bodyStart),a),window.document.body.appendChild(window.document.createComment(d.bodyEnd)),window.document.body.appendChild(window.document.createComment(g.bodyEnd)),t=this._siteData,s=e.map(["bodyStart","bodyEnd"],(function(e){return m(e)})),e.forEach(s,(function(e){f(t,e.location,e.nodes.start,[],[])}))):this._commentNodeStatus=r}},A.prototype.onUrlPageChanged=function(){var t=this;if(this._commentNodeStatus===r){var i=this.previousPageId;this.previousPageId=this._siteData.getCurrentUrlPageId();var n=e.map(p,(function(e){return m(e)})),s={},a={},o={};e.forEach(n,(function(n){var r,c,u,p,d=n.location,g=l(d),f=(r=g.childNodes,c=n.index.start,u=n.index.end,e(r).slice(c+1,u).filter({nodeType:window.Node.ELEMENT_NODE}).value()),m=h(t._siteData,d,i);s[d]=[],a[d]=[],o[d]=[];for(var v=0;v<m.length;++v)p=m[v],y(p)?(a[d].push(m[v].id),o[d].push(f[v])):s[d].push(f[v])}));for(var c=0;c<p.length;++c){var u=p[c];v(l(u),s[u])}e.forEach(n,(function(e){f(t._siteData,e.location,e.nodes.start,a[e.location],o[e.location])}))}},t.siteAspectsRegistry.registerSiteAspect("codeEmbedsAspect",A)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(2),i(628)],void 0===(s=function(e,t){"use strict";e.behaviorHandlersFactory.registerHandler("site",t)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0),i(2),i(629)],void 0===(s=function(e,t,i){"use strict";function n(){function e(e,t,i){var n=i.targetId;return!e.isZoomOpened()&&(!function(e){return"editor"===e.getRenderFlag("componentViewMode")}(e)&&(!function(e,t){return e.getRuntimeDal().hasBeenPopupOpened(t)}(e,n)&&!e.isPopupOpened()&&(t.isMobileView()?Boolean(i.params.openInMobile):Boolean(i.params.openInDesktop))))}var t;return function(i,n){clearTimeout(t);var s=n.getSiteData();e(n,s,i)&&(t=setTimeout((function(t){s.getPrimaryPageId()!==t||e(n,s,i)&&n.getSiteAspect("PopupPageAspect").openPopupPage(i.targetId)}),function(e){return 1e3*(e.params.delay||0)}(i),s.getPrimaryPageId()))}}function s(){return!0}function a(){return{default:function(e){t.log.error("Invalid behavior",e)},openPopup:s,prefetchPages:i.isEnabled}}var o,r;return{handle:function(s,a){o=o||{default:function(e){t.log.error("Invalid behavior",e)},openPopup:n(),prefetchPages:i.prefetchPages},e.forEach(s,(function(e){(o[e.name]||o.default)(e,a)}))},isEnabled:function(e,t){return((r=r||a())[e.name]||r.default)(t)}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";return{prefetchPages:function(t,i){var n=i.getSiteData().getPagesDataItems(),s=t.params.prefetchFilters,a=e(n).filter((function(t){return e.every(s,(function(i,n){return e.includes(i,t[n])}))})).map("id").value();if(!e.isEmpty(a)){var o=i.getSiteDataAPI(),r=0;e.forEach(a,(function(e){var t={pageId:e};o.loadPage(t,(function(){++r===a.length&&i.addPrefetchPages(a)}))}))}},isEnabled:function(){return!0}}}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(186),i(2)],void 0===(s=function(e,t){"use strict";e.hooks.registerHook(e.hooks.types.PAGE_LOADED_FIRST_RENDER,(function(i,n,s){i.rendererModel.previewMode||e.isProtectedPage(i)||t.errorPages.isErrorPage(i.getPrimaryPageId())||s||n.preInitWidgets(i,i.currentUrl.full)})),e.hooks.registerHook(e.hooks.types.PAGE_LOADED,(function(e,i){!function(e,i){if(i.pageId!==t.siteConstants.MASTER_PAGE_ID){var n=e.getSiteDataAPI(),s=e.getSiteData(),a=i.pageId;s.isPopupPage(a)&&(a=s.getPrimaryPageId()),n.updateActiveSOSPModes(a)}}(e,i);var n=e.getSiteData(),s=!i.routerDefinition,a=n.getFocusedRootId()===e.getCurrentPopupId(),o=a&&i.pageId===n.getPrimaryPageId(),r=n.getFocusedRootId()!==i.pageId,c=i.isLanguageChange;if(s&&r&&!o||c)e.getSiteAspect("WidgetAspect").initApps([i.pageId]);else if(i.routerDefinition){var u=!r,p=i.innerRoute!==n.getRootNavigationInfo().innerRoute;if(u&&p)return void e.getSiteAspect("WidgetAspect").initApps([i.pageId]);if(r&&!a)return void e.getSiteAspect("WidgetAspect").initApps([i.pageId]);if(a){var l=i.pageId===n.getPrimaryPageId();(!l||l&&p)&&e.getSiteAspect("WidgetAspect").initApps([i.pageId])}}}))}.apply(t,n))||(e.exports=s)}])}));
//# sourceMappingURL=core.min.js.map