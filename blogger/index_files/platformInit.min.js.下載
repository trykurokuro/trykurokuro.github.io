define("platformInit",["lodash","coreUtils","experiment","warmupUtils","host-worker-init"],(function(e,r,t,n,i){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=954)}({0:function(r,t){r.exports=e},133:function(e,r,t){var n,i;function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}n=[t(0),t(8),t(2),t(266),t(964),t(9)],void 0===(i=function(e,r,t,n,i,a){"use strict";var s=a.platformAppsUtils,c=s.widgetTypes,u=s.joinURL,p=s.hasWixCode,l=s.addSiteExtensionsApps,d=s.getSiteExtensionAppDataIfExist,f=function(r){return r.map((function(r){return e.assign({type:c.APPLICATION},r)}))};function v(r){return e(r).reject({displayName:"siteextension"}).map((function(r){return e.assign({type:c.APPLICATION},r)})).value()}function m(t,n,i){t=e.without(t,"masterPage");var o=r.isOpen("sv_moveWixCodeToViewerApp",{rendererModel:n.rendererModel})?f(i):v(i);return function(r,t,n,i,o){if(p(i.rendererModel)&&e.find(r,t)){var a=i.isPlatformAppOnPage("masterPage","wixCode");e.forEach(n,(function(r){var t=i.isPlatformAppOnPage(r,"wixCode"),n=i.getDataByQuery(r),s=e.get(n,"isPopup");t&&o.push({id:r,type:s?c.POPUP:c.PAGE,displayName:i.getPageTitle(r)}),!s&&a&&o.push({id:r,type:c.MASTER_PAGE})}))}}(i,{displayName:"siteextension"},t,n,o),o}function g(r){var t=e.get(r,"appFields.platform.viewerScriptUrl","");return n.validateUrl(t)&&!e.get(r,"permissions.revoked")}function y(i,o,a,s,c,l){var d=l.viewerPlatformOverrides,f=l.queryParams,v=l.controllersUrlOverride;return e(o).filter((function(e){return"675bbcef-18d8-41f5-800e-131ec9e08762"!==e.appDefinitionId||r.isOpen("sv_moveWixCodeToViewerApp",{rendererModel:a})?g(e):p(a)})).map((function(r){var p=e.omitBy({id:r.appDefinitionId,displayName:r.type,appInnerId:r.applicationId,instanceId:r.instanceId,instance:e.get(i,[r.applicationId])||r.instance,shouldUseWixCodeScripts:!!e.get(r,"appFields.platform.studio"),isWixTPA:r.isWixTPA,optionalApplication:e.get(r,"appFields.platform.optionalApplication")},e.isUndefined),l=function(r,t,n,i){var o=n.scriptsLocationMap["fallback-viewer-app"];if(r.versionFailure&&o)return u(o,"fallback-viewer-app.js");var a,s,c=e.get(r,"appFields.platform.viewerScriptUrl"),p=e.get(r,"appFields.platform.viewerVerboseScriptUrl"),l=r.appDefinitionId;if(t.previewMode&&p)return p;if(i){var d=e.find(i,{appDefinitionId:l});if(d&&(a=d.bundle,s=n.staticServerUrl,0===a.indexOf(s)||0===a.search("https?://localhost")))return d.bundle}return c}(r,a,s,d);l&&(p.url=n.resolveUrl(l,{serviceTopology:s,clientSpecMap:o,clientSpec:r,currentUrl:c,rendererModel:a}));var m=function(r,n,i,o){o=o||t.scriptsOverridesService.getControllersOverride(i);var a=e(r.widgets).filter("componentFields.controllerUrl").mapKeys("widgetId").mapValues("componentFields.controllerUrl").value(),s=t.scriptsOverridesService.getValidScriptOverrides(o,n);return e.assign(a,s)}(r,s.staticServerUrl,f,v);e.isEmpty(m)||(p.controllerScriptMap=m);var g=e.get(r,"appFields.platform.baseUrls");return g&&(p.baseUrls=g),p})).value()}function S(r){var t=r.rendererModel,n=r.serviceTopology,i=r.viewerPlatformOverrides,o=r.viewerPlatformAppSources,a=r.clientSpecMap,s=r.currentUrl,u=r.queryParams,p=r.controllersUrlOverride,d=r.santaBase,f=r.appInstanceMap,v=e(o||"").split(",").invokeMap("split",/:(.+)/).fromPairs().value(),m=y(f,l(a,n,v,t),t,n,s,{viewerPlatformOverrides:i,queryParams:u,controllersUrlOverride:p});return function(r,t,n){if(e.get(r,"port")&&e.get(r,"path")&&e.get(r,"id")){n=e.endsWith(n,"/")?n.slice(0,-1):n;var i,o=e.template("<%= santaBase %><%= port %>/<%= path %>");i=/^(http(s)?:)?\/\//.test(r.path)?r.path:"80"===r.port?o({santaBase:n,port:"",path:r.path}):o({santaBase:n,port:":".concat(r.port),path:r.path}),t.push({type:c.APPLICATION,id:r.id,url:i,displayName:r.id})}}(v,m=function(r){var t=e.filter(r,"optionalApplication");return e.size(t)===e.size(r)?[]:e.map(r,(function(r){return e.omit(r,"optionalApplication")}))}(m),d),m}function w(r,t,n){var i=e.get(n,["currentUrl","query","viewerPlatformAppSources"]),o=S({clientSpecMap:r,queryParams:n.getQueryParams(),viewerPlatformAppSources:i,serviceTopology:n.serviceTopology,santaBase:n.santaBase,rendererModel:n.rendererModel,appInstanceMap:n.getAppInstance()});return m(t,n,o)}function b(r,t,n){return e.includes(["platform.components.AppController","platform.components.AppWidget"],r.componentType)||function(r,t,n){if(!A(r.componentType))return!1;var i=r.dataQuery.replace("#",""),o=t.getDataByQuery(i,n),a=t.getClientSpecMapEntry(o.applicationId);return e.get(a,"appFields.platform.viewerScriptUrl")}(r,t,n)}function M(r,t,n,i){var o=i?[i.controllerId]:[],a=n.getDataByQuery(r.connectionQuery,t.id,n.dataTypes.CONNECTIONS);return a?e(a.items).filter({type:"ConnectionItem"}).map("controllerId").value().concat(o):o}function A(r){return e.startsWith(r,"wysiwyg.viewer.components.tpapps.")||e.startsWith(r,"native.components")}function x(r,t,n,o){var a=t.getViewMode(),s=t.getClientSpecMap(),c=e.filter(r,"json"),u=function(r,t){return e(r).transform((function(r,t){e.assign(r,e.get(t,"data.connections_data"))}),{}).values().flatMap((function(r){var n=t.resolveData(r,null,t.dataTypes.CONNECTIONS);return e.get(n,"items")})).groupBy("controllerId").value()}(e.map(c,"json"),t);return e.flatMap(c,(function(r){var c=e.filter(e.get(r,["json","structure",a]),(function(e){return b(e,t,r.id)}));return e.map(c,(function(a){var c=a.dataQuery.replace("#",""),p=e.assign({},t.getDataByQuery(c,r.id)),l=p.applicationId;return A(a.componentType)&&(p.controllerType=function(r,t){var n=t.getClientSpecMapEntry(r.applicationId);return n?r.widgetId||e.findKey(n.widgets,["appPage.hidden",!1]):null}(p,t),p.applicationId=s[l].appDefinitionId,p.settings={externalId:i.getExternalId(t,p),style:i.getStyleParams(t,n,a.styleId,r.id),publicData:i.getPublicData(t,l,p.tpaData,r.id)}),e.omitBy({controllerBehaviors:e.get(t.getDataByQuery(a.behaviorQuery,r.id,t.dataTypes.BEHAVIORS),"items",[]),controllerData:p,controllerId:c,compId:a.id,connections:e.get(u,c),dependencies:M(a,r,t,o)},e.isUndefined)}))}))}return{isTypeController:b,hasWixCode:p,getApplications:w,getUserCodeDefinitions:function(r,t,n){return e.reject(w(r,t,n),{type:c.APPLICATION})},getAppsBaseInfo:function(t){var n=S(t),i=t.rendererModel;return r.isOpen("sv_moveWixCodeToViewerApp",{rendererModel:i})?e.filter(f(n),"url"):e.filter(v(n),"url")},getContextInitData:function(t,n,i){var a=function(r,t){var n=[{id:r,json:t.getPageData(r)}];if(e.get(t.getDataByQuery(r),"isPopup"))return n;var i=t.MASTER_PAGE_ID;return n.concat({id:i,json:t.getMasterPageData()})}(n,t),s=r.isOpen("sv_moveWixCodeToViewerApp",{rendererModel:t.rendererModel})?function(e,r,t){var n=r.getClientSpecMap(),i=d(n);if(p(r.rendererModel)&&i)return{controllerData:{id:t,controllerId:t,applicationId:i.appDefinitionId},controllerId:t,controllerBehaviors:[],dependencies:[]}}(0,t,n):null,c=x(a,t,i,s),u=!(t.isApplicationStudio()&&function(r){return g(e.find(r.getClientSpecMap(),["appDefinitionId","46b2ad43-5720-41d2-8436-2058979cb53f"]))}(t));s&&u&&(c=[].concat(o(c),[s]));var l=function(r){return e(r).groupBy("controllerData.applicationId").mapValues((function(r){return e(r).keyBy("controllerId").mapValues((function(r){return e.pick(r,["controllerData","controllerBehaviors","connections","compId","dependencies"])})).value()})).value()}(c);return e.mapValues(l,(function(e){return{controllers:e}}))}}}.apply(r,n))||(e.exports=i)},2:function(e,t){e.exports=r},265:function(e,r,t){var n,i;function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}n=[t(2),t(133),t(267),t(0)],void 0===(i=function(e,r,t,n){"use strict";var i=null,a=null,s=null,c=null,u=[];function p(e,r,t,o){if(f())return u.push([e,r,t,o]),void requirejs(["utils","host-platform-api","site-widgets","wixCode"],d);var s=o(i),p=i.wixUrlParser.parseUrl(s,e),l=p&&p.pageId;if(l&&!n.includes(n.get(s,"publicModel.siteMembersProtectedPages"),l)){var v=r(a,s,l),m=c.wixCodeWidgetService.getWixCodeSpec(s.getClientSpecMap());t(c.messageBuilder.getExtendedMessage(v,s.rendererModel.wixCodeModel||{},m,s))}}function l(r,t,n){return r.currentUrl=e.urlUtils.parseUrl(t),new n.FullSiteData(r,(function(){}))}function d(e,r,t,n){f()&&(i=e,a=r,s=t,c=n,u.forEach((function(e){return p.apply(void 0,o(e))})),u.length=0)}function f(){return!(i&&a&&s&&c)}return{asyncGetPreLoadMessage:function(e,i,o){p(i,(function(n,o,a){var s,c,u,p=e.rendererModel,l=e.wixBiSession,d=e.biData,f=r.getApplications(e.rendererModel.clientSpecMap,[a],o),v=e.routers||{configMap:{}},m=n.modelBuilderDataHelper.getApi(o),g=n.globalsBuilder.build(m,!0,a),y=t.buildBiSession({wixBiSession:l,rendererModel:p,currentUrl:i,biData:d});return n.messageBuilder.loadWidgetsMessage(f,v.configMap,[a],(s={},c=a,u=g.toJson(),c in s?Object.defineProperty(s,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[c]=u,s),y)}),o,n.partial(l,e,i))},asyncGetPreLoadUserCodeMessage:function(e,t,i){p(t,(function(t,n,i){var o=r.getUserCodeDefinitions(e.rendererModel.clientSpecMap,[i],n);return t.messageBuilder.loadUserCodesMessage(o,[i])}),i,n.partial(l,e,t))},asyncGetPreInitMessage:function(e,t,n){p(t,(function(e,t,n){var o={};return o[n]=r.getContextInitData(t,n,i.styleUtils),e.messageBuilder.initWidgetsMessage(o)}),n,(function(){return e}))},asyncGetLoadUserGeneratedAppsMessage:function(e,r,t,i){p(r,(function(e,r,n){return e.messageBuilder.loadUserGeneratedAppsMessage(t,[n])}),i,n.partial(l,e,r))},registerDeps:d}}.apply(r,n))||(e.exports=i)},266:function(e,r,t){var n,i;n=[t(0),t(956)],void 0===(i=function(e,r){"use strict";return{getAppSpec:function(r,t){return e.find(r,{appDefinitionId:t})||e.find(r,{type:"siteextension"})},resolveEditorScriptUrl:function(t,n){var i=e.get(t,["appFields","platform"]);if(!e.isUndefined(i)){var o=i.editorScriptUrl;if(!e.isUndefined(o)){var a=r.resolve(o,n);return e.merge({},t,{appFields:{platform:{editorScriptUrl:a}}})}}return t},resolveUrl:r.resolve,validateUrl:r.validate}}.apply(r,n))||(e.exports=i)},267:function(e,r,t){var n,i;n=[t(0),t(77),t(965),t(2)],void 0===(i=function(e,r,t,n){"use strict";var i=n.urlUtils,o=i.parseUrl,a=i.isQueryParamOn;function s(e){return e.publicModel?"site":"preview"}function c(r){var t=r.wixBiSession,n=r.rendererModel,i=r.currentUrl,o=r.biData,s=t.viewerSessionId,c=t.visitorId,u=t.siteMemberId,p=t.random,l=t.coin,d=t.pn,f=t.requestId,v=t.initialTimestamp,m=t.initialRequestTimestamp,g=n.metaSiteId,y=n.userId,S=a(i,"isqa")||a(i,"suppressbi"),w=e.get(i,"query.sampleratio");return{metaSiteId:g,viewerSessionId:s,visitorId:c,siteMemberId:u,requestId:f,ownerId:y,pageLoadStart:e.get(o,"pageLoadStart",v),networkPageLoadStart:e.get(o,"networkPageLoadStart",m),pageNumber:d,random:p,coin:l,muteBi:S,sampleRatioState:w}}return{build:function(i,a,u){var p,l=i.rendererModel,d=i.userWarmup,f=i.serviceTopology,v=i.santaBase,m=i.baseVersion,g=i.wixBiSession,y=i.biData,S=c({wixBiSession:g,rendererModel:l,currentUrl:o(u.currentUrl),biData:y});return{getElementoryArguments:function(e){return r.getElementoryArguments(i,a,e,s(i))},getUserCodeUrlsDetails:r.getUserCodeUrlsDetails,viewMode:s(i),locale:l.locale,userWarmup:d,workerUrl:t.buildUrl(i,u),wixCodePlatformRoot:f.scriptsLocationMap["wix-code-platform"],santaBase:v,staticServerUrl:f.staticServerUrl,baseVersion:m,openExperiments:(p=l.runningExperiments,e.reduce(p,(function(e,r,t){return"new"===r&&e.push(t),e}),[])),csrfToken:n.cookieUtils.getCookie("XSRF-TOKEN"),biSessionData:S}},buildBiSession:c}}.apply(r,n))||(e.exports=i)},63:function(e,r){e.exports=i},77:function(e,r,t){var n,i;function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}n=[t(0),t(961)],void 0===(i=function(e,r){"use strict";function t(e){var r=e.appConfig.userScript;return{id:e.id,url:r.url,scriptName:r.scriptName,displayName:r.displayName,routerData:e.routerData}}return{getUserCodeUrlsDetails:function(r,n){var i=[],o=e.find(r,(function(e){return e.id===n&&"masterPage"!==e.type})),a=e.find(r,{id:n,type:"masterPage"});return a&&i.push(t(a)),o&&i.push(t(o)),i},getElementoryArguments:function(t,n,i,o){var a,s=function(r){return e(r).map("appConfig").find()}(i);if(s)return{baseUrl:function(r,t){if(r.publicModel){var n=e.trimEnd(r.publicModel.externalBaseUrl,"/");return"".concat(n,"/_api/wix-code-public-dispatcher/siteview")}var i=e.find(t,{type:"siteextension"});return"//".concat(i.instanceId,".dev.")+r.serviceTopology.wixCloudBaseDomain}(t,n),queryParameters:(a={gridAppId:s.gridAppId,instance:s.instance,viewMode:o},e.reduce(a,(function(r,t,n){return e.isUndefined(t)?r:r.concat(["".concat(n,"=").concat(t)])}),[]).join("&")),options:{headers:{"X-XSRF-TOKEN":r.getCookie("XSRF-TOKEN")}}}},parseQueryParams:function(e){var r=e.slice(e.indexOf("?")+1).split("&"),t={};return r.forEach((function(e){var r=o(e.split("="),2),n=r[0],i=r[1];t[n]=decodeURIComponent(i)})),t},buildScriptsSources:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(e.trimEnd(r.scriptsLocationMap["wixcode-namespaces"],"/"),"/").concat(t.isDebug?"wixcode-namespaces.js":"wixcode-namespaces.min.js"),i="".concat(e.trimEnd(r.scriptsLocationMap["wix-ui-santa"],"/"),"/wixcode/").concat(t.isDebug?"wixcode-components.js":"wixcode-components.min.js"),o="".concat(e.trimEnd(r.scriptsLocationMap["wix-code-platform"],"/"),"/wixCodeNamespacesAndElementorySupport.min.js"),a="".concat(e.trimEnd(r.scriptsLocationMap["wix-code-viewer-app"],"/"),"/app.js");return{namespacesSdkSource:n,externalComponentsSource:i,wixCodeNamespacesAndElementorySupportSource:o,wixCodeViewerAppSource:a}}}}.apply(r,n))||(e.exports=i)},8:function(e,r){e.exports=t},9:function(e,r){e.exports=n},954:function(e,r,t){var n,i;n=[t(955),t(967),t(266),t(133),t(265),t(63),t(77)],void 0===(i=function(e,r,t,n,i,o,a){"use strict";var s=o.messageProxy;return{getAppApi:e.getApi,initMainR:r,specMapUtils:t,appsUtils:n,messageProxy:s,widgetsPreLoader:i,registerDeps:i.registerDeps,wixCodeUrlUtils:a}}.apply(r,n))||(e.exports=i)},955:function(e,r,t){var n,i;n=[t(0),t(265),t(63),t(267),t(966)],void 0===(i=function(e,r,t,n){"use strict";var i=t.workerMessagesService;function o(r){var t=r.rendererModel.clientSpecMap.toJS?r.rendererModel.clientSpecMap.toJS():r.rendererModel.clientSpecMap;return r.rendererModel.wixCodeModel&&e.some(t,{type:"siteextension"})}return{getApi:function(){var t,a=!1,s=!1,c=!1,u=i.getAPI();return{init:function(r,i,a,s,c){if(e.isUndefined(a.applications)&&(a.applications=[]),!u.isAppInitiated()&&(t=a.applications.length>0,o(r)||t||c)){var p=n.build(r,i,a);a.workerProps=p,a.fetchScripts=s,u.init(a)}},sendMessage:u.sendMessage,registerMessageHandler:u.registerMessageHandler,registerMessageModifier:u.registerMessageModifier,isAppInitiated:u.isAppInitiated,getWorkerById:u.getWorkerById,destroyAppsContainer:u.destroyAppsContainer,preLoadWidgets:function(e,t){!a&&o(e)&&r.asyncGetPreLoadMessage(e,t,(function(e){a||(a=!0,u.sendOrHoldMessage(e))}))},preLoadUserCode:function(e,n){(!s&&o(e)||t)&&r.asyncGetPreLoadUserCodeMessage(e,n,(function(e){s||(s=!0,u.sendOrHoldMessage(e))}))},loadUserGeneratedApps:function(e,t,n){0!==n.length&&r.asyncGetLoadUserGeneratedAppsMessage(e,t,n,(function(e){u.sendOrHoldMessage(e)}))},preInitWidgets:function(e,t){!c&&o(e)&&r.asyncGetPreInitMessage(e,t,(function(e){c||(c=!0,u.sendOrHoldMessage(e))}))}}}}}.apply(r,n))||(e.exports=i)},956:function(e,r,t){var n,i;function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}n=[t(0),t(957)],void 0===(i=function(e,r){"use strict";var t=/{urlTemplate:(.*)}/,n=function(t,n){return e.reduce(r,(function(t,i,o){return function(t,n,i){var o=new RegExp("{".concat(i,":(.*?)}"),"g");return t.replace(o,(function(t,o){var a=r[i](o,n);if(e.isUndefined(a))throw new Error("Data getter '".concat(i,"' returned no value for data '").concat(o,"'"));return a}))}(t,n,o)}),t)};return{resolve:function(r,i){var a=o(t.exec(r)||[],2)[1];return e.isUndefined(a)?r:n(a,i)},validate:function(r){if(!e.isString(r))return!1;var n=o(t.exec(r)||[],2)[1];return!e.isUndefined(n)||e.startsWith(r,"http")}}}.apply(r,n))||(e.exports=i)},957:function(e,r,t){var n,i;function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}n=[t(0),t(958),t(959),t(960),t(962),t(963)],void 0===(i=function(e){"use strict";var r=e.drop(arguments,1);return e.assign.apply(e,[{}].concat(o(r)))}.apply(r,n))||(e.exports=i)},958:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";return{serviceTopology:function(r,t){var n=t.serviceTopology;return e.get(n,r)}}}.apply(r,n))||(e.exports=i)},959:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";return{clientSpec:function(r,t){var n=t.clientSpec;return e.get(n,r)}}}.apply(r,n))||(e.exports=i)},960:function(e,r,t){var n,i;n=[t(0),t(77)],void 0===(i=function(e,r){"use strict";return{appStudioBundler:function(e,t){var n=t.clientSpec,i=t.serviceTopology,o=t.currentUrl,a=n.appFields.platform.studio,s=a.wixCodeInstanceId,c=a.wixCodeGridId,u=(o?r.parseQueryParams(o):{})["app-studio-bundler-override"]||"https://".concat(s,".static.pub.").concat(i.wixCloudBaseDomain,"/static/v2");return"".concat(u,"/").concat(c,"/").concat(s,"/appstudio.viewer.js?module-name=bundle")}}}.apply(r,n))||(e.exports=i)},961:function(e,r,t){var n;void 0===(n=function(){"use strict";return{getCookie:function(e){if("undefined"!=typeof document){var r=new RegExp("(?:^|\\;)\\s*".concat(e,"\\=([^;]+)")),t=window.document.cookie.match(r);if(t)return t[1]}}}}.apply(r,[]))||(e.exports=n)},962:function(e,r,t){var n;void 0===(n=function(){"use strict";return{universalEditorApp:function(e,r){var t=r.serviceTopology.scriptsLocationMap["universal-editor-app"];return"".concat(t,"/editorApp.bundle.min.js")}}}.apply(r,[]))||(e.exports=n)},963:function(e,r,t){var n,i;n=[t(0),t(77)],void 0===(i=function(e,r){"use strict";return{appBuilderPreviewBundler:function(t,n){var i=n.rendererModel,o=n.clientSpecMap,a=n.serviceTopology,s=n.currentUrl;if(!i)return"";var c=i.wixCodeModel.appData.codeAppId,u=function(r){return e.find(r,{appDefinitionId:"675bbcef-18d8-41f5-800e-131ec9e08762"}).instanceId}(o),p=(s?r.parseQueryParams(s):{})["app-studio-bundler-override"]||"https://".concat(u,".static.pub.").concat(a.wixCloudBaseDomain,"/static/v2");return"".concat(p,"/").concat(c,"/").concat(u,"/appstudio.viewer.js?module-name=bundle")}}}.apply(r,n))||(e.exports=i)},964:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";var r="APP",t="COMPONENT";function n(e,r,t){var n=e.getDataByQuery(r,t);return n&&n.content?JSON.parse(n.content):null}return{getStyleParams:function(e,r,t,n){var i=e.rendererModel.siteInfo.documentType,o=e.getDataByQuery("masterPage").characterSets,a=r.getAllThemeForSDK(e,n,t);return{styleParams:r.getStylesForSDK(a,t,!1,e.serviceTopology,i,o,!0)}},getPublicData:function(e,i,o,a){var s={};return s[r]=n(e,"tpaData-".concat(i),"masterPage"),s[t]=n(e,o,a),s},getExternalId:function(r,t){return e.get(t,"referenceId")}}}.apply(r,n))||(e.exports=i)},965:function(e,r,t){var n,i;n=[t(0)],void 0===(i=function(e){"use strict";function r(e){return e&&e.replace(/^https?\:/,"")}function t(t,n,i){var o=r(t);if(e.startsWith(o,n)){var a=o.slice(n.length).match(i);return a&&a[1]}}return{buildUrl:function(e,n){var i,o=n.runtimeSource,a=n.hostArtifact,s=void 0===a?"santa":a,c=e.serviceTopology,u="/node_modules/@wix/viewer-platform-worker/dist/wixcode-worker.js";if(i=c.scriptsLocationMap[s],/^https?:\/\/localhost(:[0-9]+)?\/?$/.test(i))return u;var p=function(e,n,i,o,a){if(e)return e;var s=new RegExp("\\/?services\\/".concat(a,"\\/([\\w.]+)")),c=r(o);return t(n,c,s)||t(i,c,s)}(o,e.santaBase,c.scriptsLocationMap[s],c.scriptsDomainUrl,s);return"/_partials/".concat(s,"/").concat(p).concat(u)}}}.apply(r,n))||(e.exports=i)},966:function(e){e.exports=JSON.parse('{"WORKER_CREATED":{"endpoint":"platform-viewer","src":79,"eventId":101,"params":{"worker_id":"worker_id","ts":"ts"}},"WORKER_TERMINATED":{"endpoint":"platform-viewer","src":79,"eventId":102,"params":{"worker_id":"worker_id","ts":"ts"}}}')},967:function(e,r,t){var n,i;function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}n=[t(0),t(133),t(77),t(8)],void 0===(i=function(e,r,t,n){"use strict";return function(i){var a=i.appApi,s=i.siteModel,c=i.isMobileView,u=i.queryUtil,p=i.currentUrl,l=i.isBot,d=i.fetchScripts,f=i.preload,v=void 0===f||f,m=i.hostArtifact,g=void 0===m?"santa":m;p=p||e.get(s,"currentUrl.full",window.document.location.href);var y=!e.isEmpty(u.getParameterByName("debug")),S=t.buildScriptsSources(s.serviceTopology,{isDebug:y}),w=S.namespacesSdkSource,b=S.externalComponentsSource,M=S.wixCodeNamespacesAndElementorySupportSource,A=S.wixCodeViewerAppSource,x=function(e){if("false"===e)return!1;return"true"===e||!window.Worker||l}(u.getParameterByName("useWixCodeFallback")),I={hostArtifact:g,isMobileView:c,isDebug:y,namespacesSdkSource:w,externalComponentsSource:b,wixCodeNamespacesAndElementorySupportSource:M,wixCodeViewerAppSource:A,runtimeSource:u.getParameterByName("WixCodeRuntimeSource"),useWixCodeFallback:x,currentUrl:p},h=u.getParameterByName("viewerPlatformAppSources"),U=u.getParameterByName("viewerPlatformOverrides"),P=u.getParameterByName("controllersUrlOverride");if(U)try{U=JSON.parse(U)}catch(e){}I.applications=r.getAppsBaseInfo({rendererModel:s.rendererModel,clientSpecMap:s.rendererModel.clientSpecMap,serviceTopology:s.serviceTopology,viewerPlatformAppSources:h,viewerPlatformOverrides:U,currentUrl:p,santaBase:s.santaBase,controllersUrlOverride:P}),I.shouldUseWixCodeScripts=e.some(I.applications,(function(e){return"dataBinding"===e.id||e.shouldUseWixCodeScripts})),function(r){var t=o(e.partition(I.applications,{isWixTPA:!1}),2),i=t[0],c=t[1];I.applications=c;var u=i.length>0;a.init(s,r,I,d,u),a.loadUserGeneratedApps(s,p,i),function(r){return v&&(e.some(r,{type:"siteextension"})||I.applications.length)}(r)&&(n.isOpen("sv_moveWixCodeToViewerApp",s)||a.preLoadUserCode(s,p),!!s.publicModel&&a.preLoadWidgets(s,p))}(s.rendererModel.clientSpecMap)}}.apply(r,n))||(e.exports=i)}})}));
//# sourceMappingURL=platformInit.min.js.map