!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],t);else{var n="object"==typeof exports?t(require("lodash")):t(e._);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(window,(function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=116)}({1:function(t,n){t.exports=e},116:function(e,t,n){"use strict";n.r(t),n.d(t,"waitForChangesApplied",(function(){return a})),n.d(t,"save",(function(){return ie})),n.d(t,"application",(function(){return u})),n.d(t,"components",(function(){return l})),n.d(t,"controllers",(function(){return v})),n.d(t,"history",(function(){return h})),n.d(t,"info",(function(){return T})),n.d(t,"language",(function(){return b})),n.d(t,"menu",(function(){return E})),n.d(t,"pages",(function(){return S})),n.d(t,"pagesGroup",(function(){return x})),n.d(t,"routers",(function(){return N})),n.d(t,"siteSegments",(function(){return j})),n.d(t,"siteMembers",(function(){return W})),n.d(t,"fonts",(function(){return P})),n.d(t,"theme",(function(){return G})),n.d(t,"tpa",(function(){return V})),n.d(t,"vfs",(function(){return z})),n.d(t,"mobile",(function(){return X})),n.d(t,"responsiveLayout",(function(){return Z})),n.d(t,"accessibility",(function(){return J})),n.d(t,"account",(function(){return K})),n.d(t,"errors",(function(){return $})),n.d(t,"wixapps",(function(){return ee})),n.d(t,"environment",(function(){return te})),n.d(t,"transactions",(function(){return ne})),n.d(t,"permissions",(function(){return oe}));var o=n(1),i=n.n(o),r=n(2);const p=(e,t)=>new Promise(n=>{e.waitForChangesApplied(()=>n(t))}),a=(e,t)=>e.waitForChangesApplied(t),s=(e,t,n)=>t.runInContext(e,n),c=(e,t)=>!!Object(r.a)(e)||t===e.appDefinitionId;var u={install:function(e,t,n,o){return new Promise((n,r)=>{const{appDefinitionId:p,originInfo:a,editorType:c,sourceTemplateId:u,isSilent:d}=o;if(!p)return void r(new Error("options must contain appDefinitionId"));const l={appDefinitionId:i.a.get(t,"appDefinitionId")},f={origin:{initiator:"APP",type:c,info:a?i.a.assign({},a,l):l}};u&&(f.sourceTemplateId=u),d&&(f.isSilent=!0),s(t.appDefinitionId,e,()=>e.platform.provision(p,f).then(n,r))})},uninstall:function(e,t,n){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(n=>{const i=Object(r.b)(t,{appDefinitionId:o},"appDefinitionId",{isRequired:!0});s(t.appDefinitionId,e,()=>e.platform.uninstall(i)),e.waitForChangesApplied(n)})},isApplicationInstalled:function(e,t,n,o){let{appDefinitionId:i}=o;return new Promise((n,o)=>{i?s(t.appDefinitionId,e,()=>n(e.platform.isAppActive(i))):o(new Error("options must contain appDefinitionId"))})},registerToCustomEvents:function(e,t,n,o){let{eventTypes:i,applicationId:p}=o;const a=Object(r.b)(t,{applicationId:p},"applicationId",{isRequired:!0});return s(t.appDefinitionId,e,()=>e.platform.registerAppToCustomEvents(a,i))},appStudioWidgets:{changeVariation:function(e,t,n,o){let{componentRef:i,variationId:r}=o;return new Promise(n=>{s(t.appDefinitionId,e,()=>e.appStudioWidgets.changeVariation(i,r,n))})},changePreset:function(e,t,n,o){let{componentRef:i,stylePresetId:r,layoutPresetId:p}=o;return s(t.appDefinitionId,e,()=>e.appStudioWidgets.presets.change(i,r,p))},addWidget:function(e,t,n,o){let{containerRef:i,widgetId:p,variationId:a,layout:c,installationType:u,appDefinitionId:d}=o;return new Promise((n,o)=>{const l=Object(r.b)(t,{appDefinitionId:d},"appDefinitionId",{isRequired:!0});s(t.appDefinitionId,e,()=>e.appStudioWidgets.addWidget(l,p,{containerRef:i,variationId:a,layout:c,installationType:u,onSuccess:n,onError:o}))})},getPreset:function(e,t,n,o){let{componentRef:i}=o;return s(t.appDefinitionId,e,()=>e.appStudioWidgets.presets.get(i))},props:{get:function(e,t,n,o){let{widgetRef:i}=o;return s(t.appDefinitionId,e,()=>e.appStudioWidgets.props.get(i))},set:function(e,t,n,o){let{widgetRef:i,newProps:r,shouldFetchData:p}=o;return s(t.appDefinitionId,e,()=>e.appStudioWidgets.props.set(i,r,{shouldFetchData:p}))}}},sessionState:{update:function(e,t,n,o){let{stateMap:i}=o;return s(t.appDefinitionId,e,()=>e.platform.sessionState.update(i)),p(e)}},livePreview:{refresh:function(e,t,n,o){let{source:i,shouldFetchData:p,appDefinitionId:a}=o;const s=Object(r.b)(t,{appDefinitionId:a},"appDefinitionId",{isRequired:!0});return e.platform.livePreview.refresh({apps:[s],source:i||"EditorSDK",shouldFetchData:p})}}};const d=(e,t)=>"wysiwyg.viewer.components.RefComponent"===e.components.getType(t);var l={add:function(e,t,n){let{componentDefinition:o,pageRef:r,customId:p,optionalIndex:c}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((n,u)=>{i.a.has(o,"componentType")||u(new Error("componentDefinition must contain componentType"));const d=e.components.buildDefaultComponentStructure(o.componentType);i.a.merge(d,o);const l=s(t.appDefinitionId,e,()=>e.components.add(r,d,p,c));a(e,()=>n(l))})},addAndAdjustLayout:function(e,t,n){let{componentDefinition:o,pageRef:r,customId:p,optionalIndex:c}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((n,u)=>{i.a.has(o,"componentType")||u(new Error("componentDefinition must contain componentType"));const d=e.components.buildDefaultComponentStructure(o.componentType);i.a.merge(d,o);const l=s(t.appDefinitionId,e,()=>e.components.addAndAdjustLayout(r,d,p,c));a(e,()=>n(l))})},remove:function(e,t,n,o){let{componentRef:i}=o;e.viewMode.get()===e.viewMode.VIEW_MODES.MOBILE?s(t.appDefinitionId,e,()=>e.mobile.hiddenComponents.hide(i)):s(t.appDefinitionId,e,()=>e.components.remove(i))},get:function(e,t,n,o){let{componentRefs:p,properties:a=[],applicationId:s}=o;const c=i.a.compact(i.a.isArray(p)?p:[p]);return i.a.transform(c,(n,o)=>{const p={componentRef:o},c=!a.includes("components"),u=e.components.serialize(o,null,c);if(i.a.assign(p,i.a.pick(u,a)),i.a.includes(a,"sdkType")&&(p.sdkType=e.wixCode.getCompSdkType(o)),i.a.includes(a,"connections")&&(p.connections=e.platform.controllers.connections.get(o)),i.a.includes(a,"style")&&(p.style=e.components.style.get(o)),i.a.includes(a,"role")){const n=e.platform.controllers.connections.get(o),a=Object(r.b)(t,{applicationId:s},"applicationId",{isRequired:!0}),c=i.a.find(n,t=>i.a.get(e.components.data.get(t.controllerRef),"applicationId")===a);p.role=i.a.get(c,"role")}n.push(p)},[])},serialize:function(e,t,n,o){let{componentRef:i,maintainIdentifiers:r=!1}=o;return e.components.serialize(i,null,!1,r)},migrate:function(e,t,n,o){let{componentRef:i,componentDefinition:r}=o;return e.components.migrate(i,r)},getAllComponents:function(e){return e.components.getAllComponents()},getPage:function(e,t,n,o){let{componentRef:i}=o;return e.components.getPage(i)},getById:function(e,t,n,o){let{id:i}=o;return e.components.get.byId(i)},getChildren:function(e,t,n,o){let{componentRef:i,recursive:r=!1,fromDocument:p=!1}=o;return(p?e.components.getChildrenFromFull:e.components.getChildren)(i,r)},getAncestors:function(e,t,n,o){let{componentRef:i}=o;return e.components.getAncestors(i)},getType:function(e,t,n,o){let{componentRef:i}=o;return e.components.getType(i)},isFullWidth:function(e,t,n,o){let{componentRef:i}=o;if(!i)throw new Error("options must include componentRef property");return e.components.is.fullWidth(i)},setFullWidth:function(e,t,n,o){let{componentRef:i,fullWidth:r,margins:p}=o;if(!i)throw new Error("options must include componentRef property");if("boolean"!=typeof r)throw new Error("options must include fullWidth boolean property");return new Promise(t=>{if(r){const{left:t,right:n}=p||{},o={left:Object.assign({vw:0},t),right:Object.assign({vw:0},n)};e.components.layout.setDock(i,o)}else e.components.layout.unDock(i);a(e,t)})},buildDefaultComponentStructure:function(e,t,n,o){let{componentType:i}=o;return e.components.buildDefaultComponentStructure(i)},behaviors:{getRuntimeState:function(e,t,n,o){let{componentRef:i}=o;return e.components.behaviors.getRuntimeState(i)},execute:function(e,t,n,o){let{componentRef:i,behaviorName:r,behaviorParams:a}=o;return s(t.appDefinitionId,e,()=>e.components.behaviors.execute(i,r,a)),p(e)},get:function(e,t,n,o){let{componentRef:i}=o;return e.components.behaviors.get(i)},update:function(e,t,n,o){let{componentRef:i,behavior:r}=o;return e.components.behaviors.update(i,r)},remove:function(e,t,n,o){let{componentRef:i,behaviorName:r,actionName:p}=o;return e.components.behaviors.remove(i,r,p)}},properties:{get:function(e,t,n,o){let{componentRef:i}=o;return e.components.properties.get(i)},update:function(e,t,n,o){let{componentRef:i,props:r}=o;s(t.appDefinitionId,e,()=>e.components.properties.update(i,r))}},data:{get:function(e,t,n,o){let{componentRef:i}=o;return e.components.data.get(i)},update:function(e,t,n,o){let{componentRef:i,data:r}=o;s(t.appDefinitionId,e,()=>e.components.data.update(i,r))},updateInLanguage:function(e,t,n,o){let{componentRef:i,data:r,languageCode:p}=o;s(t.appDefinitionId,e,()=>e.components.data.updateInLang(i,r,p))}},layout:{get:function(e,t,n,o){let{componentRef:i}=o;return e.components.layout.get(i)},update:function(e,t,n,o){let{componentRef:i,layout:r}=o;s(t.appDefinitionId,e,()=>e.components.layout.update(i,r))}},style:{get:function(e,t,n,o){let{componentRef:i}=o;return e.components.style.get(i)},update:function(e,t,n,o){let{componentRef:i,style:r}=o;s(t.appDefinitionId,e,()=>e.components.style.setCustom(i,null,r))},updateFull:function(e,t,n,o){let{componentRef:i,style:r}=o;s(t.appDefinitionId,e,()=>e.components.style.update(i,r))}},stylable:{update:function(e,t,n,o){let{componentRef:i,style:r}=o;s(t.appDefinitionId,e,()=>e.components.stylable.update(i,r))}},design:{get:function(e,t,n,o){let{componentRef:i}=o;return e.components.design.get(i)},update:function(e,t,n,o){let{componentRef:i,designItem:r,design:p,retainCharas:a}=o;s(t.appDefinitionId,e,()=>e.components.design.update(i,p||r,a))}},modes:{showComponentOnlyOnPagesGroup:function(e,t,n,o){let{componentPointer:i,componentRef:r=i,pagesGroupPointer:p}=o;s(t.appDefinitionId,e,()=>e.components.modes.showComponentOnlyOnPagesGroup(r,p))},activateComponentMode:function(e,t,n,o){let{componentRef:i,modeId:r}=o;s(t.appDefinitionId,e,()=>e.components.modes.activateComponentMode(i,r))},applyCurrentToAllModes:function(e,t,n,o){let{componentRef:i}=o;s(t.appDefinitionId,e,()=>e.components.modes.applyCurrentToAllModes(i))},getModes:function(e,t,n,o){let{componentRef:i}=o;return e.components.modes.getModes(i)}},arrangement:{moveToIndex:function(e,t,n,o){let{componentRef:i,index:r}=o;return s(t.appDefinitionId,e,()=>e.components.arrangement.moveToIndex(i,r))},getIndex:function(e,t,n,o){let{componentRef:i}=o;if(!i)throw new Error("options must include componentRef property");return e.components.arrangement.getCompIndex(i)}},refComponents:{removeAllOverrides:function(e,t,n,o){let{componentRef:i}=o;return new Promise((n,o)=>{if(d(e,i))if(c(t,e.components.data.get(i).appDefinitionId)){try{s(t.appDefinitionId,e,()=>e.components.refComponents.removeAllOverrides(i))}catch(e){o(e)}n()}else o("The component with id '".concat(i.id,"' doesn't belong to this app."));else o("This method remove overrides only for a refComponent.")})},openReferredComponent:function(e,t,n,o){let{componentRef:i}=o;return new Promise((n,o)=>{if("wysiwyg.viewer.components.RefComponent"===e.components.getType(i))if(c(t,e.components.data.get(i).appDefinitionId)){try{s(t.appDefinitionId,e,()=>e.components.refComponents.openReferredComponent(i))}catch(e){o(e)}n()}else o("The component with id '".concat(i.id,"' doesn't belong to this app."));else o("This method only opens a refComponent.")})},closeWidgetToReferredComponent:function(e,t,n,o){let{componentRef:i}=o;return new Promise((n,o)=>{if("platform.components.AppWidget"===e.components.getType(i))if(c(t,e.components.data.get(i).appDefinitionId))try{n(s(t.appDefinitionId,e,()=>e.components.refComponents.closeWidgetToReferredComponent(i)))}catch(e){o(e)}else o("The component with id '".concat(i.id,"' doesn't belong to this app."));else o("This method closes only appWidget")})},getAllAppRefComponents:function(e,t,n){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.components.getAllComponentsFromFull(),p=Object(r.b)(t,{appDefinitionId:o},"appDefinitionId",{isRequired:!0});return i.filter(t=>{const n=e.components.data.get(t)||{};return"WidgetRef"===n.type&&n.appDefinitionId===p})},isRefComponentCollapsed:function(e,t,n,o){let{componentRef:r}=o;return"COLLAPSED"===i.a.get(e.components.properties.get(r),"ghost")},getCollapsedRefComponents:function(e,t,n,o){let{componentRef:i,includeInnerCollapsed:r}=o;if(!d(e,i))throw new Error("This method get collapsed components only for a refComponent.");if(!c(t,e.components.data.get(i).appDefinitionId))throw new Error("The component with id '".concat(i.id,"' doesn't belong to this app."));const p=[i];if(r){const t=e.components.getChildren(i,!0);p.push(...t.filter(t=>d(e,t)))}return p.reduce((t,n)=>{const o=e.components.refComponents.getAllGhostRefComponentsPrimaryConnection(n);return o&&Object.keys(o).forEach(i=>{var r;t.push({refHost:n,componentRef:e.components.get.byId(i),role:null===(r=o[i])||void 0===r?void 0:r.role})}),t},[])},collapseReferredComponent:function(e,t,n,o){let{componentRef:i}=o;return new Promise((n,o)=>{if(!e.components.refComponents.isReferredComponent(i))return o("The component with id '".concat(i.id,"' isn't a referred component."));const r=e.components.refComponents.getRefHostCompPointer(i);if(!c(t,e.components.data.get(r).appDefinitionId))return o("The component with id '".concat(i.id,"' doesn't belong to this app."));try{s(t.appDefinitionId,e,()=>e.components.remove(i)),e.waitForChangesApplied(n)}catch(e){return o(e)}})},getTemplateComponent:(e,t,n,o)=>{let{componentRef:i}=o;return e.components.refComponents.getTemplateCompPointer(i)},expandReferredComponent:function(e,t,n,o){let{componentRef:i}=o;return new Promise((n,o)=>{if(!e.components.refComponents.isReferredComponent(i))return o("The component with id '".concat(i.id,"' isn't a referred component."));const r=e.components.refComponents.getRefHostCompPointer(i);if(!c(t,e.components.data.get(r).appDefinitionId))return o("The component with id '".concat(i.id,"' doesn't belong to this app."));try{s(t.appDefinitionId,e,()=>e.components.refComponents.unGhostifyComponent(i)),e.waitForChangesApplied(n)}catch(e){return o(e)}})}}};const f={SITE_HEADER:!0,SITE_FOOTER:!0};const g=(e,t)=>i()(t).thru(e.components.getAncestors).reverse().tail().map("id").head();function m(e,t,n,o,i){let{appDefinitionId:r}=t;const p=n?n.id:null,a=t=>{if(p&&e.pages.popupPages.isPopup(p)){return"masterPage"!==e.components.getPage(t).id}return!0};return(i?e.components.getAllComponentsFromFull:e.components.getAllComponents)(p,t=>{const n=e.components.getType(t);return function(e){return"platform.components.AppController"===e||"platform.components.AppWidget"===e}(n)&&e.components.data.get(t).applicationId===r&&a(t)||o&&e.tpa.isTpaByCompType(n)&&e.components.data.get(t).appDefinitionId===r&&a(t)})}function I(e,t,n,o){const r=m(e,t,n,o),p=i()(r).map(e.components.refComponents.getTemplateCompPointer).compact().keyBy("id").value();return i()(r).reject(e=>{let{id:t}=e;return p[t]}).map(e=>({controllerRef:e})).value()}const D=function(e,t,n){let{pageRef:o=e.pages.getFocusedPage(),appDefinitionId:i,includeTPAWidget:p}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a={appDefinitionId:Object(r.b)(t,{appDefinitionId:i},"appDefinitionId",{isRequired:!0})};return I(e,a,o,p)};function y(e,t,n,o){let{controllerRef:r,scope:p="COMPONENT"}=o;const a=e.tpa.isTpaByCompType(e.components.getType(r)),s=e.components.data.get(r);if(a)return function(e,t){let{controllerRef:n,compData:o,scope:i}=t,r={};e.tpa.data.getPublicData(o.applicationId,n,e=>{if(e.error)throw new Error(e.error);r=e});const p=e.platform.controllers.getName(n);return{type:o.widgetId,config:r[i],displayName:p}}(e,{controllerRef:r,compData:s,scope:p});const c=e.platform.controllers.settings.get(r);return{type:i.a.get(s,"controllerType"),config:c,displayName:e.platform.controllers.getName(r)}}function R(e,t,n,o){let{controllerRef:i}=o;return e.platform.controllers.connections.getControllerConnections(i)}var v={listControllers:D,listAllControllers:function(e,t,n){let{appDefinitionId:o,includeTPAWidget:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const p={appDefinitionId:Object(r.b)(t,{appDefinitionId:o},"appDefinitionId",{isRequired:!0})};return I(e,p,null,i)},listConnectableControllers:function(e,t,n,o){let{componentRef:p,appDefinitionId:a,includeTPAWidget:s}=o;const c=e.components.getPage(p),u={appDefinitionId:Object(r.b)(t,{appDefinitionId:a},"appDefinitionId",{isRequired:!0})},d=m(e,u,c,s,!0),l=g(e,p);return i()(d).filter(t=>function(e,t,n,o){const i=e.components.getPage(o);if("masterPage"===i.id){const t=g(e,o);return!(t&&!f[t])||n===t}return t===i.id}(e,i.a.get(c,"id"),l,t)).filter(t=>function(e,t,n){return"platform.components.AppWidget"!==e.components.getType(n)||e.components.isDescendantOfComp(t,n)}(e,p,t)).map(e=>({controllerRef:e})).value()},getControllerConnections:R,listControllerConnections:R,listConnections:function(e,t,n,o){let{componentRef:r}=o;const p=e.platform.controllers.connections.get(r);return i.a.reject(p,{type:"WixCodeConnectionItem"})},listConnectedComponents:function(e,t,n,o){let{controllerRef:i}=o;return e.platform.controllers.connections.getConnectedComponents(i)},connect:function(e,t,n,o){let{connectToRef:i,controllerRef:r,role:p,connectionConfig:a,isPrimary:c,subRole:u}=o;return s(t.appDefinitionId,e,()=>e.platform.controllers.connections.connect(i,r,p,a,c,u)),{connectToRef:i,controllerRef:r,role:p,subRole:u}},disconnect:function(e,t,n,o){let{connectToRef:i,controllerRef:r,role:p}=o;return s(t.appDefinitionId,e,()=>e.platform.controllers.connections.disconnect(i,r,p))},getData:y,saveConfiguration:function(e,t,n,o){let{controllerRef:i,config:r,scope:p="COMPONENT"}=o;const a=e.components.getType(i);return e.tpa.isTpaByCompType(a)?new Promise((n,o)=>s(t.appDefinitionId,e,()=>e.tpa.data.setMultiple(i,r,p,e=>e.error?o(new Error(e.error.message)):n(e)))):s(t.appDefinitionId,e,()=>e.platform.controllers.settings.set(i,r))},setDisplayName:function(e,t,n,o){let{controllerRef:i,name:r}=o;return s(t.appDefinitionId,e,()=>e.platform.controllers.setName(i,r))},setState:function(e,t,n,o){let{state:i}=o;return s(t.appDefinitionId,e,()=>e.platform.controllers.setState(i))},setExternalId:function(e,t,n,o){let{controllerRef:i,externalId:r}=o;return s(t.appDefinitionId,e,()=>e.platform.controllers.settings.setExternalId(i,r)),p(e)},getExternalId:function(e,t,n,o){let{controllerRef:i}=o;return e.platform.controllers.settings.getExternalId(i)},findAllByType:function(e,t,n,o){let{controllerType:i,pageRef:r,appDefinitionId:p}=o;const a=D(e,t,n,{pageRef:r||null,appDefinitionId:p}),s=[];for(const t of a){y(e,0,0,t).type===i&&s.push(t)}return s}};var P={getFontsOptions:function(e){return e.fonts.getFontsOptions()}};var h={add:function(e,t,n,o){let{label:i}=o;return new Promise(t=>a(e,()=>{e.history.add(i),t()}))}};function w(e,t,n){let{applicationId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Object(r.b)(t,{applicationId:o},"applicationId",{isRequired:!0}),p="wix-code"===t.appDefinitionId?e.wixCode.getClientSpec().applicationId:i;return e.tpa.app.getData(p).instance}var T={getSiteId:function(e){return e.generalInfo.getSiteId()},getMetaSiteId:function(e){return e.generalInfo.getMetaSiteId()},getPublicUrl:function(e){return e.generalInfo.getPublicUrl()},isSitePublished:function(e){return e.generalInfo.isSitePublished()},getLanguage:function(e){return e.generalInfo.getLanguage()},getRegionalLanguage:function(e){return e.generalInfo.getRegionalLanguage()},isSiteSaved:function(e){return!e.generalInfo.isFirstSave()&&!e.generalInfo.isDraft()},isHttpsEnabled:function(e){return e.generalInfo.isHttpsEnabled()},getAppInstance:w,getAppInstancePayload:function(e,t,n){const o=w(e,t,n);return o?function(e){try{const t=e.split(".")[1];return JSON.parse(atob(t))}catch(t){throw new Error("Unable to parse app's instance token. Token - ".concat(e))}}(o):null},getAppInstanceId:function(e,t,n){let{applicationId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Object(r.b)(t,{applicationId:o},"applicationId",{isRequired:!0}),p="wix-code"===t.appDefinitionId?e.wixCode.getClientSpec().applicationId:i;return e.tpa.app.getData(p).instanceId},getCurrency:function(e){return e.generalInfo.getCurrency()},getTimeZone:function(e){return e.generalInfo.getTimeZone()},getUserId:function(e){return e.generalInfo.getUserInfo().userId},getUserInfo:function(e){return e.generalInfo.getUserInfo()},getVendorProductId:function(e,t,n,o){const p=i.a.get(o,"appDefinitionId");if(!p&&Object(r.a)(t))throw new Error("options must contain appDefinitionId");const a=p?e.platform.getAppDataByAppDefId(p):e.platform.getAppDataByApplicationId(t.applicationId);return i.a.get(a,"vendorProductId")},getRegion:function(e){return e.generalInfo.getLocale()},getArtifactsUrls:function(e,t,n){return e.generalInfo.getArtifactsUrl(n)},getArtifactOverrides:function(e){return e.generalInfo.getArtifactOverrides()},getSiteDisplayName:function(e){return e.siteDisplayName.get()},getStageViewMode:function(e){return e.documentMode.getComponentViewMode()},getSiteMap:function(e){return e.tpa.getSiteMap()},getUserGEO:function(e){return e.generalInfo.getGeo()}};var b={add:function(e,t,n,o){let{languageCode:i}=o;return s(t.appDefinitionId,e,()=>e.language.add(i)),p(e)},current:{set:function(e,t,n,o){let{languageCode:i}=o;return s(t.appDefinitionId,e,()=>e.language.current.set(i))},get:function(e,t){return s(t.appDefinitionId,e,()=>e.language.current.get())}},component:{getTranslations:function(e,t,n,o){let{componentRef:i}=o;return e.language.component.getTranslations(i)},data:{remove:function(e,t,n,o,i){return s(t.appDefinitionId,e,()=>e.multilingual.components.data.remove(o,i))}}},original:{get:function(e){return e.language.original.get()}},setLanguages:function(e,t){return e.language.init(t)},getTranslationLanguages:function(e){return e.language.getFull()},autoTranslate:()=>{throw new Error("not implemented for this editor")},multilingual:{isEnabled:function(e){return e.language.multilingual.isEnabled()},languages:{remove:function(e,t,n,o){return s(t.appDefinitionId,e,()=>e.multilingual.languages.remove(o))},removeAll:function(e,t){return s(t.appDefinitionId,e,()=>e.multilingual.languages.removeAll())}}}};const C=["MEMBERS_SUB_MENU","MEMBERS_LOGIN_MENU","MEMBERS_LOGIN_ICONS_MENU","CUSTOM_MAIN_MENU","CUSTOM_MENU"];var E={create:function(e,t,n,o){let{menuData:p,customId:a,applicationId:c}=o;const u=Object(r.b)(t,{applicationId:c},"applicationId",{isRequired:!0}),d=i.a.assign({appId:u},p);return s(t.appDefinitionId,e,()=>e.menu.create(d,a))},connect:function(e,t,n,o){let{menuCompPointer:i,menuId:r}=o;s(t.appDefinitionId,e,()=>e.menu.connect(i,r))},update:function(e,t,n,o){let{menuId:i,menuData:r}=o;s(t.appDefinitionId,e,()=>e.menu.update(i,r))},remove:function(e,t,n,o){let{menuId:i}=o;s(t.appDefinitionId,e,()=>e.menu.remove(i))},addItem:function(e,t,n,o){let{menuId:i,menuItem:r}=o;s(t.appDefinitionId,e,()=>e.menu.addItem(i,r))},getById:function(e,t,n,o){let{menuId:i}=o;return e.menu.getById(i)},getDefaultMenuId:function(e,t){return s(t.appDefinitionId,e,async()=>{const t=(await e.menu.getAll()).filter(e=>!C.includes(e.id));if(0===t.length)return null;const n=t.find(e=>"MAIN_MENU"===e.menuType),o=t[0];return(n||o).id})}};function A(e,t,n,o,r){let{pageRef:a,pageLink:c}=o;const u=i.a.get(a,"id")||c;if(u)return s(t.appDefinitionId,e,()=>e.pages.navigateTo(u)),p(e,r)}function O(e,t,n,o){let{pageRef:i}=o;return e.pages.data.get(i.id)}var S={navigateTo:A,setState:function(e,t,n,o){let{state:i}=o;s(t.appDefinitionId,e,()=>e.platform.pages.setState(i))},getCurrent:function(e){return e.pages.getReference(e.pages.getFocusedPageId())},getPrimary:function(e){return e.pages.getReference(e.pages.getPrimaryPageId())},getHomePage:function(e){const t=e.homePage.get();return e.components.get.byId(t)},add:function(e,t,n,o){let{title:i,definition:r,shouldAddMenuItem:p,shouldNavigateToPage:a=!0}=o;const c=s(t.appDefinitionId,e,()=>e.pages.add(i,r,p));return a?A(e,t,0,{pageRef:c},c):c},getPageData:O,isDynamicPage:function(e,t,n,o){let{pageRef:i}=o;const r=e.routers.getRouterRef.byPage(i);return Boolean(r)},rename:function(e,t,n,o){let{pageRef:i,title:r}=o;return s(t.appDefinitionId,e,()=>e.pages.data.update(i.id,{title:r}))},duplicate:function(e,t,n,o){let{pageId:i,shouldAddMenuItem:r,shouldDuplicatePageCode:p}=o;return s(t.appDefinitionId,e,()=>e.pages.duplicate(i,r,p))},data:{get:O,getAll:function(e){return e.pages.getPagesData()},update:function(e,t,n,o){let{pageRef:i,data:r}=o;s(t.appDefinitionId,e,()=>e.pages.data.update(i.id,r))}},pageUriSEO:{convertPageNameToUrl:function(e,t,n,o){let{title:i}=o;return e.pages.data.pageUriSEO.convertPageNameToUrl(i)}},serialize:function(e,t,n,o){let{pageRef:i,maintainIdentifiers:r=!1}=o;return e.pages.serialize(i.id,r)},permissions:{hasPassword:function(e,t,n,o){let{pageRef:i}=o;return e.pages.permissions.hasPassword(i.id)},updatePagePassword:function(e,t,n,o){let{pageRef:i,plainPassword:r}=o;s(t.appDefinitionId,e,()=>e.pages.permissions.updatePassword(i.id,r))},removePagePassword:function(e,t,n,o){let{pageRef:i}=o;s(t.appDefinitionId,e,()=>e.pages.permissions.removePassword(i.id))},duplicatePagePassword:function(e,t,n,o){let{destinationPageRef:i,sourcePageRef:r}=o;return new Promise((n,o)=>{s(t.appDefinitionId,e,()=>e.pages.permissions.duplicatePagePassword(i.id,r.id,n,o))})},duplicateGroupsPermissions:function(){return new Promise(e=>{e()})}},remove:function(e,t,n,o){let{pageRef:i}=o;return new Promise((n,o)=>{const r=e.pages.data.get(i.id);if(!r)return void o("page with id '".concat(i.id,"' doesn't exist"));if(!c(t,r.managingAppDefId))return void o("page with id '".concat(i.id,"' can not be deleted. page is not managed by this application"));const{id:p}=e.pages.getCurrentPage();if(p===i.id)return void o("It is not allowed to delete current page (".concat(i.id,"), please navigate to another page"));const a=e.homePage.get();if(i.id!==a)if(r.tpaApplicationId)o("It is not allowed to delete a section page '(".concat(i.id,")'"));else{try{s(t.appDefinitionId,e,()=>e.pages.remove(i.id))}catch(e){return void o(e)}n()}else o("It is not allowed to delete homePage (".concat(i.id,"), please set a new page as homePage and try again"))})},getApplicationPages:function(e,t,n){let{appDefinitionId:o,applicationId:i,includeUnmanaged:p}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=Object(r.b)(t,{appDefinitionId:o},"appDefinitionId",{isRequired:!1}),s=Object(r.b)(t,{applicationId:i},"applicationId",{isRequired:p});return a?e.pages.getPagesData().filter(e=>{let{managingAppDefId:t,tpaApplicationId:n}=e;return t===a||p&&n===s}):[]},popupPages:{add:(e,t,n,o)=>{let{title:i,definition:r,shouldNavigateToPage:p=!0}=o;const a=s(t.appDefinitionId,e,()=>e.pages.popupPages.add(i,r));return p?A(e,t,0,{pageRef:a},a):a},addConnected:(e,t,n,o)=>{let{title:p,definition:c,controllerType:u,popupRole:d,shouldNavigateToPage:l=!0,appDefinitionId:f}=o;return new Promise(n=>{s(t.appDefinitionId,e,()=>{const o=e.pages.popupPages.add(p,c),s=Object(r.b)(t,{appDefinitionId:f},"appDefinitionId",{isRequired:!0}),g=i.a.defaultsDeep({data:{controllerType:u,name:u,applicationId:s}},e.components.buildDefaultComponentStructure("platform.components.AppController")),m=e.components.add(o,g);a(e,()=>{const i=e.components.getChildren(o);e.platform.controllers.connections.connect(i[0],m,d,{},!0),n(l?A(e,t,0,{pageRef:o},o):o)})})})},open:(e,t,n,o)=>{let{popupRef:r}=o;const p=i.a.get(r,"id");p&&s(t.appDefinitionId,e,()=>e.pages.popupPages.open(p))},close:(e,t)=>{s(t.appDefinitionId,e,()=>e.pages.popupPages.close())},isPopupOpened:e=>e.pages.popupPages.isPopupOpened(),getApplicationPopups:function(e,t,n){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Object(r.b)(t,{appDefinitionId:o},"appDefinitionId",{isRequired:!1});return i?e.pages.popupPages.getDataList().filter(e=>{let{managingAppDefId:t}=e;return t===i}):[]}}};var x={create:function(e,t,n,o){let{groupName:i,applicationId:p}=o;const a=Object(r.b)(t,{applicationId:p},"applicationId",{isRequired:!0}),c=s(t.appDefinitionId,e,()=>e.pagesGroup.create({groupName:i,appId:a}));return Promise.resolve(c)},addPageToPagesGroup:function(e,t,n,o){let{pagesGroupPointer:i,pageId:r}=o;s(t.appDefinitionId,e,()=>e.pagesGroup.addPageToPagesGroup(i,r))},getById:function(e,t,n,o){let{pagesGroupId:i}=o;return e.pagesGroup.getById(i)},getByGroupName:function(e,t,n,o){let{groupName:i}=o;return e.pagesGroup.getByGroupName(i)},getAll:function(e,t,n){let{applicationId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=Object(r.b)(t,{applicationId:o},"applicationId",{isRequired:!0});return e.pagesGroup.getAll(i)},remove:function(e,t,n,o){let{pagesGroupPointer:i}=o;s(t.appDefinitionId,e,()=>e.pagesGroup.remove(i))}};function F(e,t,n,o){let{routerRef:r}=o;const p=e.routers.get.byRef(r);if(p&&c(t,p.appDefinitionId))return{id:p.id,prefix:p.prefix,config:p.config,pages:i()(p.pages).invertBy().map((t,n)=>({pageRef:e.pages.getReference(n),pageRoles:t})).value()}}function M(e,t,n,o){let{prefix:i}=o;const r=e.routers.getRouterRef.byPrefix(i);if(!r)return r;const p=e.routers.get.byRef(r);return p&&c(t,p.appDefinitionId)?r:void 0}var N={add:function(e,t,n){let{prefix:o,config:i,group:p,appDefinitionId:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(n=>{const c={appDefinitionId:Object(r.b)(t,{appDefinitionId:a},"appDefinitionId",{isRequired:!0}),prefix:o,config:i};p&&(c.group=p);n(s(t.appDefinitionId,e,()=>e.routers.add(c)))})},remove:function(e,t,n,o){let{routerRef:i}=o;const r=e.routers.get.byRef(i);r&&c(t,r.appDefinitionId)&&s(t.appDefinitionId,e,()=>e.routers.remove(i))},get:F,getAll:function(e,t,n){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const p=Object(r.b)(t,{appDefinitionId:o},"appDefinitionId",{isRequired:!0});return i.a.map(e.routers.get.byApp(p),o=>{let{prefix:i}=o;const r=M(e,t,n,{prefix:i});return F(e,t,0,{routerRef:r})})},update:function(e,t,n,o){let{routerRef:i,prefix:r,config:p}=o;return new Promise((n,o)=>{const a=e.routers.get.byRef(i);a&&c(t,a.appDefinitionId)?(s(t.appDefinitionId,e,()=>e.routers.update(i,{prefix:r,config:p})),n()):o()})},getByPage:function(e,t,n,o){let{pageRef:i}=o;const r=e.routers.getRouterRef.byPage(i);if(!r)return r;const p=e.routers.get.byRef(r);return p&&c(t,p.appDefinitionId)?r:void 0},getByPrefix:M,isValidPrefix:function(e,t,n,o){let{prefix:i,applicationId:p}=o;const a=Object(r.b)(t,{applicationId:p},"applicationId",{isRequired:!0});return e.routers.isValidPrefix(a,i)},getCurrentDynamicRouting:function(e){const t=e.routers.getCurrentInnerRoute();if(t.isDynamic){const n=e.routers.get.byId(t.routerId);return t.prefix=n.prefix,delete t.isDynamic,t}return null},pages:{add:function(e,t,n,o){let{routerRef:i,pageTitle:r,pageRoles:p}=o;return new Promise(n=>{const o=e.routers.get.byRef(i);o&&c(t,o.appDefinitionId)||n();n(s(t.appDefinitionId,e,()=>e.routers.pages.add(i,r,p)))})},delete:function(e,t,n,o){let{routerRef:i,pageRef:r}=o;return new Promise((n,o)=>{const p=e.routers.get.byRef(i);p&&c(t,p.appDefinitionId)?(s(t.appDefinitionId,e,()=>e.pages.remove(r.id)),n()):o()})},connect:function(e,t,n,o){let{routerRef:i,pageRef:r,pageRoles:p}=o;const a=e.routers.get.byRef(i);a&&c(t,a.appDefinitionId)&&s(t.appDefinitionId,e,()=>e.routers.pages.connect(i,r,p))},disconnect:function(e,t,n,o){let{routerRef:i,pageRef:r}=o;const p=e.routers.get.byRef(i);p&&c(t,p.appDefinitionId)&&s(t.appDefinitionId,e,()=>e.routers.pages.disconnect(i,r))},move:function(e,t,n,o){let{fromRouterRef:i,toRouterRef:r,pageRef:p}=o;const a=e.routers.get.byRef(i),u=e.routers.get.byRef(r);a&&u&&c(t,u.appDefinitionId)&&c(t,a.appDefinitionId)&&s(t.appDefinitionId,e,()=>e.routers.pages.move(p,i,r))},listConnectablePages:function(e){return e.routers.pages.listConnectablePages()}}};var j={getFooter:function(e){return e.siteSegments.getFooter()},getHeader:function(e){return e.siteSegments.getHeader()},getPagesContainer:function(e){return e.siteSegments.getPagesContainer()},getSiteStructure:function(e){return e.siteSegments.getSiteStructure()}};var W={getCustomNoPermissionsPageId:function(e){return e.siteMembers.getCustomNoPermissionsPageId()},setCustomNoPermissionsPageId:function(e,t,n,o){return e.siteMembers.setCustomNoPermissionsPageId(o)}};var G={styles:{getAll:function(e){return e.theme.styles.getAll()}},colors:{getAll:function(e){return e.theme.colors.getAll()}},fonts:{getMap:function(e){return e.theme.fonts.getMap()}}};const _={TYPE:{SECTION:"tpaSection",WIDGET:"tpaWidget",PLATFORM_ONLY:"platformOnly"}},U={TYPE:{PLATFORM:"PLATFORM",STUDIO:"STUDIO",STUDIO_WIDGET:"STUDIO_WIDGET",PAGE_OUT_OF_IFRAME:"PAGE_OUT_OF_IFRAME",WIDGET_OUT_OF_IFRAME:"WIDGET_OUT_OF_IFRAME",WIDGET:"WIDGET",PAGE:"PAGE"}},B=e=>{var t,n,o;return(null==e||null===(t=e.appFields)||void 0===t||null===(n=t.appService)||void 0===n?void 0:n.components)||(null==e||null===(o=e.data)||void 0===o?void 0:o.components)||(null==e?void 0:e.components)||[]},L=function(e){return(e=>Object.values((null==e?void 0:e.widgets)||{}).some(e=>!!e.appPage&&!e.appPage.hidden))(e)?_.TYPE.SECTION:(e=>B(e).some(e=>e.type===U.TYPE.STUDIO||e.compType===U.TYPE.STUDIO_WIDGET))(e)?_.TYPE.PLATFORM_ONLY:(e=>Object.values((null==e?void 0:e.widgets)||{}).some(e=>!e.appPage&&!!e.default))(e)?_.TYPE.WIDGET:(e=>{var t;return Boolean(null==e||null===(t=e.appFields)||void 0===t?void 0:t.platform)||B(e).some(e=>e.type===U.TYPE.PLATFORM||e.compType===U.TYPE.PLATFORM)})(e)?_.TYPE.PLATFORM_ONLY:_.TYPE.WIDGET},q=(e,t)=>{const{appDefinitionId:n,applicationId:o}=e.components.data.get(t)||{};return n||o};function k(e,t,n,o){return new Promise((n,r)=>{const p=i.a.clone(o);i.a.get(o,"appDefinitionId")?o.appDefinitionId!==e.platform.editorApps.WIX_CODE.appDefId?e.tpa.appMarket.getDataAsync(o.appDefinitionId).then(a=>{if(!a||a.error)return void r(new Error("Application with ".concat(o.appDefinitionId," appDefinitionId do not exist.")));if("Wix"===a.by){p.callback=function(p){if(p.onError)r(new Error(p.onError));else if(t=e.tpa.app.getDataByAppDefId(o.appDefinitionId),p.page){const o=e.pages.data.get(p.page.id);n({instanceId:i.a.get(t,"instanceId"),pageRef:p.page,pageUriSEO:i.a.get(o,"pageUriSEO"),title:i.a.get(o,"title")})}else n({instanceId:i.a.get(t,"instanceId")})};if(e.tpa.app.isInstalled(o.appDefinitionId)&&!function(e){var t;return L(e)===_.TYPE.WIDGET&&(null==e||null===(t=e.widgets)||void 0===t?void 0:t.every(e=>!e.addOnlyOnce))}(a))return void r(new Error("Application already installed."));s(t.appDefinitionId,e,()=>{const s=function(e){var t;return 1===(null===(t=e.componentTypes)||void 0===t?void 0:t.length)&&e.componentTypes.includes(U.TYPE.PLATFORM)}(o)&&e.tpa.app.hasEditorPlatformPart(a);if(L(a)===_.TYPE.PLATFORM_ONLY||s){const p={appDefinitionId:i.a.get(t,"appDefinitionId")},a=o.originInfo?i.a.assign({},o.originInfo,p):p,s={origin:{initiator:"APP",type:o.editorType,info:a}};return o.sourceTemplateId&&(s.sourceTemplateId=o.sourceTemplateId),o.isSilent&&(s.isSilent=!0),e.platform.provision(o.appDefinitionId,s).then(n,r)}return e.tpa.app.add(o.appDefinitionId,p)})}else r(new Error("Can't add a non Wix application"))}):e.wixCode.provision({onSuccess:n,onError:r}):r(new Error("options must contain appDefinitionId"))})}const Y=(e,t)=>n=>{n.error?t(new Error(n.error.message)):e(n)};var V={isAppSectionInstalled:function(e,t,n){let{sectionId:o,appDefinitionId:p}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((n,a)=>{if(!o)return void a(new Error("options must contain sectionId"));let s=t.applicationId;if(!Object(r.a)(t)||p){if(p){const t=e.tpa.app.getDataByAppDefId(p);s=i.a.get(t,"applicationId")}n(e.tpa.section.isSectionInstalledByTpaPageId(s,o))}else a(new Error("options must contain appDefinitionId"))})},isApplicationInstalled:function(e,t,n){let{appDefinitionId:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((t,n)=>{if(!o)return void n(new Error("options must contain appDefinitionId"));t(e.tpa.app.isInstalled(o))})},setStyleParams:function(e,t,n,o){return new Promise((n,r)=>{if(!o||!o.compRef)return void r("options must include compRef property");if(!o||!o.styleParams||!i.a.isArray(o.styleParams))return void r("options must include styleParams property and styleParams must be an array");const p=q(e,o.compRef);p?c(t,p)?s(t.appDefinitionId,e,()=>e.tpa.style.setCompStyleParam(o.compRef,o.styleParams,()=>n())):r("It is not allowed to set style params for other applications, application ".concat(t.appDefinitionId," cannot set applications ").concat(p," components style params")):r("could not find component data for the given component ref")})},getStyleParams:function(e,t,n,o){return new Promise((n,i)=>{if(!o||!o.compRef)return void i("options must include compRef property");const r=q(e,o.compRef);if(!r)return void i("could not find component data for the given component ref");if(!c(t,r))return void i("It is not allowed to get the style params from other applications, application ".concat(t.appDefinitionId," cannot get applications ").concat(r," components style params"));const{style:p}=e.tpa.style.getByComp(o.compRef)||{};n(p)})},getSiteTextPresets:function(e,t,n,o){if(!o||!o.compRef)throw new Error("options must include compRef property");const{siteTextPresets:i}=e.tpa.style.get(o.compRef.id);return i},getSiteColors:function(e,t,n,o){if(!o||!o.compRef)throw new Error("options must include compRef property");const{siteColors:i}=e.tpa.style.get(o.compRef.id);return i},data:{getAll:function(e,t,n,o){return new Promise((t,n)=>{if(!o||!o.compRef)return void n(new Error("options must include compRef property"));const{applicationId:i}=e.components.data.get(o.compRef,null,!0)||{};void 0!==i?e.tpa.data.getPublicData(i,o.compRef,Y(t,n)):n(new Error("could not find component data for the given component ref"))})},set:function(e,t,n,o){return new Promise((n,i)=>{if(!o||!o.compRef)return void i(new Error("options must include compRef property"));if(!o.key)return void i(new Error("options must include key property"));const r=q(e,o.compRef);r?c(t,r)?s(t.appDefinitionId,e,()=>e.tpa.data.set(o.compRef,o.key,o.value,o.scope||"COMPONENT",Y(n,i))):i(new Error("it is not allowed to set the public data from other applications, application ".concat(t.appDefinitionId," cannot set applications ").concat(r," public data"))):i(new Error("could not find component data for the given component ref"))})},remove:function(e,t,n,o){return new Promise((n,i)=>{if(!o||!o.compRef)return void i(new Error("options must include compRef property"));if(!o.key)return void i(new Error("options must include key property"));const r=q(e,o.compRef);r?c(t,r)?s(t.appDefinitionId,e,()=>e.tpa.data.remove(o.compRef,o.key,o.scope||"COMPONENT",Y(n,i))):i(new Error("it is not allowed to remove the public data from other applications, application ".concat(t.appDefinitionId," cannot remove applications ").concat(r," public data"))):i(new Error("could not find component data for the given component ref"))})}},add:{application:k,component:function(e,t,n,o){return new Promise((n,p)=>{const a=i.a.clone(o);if(i.a.get(o,"componentType")){if(!o.appDefinitionId){if(Object(r.a)(t))return void p(new Error("options must contain appDefinitionId"));a.appDefinitionId=t.appDefinitionId}if("WIDGET"===o.componentType){if(!i.a.isObject(o.widget))return void p(new Error("options must contain a widget object"));a.widget.tpaWidgetId=o.widget.widgetId}else if("PAGE"===o.componentType){if(!i.a.isObject(o.page))return void p(new Error("options must contain a page object"));if(o.page.isHidden&&!i.a.isBoolean(o.page.isHidden))return void p(new Error("isHidden param should be of type boolean"))}a.callback=function(t){if(t.onError)p(new Error(t.onError));else if("WIDGET"===o.componentType)n({compId:t.comp.id});else{const o=e.pages.data.get(t.page.id);n({compId:t.sectionId,pageRef:t.page,pageUriSEO:i.a.get(o,"pageUriSEO"),title:i.a.get(o,"title")})}},s(t.appDefinitionId,e,()=>e.tpa.comp.add(a))}else p(new Error("options must contain componentType"))})}},app:{getDataByAppDefId:function(e,t,n,o){return e.tpa.app.getDataByAppDefId(o)},getAllCompsByApplicationId:function(e,t,n,o){return e.tpa.app.getAllCompsByApplicationId(o)},refreshApp:function(e,t){let{applicationId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=Object(r.b)(t,{applicationId:n},"applicationId",{isRequired:!0}),i=e.tpa.app.getAllCompsByApplicationId(o);return s(t.appDefinitionId,e,()=>e.tpa.app.refreshApp(i))},delete:function(e,t){let{applicationId:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(o=>{const i=Object(r.b)(t,{applicationId:n},"applicationId",{isRequired:!0});s(t.appDefinitionId,e,()=>e.tpa.app.delete(i)),e.waitForChangesApplied(o)})},add:k}};function H(e){return{name:e.name,fullPath:e.location,isDirectory:e.directory}}var z={listChildren:function(e,t,n,o){const r=e.wixCode.fileSystem,p=r.getVirtualDescriptor(o.path,!0);return r.getChildren(p).then(e=>i.a.map(e,H))},readFile:function(e,t,n,o){const i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return i.readFile(r)},writeFile:function(e,t,n,o){const i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return s(t.appDefinitionId,e,()=>i.writeFile(r,o.content))},deleteFile:function(e,t,n,o){const i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return s(t.appDefinitionId,e,()=>i.deleteItem(r))},flush:function(e,t){return s(t.appDefinitionId,e,()=>e.wixCode.fileSystem.flush())},getViewerInfo:function(e){return e.wixCode.fileSystem.getViewerInfo()}};var X={hiddenComponents:{show:function(e,t,n,o){let{componentRef:i}=o;const r=e.pages.getFocusedPageId();s(t.appDefinitionId,e,()=>e.mobile.hiddenComponents.show(i.id,r))}}};var Z={get:function(e,t,n,o){let{componentRef:i}=o;return e.responsiveLayout.get(i)},update:function(e,t,n,o){let{componentRef:i,responsiveLayout:r}=o;s(t.appDefinitionId,e,()=>e.responsiveLayout.update(i,r))}};var J={getSkipToContent:function(e){return e.accessibility.skipToContent.get()},setSkipToContent:function(e,t,n,o){return s(t.appDefinitionId,e,()=>e.accessibility.skipToContent.set(o))},getVisualFocus:function(e){return e.accessibility.visualFocus.get()},setVisualFocus:function(e,t,n,o){return s(t.appDefinitionId,e,()=>e.accessibility.visualFocus.set(o))},getAutoDomReorder:function(e){return e.accessibility.autoDomReorder.get()},setAutoDomReorder:function(e,t,n,o){return s(t.appDefinitionId,e,()=>e.accessibility.autoDomReorder.set(o))}};var K={isCoBranded:function(e){return e.account.isCoBranded()}},Q=n(4);var $={registerToErrorThrownForContext:function(e,t){const n=Q.a+t.appDefinitionId;e.platform.requestAPIFromWorker(n).then(n=>{let{callback:o}=n;return e.registerToErrorThrownForContext(t.appDefinitionId,o)})},unRegisterToErrorThrownForContext:function(e,t){const n=Q.a+t.appDefinitionId;e.platform.requestAPIFromWorker(n).then(n=>{let{callback:o}=n;return e.unRegisterToErrorThrownForContext(t.appDefinitionId,o)})}};var ee={migrate:{convertAppPage:function(e,t,n,o){let{pageRef:i}=o;return e.wixapps.migrate.convertAppPage(i)}}};var te={screen:{getScreenResolution:function(e){return e.env.screen.getResolution()}}};var ne={runAndWaitForApproval:async function(e,t,n,o){return await e.transactions.runAndWaitForApproval(o)}};var oe={isGroupsPermissionsGranted:function(){return!0},isCustomPermissionsGranted:function(){return!0}};function ie(e){return new Promise((t,n)=>{e.save(()=>t(),e=>n(e))})}},2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n(4);const i=e=>e.context===o.b.EXTENSION;function r(e,t,n){let{isRequired:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isRequired:!1};const r=i(e)?null==t?void 0:t[n]:null==e?void 0:e[n];if(o&&void 0===r)throw new Error("option ".concat(n," is required"));return r}},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));const o="registerError_",i=Object.freeze({EXTENSION:"extension",DEFAULT:"default"})}})}));
//# sourceMappingURL=platform-api.min.js.map