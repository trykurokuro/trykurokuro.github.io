!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports["platformUtils-bundle"]=t(require("lodash")):e["platformUtils-bundle"]=t(e.lodash)}(this,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(t,n){t.exports=e},function(e,t,n){"use strict";t.__esModule=!0,t.isValidMediaItemUri=function(e,t){void 0===e&&(e="");var n=c[t];return i.default.some(n,(function(t){return t.test(e)}))},t.createMediaItemUri=function(e){var t=e.mediaId,n=e.type,r=e.title,i=e.width,d=e.height,c=e.posterId,m=e.watermark,h=e.duration;switch(n){case f.IMAGE:return function(e,t,n,r,i){if(!e)return{error:p.empty_media_id};if(isNaN(r)||isNaN(n))return{error:p.missing_width_height};var o=g(f.IMAGE,t,e);return{item:a(e,o,n,r,i)}}(t,r,i,d,m);case f.DOCUMENT:return function(e,t){if(!e)return{error:p.empty_media_id};var n=g(f.DOCUMENT,t,e);return{item:u(e,n)}}(t,r);case f.VECTOR:return function(e,t){if(!e)return{error:p.empty_media_id};var n=g(f.VECTOR,t,e);return{item:o(e,n)}}(t,r);case f.VIDEO:return function(e,t,n,r,i){if(!e)return{error:p.empty_media_id};if(!i)return{error:p.empty_poster_id};if(isNaN(r)||isNaN(n))return{error:p.missing_width_height};e=e.replace("video/","");var o=g(f.VIDEO,t,e);return{item:l(e,i,o,n,r)}}(t,r,i,d,c);case f.AUDIO:return function(e,t,n){if(!e)return{error:p.empty_media_id};var r=g(f.AUDIO,t,e);return{item:s(e,r,n)}}(t,r,h);default:return{error:p.unknown_media_type}}},t.parseMediaItemUri=function(e){void 0===e&&(e="");if(!i.default.isString(e))return{error:p.non_string_media_id};switch((e.match(d.type)||[])[1]){case f.IMAGE:return function(e){var t=e.match(d.image)||[],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=m(r);if(n){var l={type:f.IMAGE,mediaId:n,title:u,width:parseInt(i,10),height:parseInt(o,10)};return a&&(l.watermark=a),l}return{error:p.bad_media_id}}(e);case f.DOCUMENT:return function(e){var t=e.match(d.document)||[],n=t[1],r=m(t[2]);if(n)return{type:f.DOCUMENT,mediaId:n,title:r};return{error:p.bad_media_id}}(e);case f.VECTOR:return function(e){var t=e.match(d.vector)||[],n=t[1],r=m(t[2]);if(n)return{type:f.VECTOR,mediaId:n,title:r};return{error:p.bad_media_id}}(e);case f.VIDEO:return function(e){var t=d.deprecated_video.test(e)?d.deprecated_video:d.video,n=e.match(t)||[],r=n[1],i=n[2],o=n[3],a=n[4],u=n[5],l=m(i);if(r&&o)return{type:f.VIDEO,mediaId:r,posterId:o,width:parseInt(a,10),height:parseInt(u,10),title:l};return{error:p.bad_media_id}}(e);case f.AUDIO:return function(e){var t=e.match(d.audio)||[],n=t[1],r=t[2],i=t[3],o=m(r);if(n)return{type:f.AUDIO,mediaId:n,title:o,duration:parseInt(i,10)};return{error:p.bad_media_id}}(e);default:return(e.match(d.deprecated_type)||[])[1]?function(e){var t=e.match(d.deprecated_image)||[],n=t[1],r=t[2],i=t[3],o=m(t[4]);if(n)return{type:f.IMAGE,mediaId:n,title:o,width:parseInt(r,10),height:parseInt(i,10)};return{error:p.bad_media_id}}(e):{error:p.unknown_media_type}}},t.types=t.errors=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r};var o=function(e,t){return"wix:vector://v1/"+e+"/"+t},a=function(e,t,n,r,i){return"wix:image://v1/"+e+"/"+t+"#originWidth="+n+"&originHeight="+r+(i?"&watermark="+i:"")},u=function(e,t){return"wix:document://v1/"+e+"/"+t},l=function(e,t,n,r,i){return"wix:video://v1/"+e+"/"+n+"#posterUri="+t+"&posterWidth="+r+"&posterHeight="+i},s=function(e,t,n){return"wix:audio://v1/"+e+"/"+t+"#duration="+n},d={vector:/^wix:vector:\/\/v1\/([^\/]+)\/([^\/]*)$/,image:/^wix:image:\/\/v1\/([^\/]+)\/([^\/]+)#originWidth=([0-9]+)&originHeight=([0-9]+)(?:&watermark=([^\/]+))?$/,document:/^wix:document:\/\/v1\/([^\/]+(?:\/[^\/]+)?)\/([^\/]+)$/,video:/^wix:video:\/\/v1\/([^\/]+)\/([^\/]+)#posterUri=([^\/]+)&posterWidth=([0-9]+)&posterHeight=([0-9]+)$/,audio:/^wix:audio:\/\/v1\/([^\/]+)\/([^\/]+)#duration=([0-9]+)$/,deprecated_video:/^wix:video:\/\/v1\/([^\/]+)\/([^\/]+)\/#posterUri=([^\/]+)&posterWidth=([0-9]+)&posterHeight=([0-9]+)$/,deprecated_image:/^image:\/\/v1\/([^\/]+)\/([0-9]+)_([0-9]+)\/([^\/]*)$/,deprecated_type:/^(image):/,type:/^wix:(\w+):/,splitExtension:/\.(?=[^.]+$)/,emptyTitle:/^_\./},c={vector:[d.vector],image:[d.image,d.deprecated_image],document:[d.document],video:[d.video,d.deprecated_video],audio:[d.audio]},f={IMAGE:"image",DOCUMENT:"document",VIDEO:"video",AUDIO:"audio",VECTOR:"vector"};t.types=f;var p={empty_media_id:"empty_media_id",empty_poster_id:"empty_poster_id",bad_media_id:"bad_media_id",unknown_media_type:"unknown_media_type",missing_width_height:"missing_width_height",non_string_media_id:"non_string_media_id"};function g(e,t,n){void 0===t&&(t="");var r=n.split(d.splitExtension),i=r[0],o=r[1],a=t.split(d.splitExtension),u=a[0],l=a[1],s="";switch(e){case f.IMAGE:s=(u||"_")+"."+(l||o);break;case f.DOCUMENT:s=(u||i)+"."+(l||o);break;case f.VIDEO:s=(u||"_")+(l?"."+l:"");break;case f.AUDIO:case f.VECTOR:s=(u||i)+"."+(l||o)}return encodeURI(s)}function m(e){if(d.emptyTitle.test(e))return"";try{return decodeURI(e)}catch(t){return e}}t.errors=p},function(e,t,n){"use strict";t.__esModule=!0,t.getAllCompsUnderRoot=function(e,t){for(var n=[t],r=0;r<n.length;r++){var o=i.default.get(e.components,[n[r],"children"])||[];n.push.apply(n,o)}return n.shift(),n},t.isTemplateComp=function(e,t){var n=function(t){return i.default.get(e,["components",t,"parent"])},r=function(t){return"wysiwyg.viewer.components.Repeater"===i.default.get(e,["components",a,"type"])},o=t,a=n(o);for(;a&&!r();)a=n(o=a);return r()&&i.default.includes(i.default.get(e,["components",a,"children"]),o)};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(16),i={items:{getAddedItems:r.getAddedItems,getRemovedItems:r.getRemovedItems,getTemplateCompsId:r.getTemplateCompIds},structure:{getUniqueDisplayedId:r.getUniqueDisplayedId,getOriginalId:r.getOriginalId,getItemId:r.getItemId,SPLITTED_DATA_TYPES:r.SPLITTED_DATA_TYPES}};t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.fixMediaTitleLength=l,t.getVideoBackgroundObject=function(e,t){var n=c(e,t);return i.default.assign(n,o)},t.getMediaPlayerVideoObject=function(e,t){var n=c(e,t);return i.default.assign(n,a)},t.getVideoPosterObject=function(e,t,n,r){return{type:"WixVideo",videoId:e,posterImageRef:{type:"Image",uri:t,width:n,height:r}}},t.getImageBackgroundObject=function(e,t){return{type:"Image",uri:e.fileName,title:l(e.title,100),description:t.path,width:e.width,height:e.height,artist:{name:e.vendor||"",id:e.reference||""}}},t.getImageBackgroundObjectFromMediaStudioFile=function(e){return{type:"Image",uri:e.id,title:l(e.name,100),description:"private",width:e.width,height:e.height,artist:{name:"",id:""}}},t.MEDIA_PLAYER_DEFAULTS=t.BG_VIDEO_DEFAULTS=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r};var o={opacity:1,autoplay:!0,loop:!0,preload:"auto",mute:!0};t.BG_VIDEO_DEFAULTS=o;var a={opacity:1,preload:"auto"};t.MEDIA_PLAYER_DEFAULTS=a;function u(e){return e.replace(/^(.*[\/])/,"")}function l(e,t){if(e.length<=t)return e;var n=e.split(""),r=e.length-t+"...".length,i=(e.lastIndexOf(".")>e.length-r-3?e.lastIndexOf("."):e.length-1)-r-3;return n.splice(i,r,"..."),n.join("")}function s(e){return i.default.map(e.image,(function(e){return u(e.url)}))}function d(e,t){return e[t]||e[i.default.camelCase(t)]}function c(e,t){var n=d(e,"file_input"),r=d(e,"file_output"),o=((e.fileUrl||e.file_name).match(/(?:\/|^)([0-9a-fA-F_]+)(?:\/|$)/)||[])[1]||"",a=l(e.title,100),c=function(e){if(!e)return[];var t=i.default.filter(e.video,{format:"mp4"}),n=i.default.find(e.storyboard,{format:"mp4"}),r=i.default.map(t,(function(e){return i.default.pick(e,["width","height","quality","url"])}));return n&&r.push({quality:"storyboard",width:n.width,height:n.height,url:n.url}),r}(r),f=function(e){var t=d(e,"adaptive_video");return i.default.map(t,(function(e){return{format:e.format,url:e.url}}))}(r),p=function(e){var t=[];return e.tags&&i.default.includes(e.tags,"_mp4_alpha")&&t.push("alpha"),i.default.isEmpty(t)?null:t}(e),g=i.default.head(r.image),m={type:"Image",width:g.width,height:g.height,uri:u(g.url),description:t.path?t.path:void 0},h={type:"WixVideo",title:a,videoId:o,duration:+(n.duration/1e3).toFixed(2),posterImageRef:m,generatedPosters:s(r),qualities:c,adaptiveVideo:f,artist:{name:e.vendor||"",id:e.reference||""},hasAudio:-1!==d(i.default.head(r.video),"audio_bitrate"),fps:i.default.get(i.default.head(r.video),"fps","").toString()};return p&&(h.mediaFeatures=p),h}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){if(e&&e.videoType&&e.videoId){var t=c(e.videoType,"getVideoUrl");return t&&t(e.videoId)||""}return""},t.getVideoDataFromUrl=function(e){var t;return i.default.forEach(d,(function(n,r){var o=c(r,"getVideoIdFromUrl"),a=o&&o(e);if(!i.default.isEmpty(a))return t={videoType:r,videoId:a},!1})),t},t.videoTypes=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=s(n(6)),a=s(n(7)),u=s(n(8));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}var d={YOUTUBE:s(n(9)),VIMEO:u,DAILYMOTION:o,FACEBOOK:a};function c(e,t){return d[e.toUpperCase()]&&d[e][t]}t.videoTypes={YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",DAILYMOTION:"DAILYMOTION",FACEBOOK:"FACEBOOK"}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://dailymotion.com/video/"+e},t.getVideoIdFromUrl=function(e){var t=/dailymotion\.com\/(?:video|playlist)\/([^_/]+)/gi.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://www.facebook.com/"+e},t.getVideoIdFromUrl=function(e){var t=/facebook\.com\/(.+\/videos\/[A-Za-z0-9._%-]*)/gi.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://vimeo.com/"+e},t.getVideoIdFromUrl=function(e){var t=/vimeo\.com\/(\d+)$/gi.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://www.youtube.com/watch?v="+e},t.getVideoIdFromUrl=function(e){var t=/(?:youtube\.com\/watch[^\s]*[\?&]v=)([\w-]+)/g.exec(e)||/(?:youtu\.be\/)([\w-]+)/g.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.mediaSrcHandler=t.platformizedEndpointsUtils=t.loggingUtils=t.mediaItemUtils=t.widgetUtils=t.videoUrlsUtils=t.uriUtils=t.richTextUtils=t.linkUtils=t.componentsHooks=t.backgroundUtils=t.typeUtils=t.RemoteModelInterface=t.RemoteGlobalsInterface=void 0;var r=n(11);t.RemoteGlobalsInterface=r.RemoteGlobalsInterface;var i=n(13);t.RemoteModelInterface=i.RemoteModelInterface;var o=b(n(4));t.backgroundUtils=o;var a=b(n(17));t.componentsHooks=a;var u=b(n(20));t.linkUtils=u;var l=b(n(21));t.richTextUtils=l;var s=b(n(22)),d=b(n(23));t.uriUtils=d;var c=b(n(5));t.videoUrlsUtils=c;var f=b(n(24));t.widgetUtils=f;var p=b(n(1));t.mediaItemUtils=p;var g=b(n(25));t.loggingUtils=g;var m,h=n(26),v=(m=n(3))&&m.__esModule?m:{default:m};t.repeaterUtils=v.default;var y=b(n(27));t.platformizedEndpointsUtils=y;var _=b(n(32));function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}t.mediaSrcHandler=_;var I=new h.TypeUtils(s);t.typeUtils=I},function(e,t,n){"use strict";t.__esModule=!0,t.RemoteGlobalsInterface=void 0;var r,i=n(12),o=(r=n(0))&&r.__esModule?r:{default:r};function a(e){return o.default.get(e,"policyDetails")}var u=function(){function e(e){this._globals=o.default.defaults(e,{navigation:{},sessionInfo:{},appsData:{},consentData:{policyDetails:null,policyHeaderObject:null},siteMemberData:{uid:null,permissions:null,onUserLogin:[]},multilingualInfo:{isEnabled:!1,currentLanguageCode:null,siteLanguages:[],onCurrentLanguageChange:[]},appStudioWidgetData:{isApplicationStudio:!1,onPropsChanged:[]},deviceType:null,isMobileFriendly:null,lightboxContext:void 0,contextId:null,siteRevision:null,routerData:null,regionalSettings:{locale:null,language:null,timezone:null,currency:null,browserLocale:null},seo:{isInSEO:void 0}}),this._globals.onInstanceChanged={},this._globals.onLocationChange=[],this._globals.consentChangedHandlers=[]}var t=e.prototype;return t.addRegionalSettings=function(e){this._globals.regionalSettings=e},t.addNavigation=function(e){var t=this;this._globals.navigation=e;var n=this._globals.onLocationChange;o.default.forEach(n,(function(e){return e({path:t.getLocation().path})}))},t.addSiteMemberData=function(e){var t=e.uid&&e.uid!==this._globals.siteMemberData.uid;if(o.default.assign(this._globals.siteMemberData,e),t){var n=this._globals.siteMemberData.onUserLogin;o.default.forEach(n,(function(t){t(e)}))}},t.addAppsData=function(e){var t=this._globals.appsData;o.default.forEach(this._globals.onInstanceChanged,(function(n,r){var i=o.default.get(t,[r,"instance"]),a=o.default.get(e,[r,"instance"]);i!==a&&o.default.invokeMap(n,"call",null,{instance:a})})),this._globals.appsData=e},t.addOnLocationChangeCallback=function(e){this._globals.onLocationChange||(this._globals.onLocationChange=[]),this._globals.onLocationChange.push(e)},t.addOnUserLoginCallback=function(e){this._globals.siteMemberData.onUserLogin.push(e)},t.addSessionInfoProp=function(e){o.default.assign(this._globals.sessionInfo,e)},t.addSiteRevision=function(e){this._globals.siteRevision=e},t.addDeviceType=function(e){this._globals.deviceType=e},t.addIsMobileFriendly=function(e){this._globals.isMobileFriendly=e},t.addLightboxContext=function(e){this._globals.lightboxContext=e},t.addContextId=function(e){this._globals.contextId=e},t.addMultilingualInfo=function(e){var t=e.currentLanguageCode&&e.currentLanguageCode!==this._globals.multilingualInfo.currentLanguageCode;if(o.default.assign(this._globals.multilingualInfo,e),t){var n=this._globals.multilingualInfo.onCurrentLanguageChange;o.default.forEach(n,(function(t){t(e)}))}},t.addOnCurrentLanguageChangeCallback=function(e){this._globals.multilingualInfo.onCurrentLanguageChange.push(e)},t.addLivePreviewMode=function(e){this._globals.livePreviewMode=e},t.addRouterData=function(e){this._globals.routerData=e},t.addConsentData=function(e){var t=a(this._globals.consentData),n=a(e),r=!o.default.isEqual(n,t);if(o.default.assign(this._globals.consentData,e),r){var i=this._globals.consentChangedHandlers;o.default.forEach(i,(function(e){e(o.default.cloneDeep(n))}))}},t.addOnConsentPolicyChangedCallback=function(e){this._globals.consentChangedHandlers.push(e)},t.getRouterData=function(e){if(!this._globals.routerData)return null;var t,n=o.default.get(this._globals.routerData,"routerDefinition.appDefinitionId");return t=o.default.isUndefined(e),"wix-code"===n&&t||e===n?o.default.cloneDeep(this._globals.routerData.routerData):null},t.getRouterPublicData=function(){return this._globals.routerData?this._globals.routerData.routerPublicData:null},t.getAppsData=function(){return o.default.cloneDeep(this._globals.appsData)},t.getDeviceType=function(){return this._globals.deviceType},t.getIsMobileFriendly=function(){return this._globals.isMobileFriendly},t.getLightboxContext=function(){return o.default.cloneDeep(this._globals.lightboxContext)},t.getContextId=function(){return this._globals.contextId},t.getAppData=function(e){return o.default.cloneDeep(o.default.get(this._globals.appsData,e))},t.getNavigationInfo=function(){return o.default.cloneDeep(this._globals.navigation)},t.getRegionalSettings=function(){return o.default.cloneDeep(this._globals.regionalSettings)},t.getSiteMemberData=function(e){var t=o.default.cloneDeep(this._globals.siteMemberData);if(e){var n=o.default.get(this._globals.appsData,e);n&&o.default.assign(t,o.default.pick(n,["instance","instanceId"]))}return t},t.getCurrentConsentPolicy=function(){return o.default.cloneDeep(a(this._globals.consentData))},t.getConsentData=function(){return o.default.cloneDeep(this._globals.consentData)},t.getMultilingualInfo=function(){return o.default.cloneDeep(this._globals.multilingualInfo)},t.getCurrentLanguageCode=function(){return this._globals.multilingualInfo.currentLanguageCode},t.getSiteLanguages=function(){return this._globals.multilingualInfo.siteLanguages},t.getIsMultilingualEnabled=function(){return this._globals.multilingualInfo.isEnabled},t.getSessionInfo=function(){return o.default.cloneDeep(this._globals.sessionInfo)},t.getLivePreviewMode=function(){return this._globals.livePreviewMode},t.addIsApplicationStudio=function(e){this._globals.appStudioWidgetData.isApplicationStudio=e},t.getIsApplicationStudio=function(){return this._globals.appStudioWidgetData.isApplicationStudio},t.getSiteRevision=function(){return o.default.invoke(this._globals.siteRevision,"toString")||null},t.addOnWidgetPropsChangedCallback=function(e){this._globals.appStudioWidgetData.onPropsChanged.push(e)},t.triggerWidgetPropsChanged=function(e,t){o.default.forEach(this._globals.appStudioWidgetData.onPropsChanged,(function(n){n(o.default.cloneDeep(e),o.default.cloneDeep(t))}))},t.addOnInstanceChangedCallback=function(e,t){this._globals.onInstanceChanged[e]||(this._globals.onInstanceChanged[e]=[]),this._globals.onInstanceChanged[e].push(t)},t.getFullUrl=function(){return this._globals.navigation.currentPageFullUrl||this._globals.navigation.baseUrl},t.getLocation=function(){var e={};e.url=this.getFullUrl();var t=(0,i.parseUrl)(e.url),n=this._globals.navigation&&this._globals.navigation.routerDefinition?this._globals.navigation.routerDefinition.prefix:void 0,r=this._globals.navigation.baseUrl.indexOf("wixsite.com")>0,o=t.path.substring(1).split("/"),a=r?o.slice(1):o;return e.hash=t.hash,e.protocol=t.protocol,e.prefix=n,e.path=n&&a[0]===n?a.slice(1):a,e.query=t.query,e},t.isInSEO=function(){return this._globals.seo.isInSEO},t.toJson=function(){return this._globals},e}();t.RemoteGlobalsInterface=u},function(e,t,n){"use strict";t.__esModule=!0,t.parseUrl=function(e){if(!e)return{};var t=e.match(/((https?)\:\/\/)?([^\?\:\/#]+)(\:([0-9]+))?(\/[^\?\#]*)?(\?([^#]*))?(#.*)?/i),n=t[5]||"",r=t[8]?"?"+t[8]:"",o={full:e,protocol:t[2]||"http:",host:n?t[3]+":"+n:t[3],hostname:t[3],port:n,path:t[6]||"/",search:r,hash:t[9]||""};"#"!==o.hash&&"#!"!==o.hash||(o.hash="");return o.query=function(e){var t,n=/([^&=]+)=([^&]*)/g,r={};for(;null!==(t=n.exec(e));){var o=decodeURIComponent(t[1]),a=decodeURIComponent(t[2]);r[o]?i.default.isArray(r[o])?r[o].push(a):r[o]=[r[o],a]:r[o]=a}return r}(t[8]),o};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0,t.RemoteModelInterface=void 0;var r=s(n(0)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(14),a=n(15),u=s(n(3));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c="id",f=function(e){return e&&"RefArray"===e.type},p=function(){function e(e,t,n){this._model=r.default.defaults(e,{components:{},connections:{},componentsScopes:{},siteStructure:{},pageData:{},eventHandlers:{},EventTypes:{},appStudioWidgetData:{properties:{}},scopesHierarchy:[{type:"GLOBAL_SCOPE",id:"GLOBAL_SCOPE",additionalData:{}}],renderType:"bolt",appApis:{},seo:{title:"",structuredData:[],metaTags:[],links:[],statusCode:""}}),this._onUpdateCallback=t,this._stylesOverridesMap=r.default.get(n,"_stylesOverridesMap")||{};var i=r.default.get(n,"_hooksManager"),o=r.default.get(n,"_transaction");this._hooksManager=i||new a.HooksManager,this._transaction=o||{_onTransaction:!1,_transactionData:{}},this.controllerId=null}var t,n,l,s=e.prototype;return s.addComponent=function(e,t,n){if(n)return I.call(this,e,t);var r=m();for(var i in r)r[i]=t[i]||r[i];r.parent=t.parent,r.type=t.type,r.id=t.id,r.displayedRoot=t.displayedRoot,this._model.components[e]=r,this._model.componentsScopes[e]="GLOBAL_SCOPE"},s.addSiteStructure=function(e){this._model.siteStructure=e},s.addPageData=function(e){this._model.pageData=e},s.addConnections=function(e){r.default.defaultsDeep(this._model.connections,e)},s._addToStyleOverrides=function(e,t){this._stylesOverridesMap[e]=this._stylesOverridesMap[e]||{style:{properties:{}}},r.default.merge(this._stylesOverridesMap[e],t)},s.resetComponentsScope=function(){var e=this;for(var t in this._model.components){this._model.components[t].displayedOnlyComponents.forEach((function(t){return e._model.componentsScopes[t]=null}))}},s.addEventTypes=function(e){this._model.EventTypes=e},s.getComp=function(e){return r.default.cloneDeep(r.default.get(this._model.components,e))},s.getState=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"state"]))},s.getData=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"data"]))},s.getStyle=function(e){var t=r.default.get(this._model.components,[e,"style"]),n=f(t)?this._stylesOverridesMap[e]:t;return r.default.cloneDeep(n||{})},s.getDesign=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"design"]))},s.getType=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"type"]))},s.getProps=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"props"]))},s.getEvents=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"events"]))},s.getLayout=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"layout"]))},s.getId=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,c]))},s.getEventTypes=function(){return r.default.cloneDeep(this._model.EventTypes)},s.isLivePreviewMode=function(){return this.livePreviewMode},s.getPublicAPI=function(e){var t=r.default.get(this._model.components,[e,"publicAPI"]);return r.default.isFunction(t)?t:r.default.cloneDeep(t)},s.getCallbackById=function(e,t){var n=this._model.eventHandlers[e];return t?n:r.default.get(n,"callback")},s.getParent=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"parent"]))},s.getChildren=function(e){return r.default.clone(r.default.get(this._model.components,[e,"children"]))},s.getSiteStructure=function(){return r.default.cloneDeep(this._model.siteStructure)},s.getPageData=function(){return r.default.cloneDeep(this._model.pageData)},s.getFullDataWithOverrides=function(e){return r.default.defaults(this.getData(e),h.call(this,e))},s.isGhostComponent=function(e){return r.default.get(this._model.components,[e,"isGhost"])},s.jsonWithoutWixCodeComps=function(){var e=(0,r.default)(this._model.components).toPairs().filter((function(e){var t=e[1];return r.default.get(t,"data.applicationId")})).map((function(e){return e[0]})).value();return r.default.defaults({components:r.default.pick(this._model.components,e)},this._model)},s.cleanModelForLivePreview=function(){(0,r.default)(this._model.components).filter(["type","wysiwyg.viewer.components.Repeater"]).map("data").forEach((function(e){r.default.isEmpty(e.items)||((0,o.wSpyLog)("livepreview",["cleaning RMI repeater items",e.items]),e.items=[])}))},s.getCurrentScope=function(){return r.default.clone(r.default.get(this._model.scopesHierarchy,0))},s.getAppPublicAPI=function(e){return r.default.get(this._model.appApis,e)},s.setDataWithoutUpdate=function(e,t,n){void 0===n&&(n=!0),y.call(this,e,"data",t,n)},s.setData=function(e,t,n){void 0===n&&(n=!0),y.call(this,e,"data",t,n,this._onUpdateCallback)},s.setStyle=function(e,t,n,i){var o=this;void 0===i&&(i=!0);var a=t,u=r.default.get(this._model.components,[e,"style"]);if(f(u)){var l=r.default.cloneDeep(u);l.values.forEach((function(e){var n=e;"BreakpointRelation"===e.type?n=e.ref:"VariantRelation"===e.type&&(n=e.to),r.default.merge(n,t)})),a=l,this._addToStyleOverrides(e,t)}y.call(this,e,"style",a,i,(function(e){var t=e.compId,r=e.type,i=e.data;o._onUpdateCallback.call(o,{compId:t,type:r,data:i,appDefinitionId:o.getAppDefinitionId(),controllerId:o.controllerId,callback:n})}))},s.setDesign=function(e,t,n){void 0===n&&(n=!0),y.call(this,e,"design",t,n,this._onUpdateCallback)},s.setProps=function(e,t,n,r){var i=this;void 0===r&&(r=!0),y.call(this,e,"props",t,r,(function(e){var t=e.compId,r=e.type,o=e.data;t&&r&&o&&i._onUpdateCallback.call(i,{compId:t,type:r,data:o,appDefinitionId:i.getAppDefinitionId(),controllerId:i.controllerId,callback:n})}))},s.setLayout=function(e,t,n){void 0===n&&(n=!0),y.call(this,e,"layout",t,n,this._onUpdateCallback)},s.setPublicAPI=function(e,t){var n=r.default.get(this._model.components,e);n&&(n.publicAPI=t)},s.executeCompBehavior=function(e,t,n,r){v.call(this,"comp",t,n,e,r)},s.executeAnimation=function(e,t,n,r){v.call(this,"animation",t,n,e,r)},s.setUpdateCallback=function(e){this._onUpdateCallback=e},s.registerEvent=function(e,t,n,i,o){if(!this.isGhostComponent(t)&&!this.isLivePreviewMode()){var a,u={contextId:e,eventType:n,callbackId:a=r.default.isFunction(o)?this.registerEventCallback({callback:o,contextId:e,controllerId:i}):o},l=r.default.get(this._model,["components",t]);if(void 0!==l){if(this._hooksManager.executeHooksAndUpdateValue(this,"registerEvent",l.type,t,[e,n,i,a]),l.events.push({eventType:n,callbackId:a}),this._transaction._onTransaction)return void _.call(this,t,"registerEvent",u);r.default.isFunction(this._onUpdateCallback)&&this._onUpdateCallback({compId:t,type:"registerEvent",data:u,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId})}}},s.getEventCallbackIds=function(e,t){var n=r.default.get(this._model,["components",e]);if(void 0!==n){var i=r.default.filter(n.events,{eventType:t});return r.default.map(i,"callbackId")}},s.toJson=function(){return this._model},s.setRenderType=function(e){this._model.renderType=e},s.setAppPublicAPI=function(e,t){this._model.appApis[e]=t},s.getComponents=function(){var e={};for(var t in this._model.components)i.isTemplateComp(this._model,t)||(e[t]=this.getComp(t));return e},s.getCompToTypeMap=function(){var e={};for(var t in this._model.components)i.isTemplateComp(this._model,t)||(e[t]=this.getType(t));return e},s.getScopedRMI=function(e){var t=new this.constructor(this._model,this._onUpdateCallback,{_stylesOverridesMap:this._stylesOverridesMap,_hooksManager:this._hooksManager,_transaction:this._transaction});return t.controllerId=e,t.getCompIdsFromRole=t.getCompIdsFromRole.bind(t,e),t.getCompIdsFromType=t.getCompIdsFromType.bind(t,e),t.getAppDefinitionId=t.getAppDefinitionId.bind(t,e),t.getAllCompIdsInScope=t.getAllCompIdsInScope.bind(t,e),t.getConfig=t.getConfig.bind(t,e),t},s.getNestedScopedRMI=function(e){return new this.constructor(e||this._model,this._onUpdateCallback,{_stylesOverridesMap:this._stylesOverridesMap,_hooksManager:this._hooksManager,_transaction:this._transaction})},s.getCompIdsFromType=function(e,t,n){var i=r.default.get(this._model.connections,e);return w.call(this,i,e,t,n)},s.getCompIdsFromRole=function(e,t,n){var i=r.default.get(this._model.connections,[e,t]);return b.call(this,i,e,t,n)},s.getAllCompIdsInScope=function(e){return r.default.reduce(r.default.get(this._model.connections,[e]),(function(e,t){return r.default.map(r.default.keys(t),(function(t){return e.push(t)})),e}),[])},s.getConfig=function(e,t,n,i){var o=r.default.get(this._model.connections,[e,n]),a=g.call(this,i);return o&&o.hasOwnProperty(t)&&r.default.includes(a,r.default.get(this._model.componentsScopes,t))?o[t]:{}},s.updateModel=function(e){for(var t in e){var n=m(),i=r.default.get(this._model.components,t),o=e[t];if(i)for(var a in o)r.default.has(i,a)&&(r.default.isObject(i[a])?o[a]?r.default.assign(i[a],o[a]):i[a]=n[a]:i[a]=o[a])}},s.getScopedRMIByCompId=function(e){var t=this.getRepeaterItemContext(e);if(r.default.isEmpty(t))return this;var n=t.displayedRoot,i=t.itemId;return this.getScopedRMIForRepeaterItem(n,i)},s.getScopedRMIForRepeaterItem=function(e,t){var n=r.default.clone(this._model),o=i.getAllCompsUnderRoot(n,e),a=o.map((function(e){return u.default.structure.getUniqueDisplayedId(e,t)}));return n.scopesHierarchy=r.default.clone(n.scopesHierarchy),n.scopesHierarchy.unshift({type:"COMPONENT_SCOPE",id:e,compId:e,additionalData:{itemId:t}}),n.componentsScopes=r.default.clone(n.componentsScopes),o.forEach((function(e){return n.componentsScopes[e]=null})),a.forEach((function(t){return n.componentsScopes[t]=e})),this.getNestedScopedRMI(n)},s.getRepeaterItemContext=function(e){var t=r.default.get(this._model.components,[e,"displayedRoot"]);return t?{displayedRoot:t,itemId:u.default.structure.getItemId(e)}:{}},s.getScopeByCompId=function(e){var t=this.getRepeaterItemContext(e),n=t.displayedRoot,r=t.itemId;return n?{type:"COMPONENT_SCOPE",id:n,compId:n,additionalData:{itemId:r}}:{type:"GLOBAL_SCOPE",id:"GLOBAL_SCOPE",additionalData:{}}},s.isRepeaterScope=function(e){return"COMPONENT_SCOPE"===r.default.get(e,"type")&&!r.default.isEmpty(r.default.get(e,"additionalData.itemId"))},s.startTransaction=function(){this._transaction._onTransaction=!0},s.endTransaction=function(){this._onUpdateCallback&&!r.default.isEmpty(this._transaction._transactionData)&&this._onUpdateCallback({type:"executeBatch",data:this._transaction._transactionData,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId}),this._transaction._onTransaction=!1,this._transaction._transactionData={}},s.setBatchData=function(e){var t=this;r.default.forEach(e,(function(e,n){r.default.forEach(e,(function(e,i){switch(i){case"registerEvent":r.default.forEach(e,(function(e){t.registerEvent.call(t,e.contextId,n,e.eventType,e.controllerId,e.callbackId)}));break;default:var o="set"+r.default.startCase(i);t[o].call(t,n,e)}}))}))},s.registerHook=function(e,t,n){this._hooksManager.registerHook(e,t,n)},s.getHooks=function(){return this._hooksManager.HOOKS},s.updateWidgetProperties=function(e){this._model.appStudioWidgetData.properties=e},s.getWidgetProperties=function(){return this._model.appStudioWidgetData.properties},s.getAppDefinitionId=function(e){var t=this.getCompIdByDataQuery(e);return r.default.get(this._model,["components",t,"data","applicationId"])},s.getCompIdByDataQuery=function(e){return r.default.findKey(this._model.components,["fullData.id",e])},s.registerEventCallback=function(e){var t=e.callback,n=e.contextId,i=e.controllerId,o=e.overrideCallbackId;if(r.default.isFunction(t)){var a=o||function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}();return this._model.eventHandlers[a]={callback:t,contextId:n,controllerId:i},a}},s.isBolt=function(){return"bolt"===this._model.renderType},t=e,(n=[{key:"seoTitle",get:function(){return this._model.seo.title},set:function(e){this._model.seo.title=e}},{key:"seoStructuredData",get:function(){return r.default.cloneDeep(this._model.seo.structuredData)},set:function(e){this._model.seo.structuredData=e}},{key:"seoMetaTags",get:function(){return r.default.cloneDeep(this._model.seo.metaTags)},set:function(e){this._model.seo.metaTags=e}},{key:"seoLinks",get:function(){return r.default.cloneDeep(this._model.seo.links)},set:function(e){this._model.seo.links=e}},{key:"seoStatusCode",get:function(){return this._model.seo.statusCode},set:function(e){this._model.seo.statusCode=e}}])&&d(t.prototype,n),l&&d(t,l),e}();function g(e){return e?r.default.get(this._model.scopesHierarchy,"0.id"):r.default.map(this._model.scopesHierarchy,(function(e){return r.default.get(e,"id")}))}function m(){var e;return(e={}).parent=null,e.state={},e.type=null,e.data={},e.fullData={},e.design={},e.props={},e.layout={},e.events=[],e.isDisplayed=!1,e.isGhost=!1,e.id=null,e.publicAPI={},e.style={},e.children=[],e.displayedOnlyComponents=[],e.displayedRoot=null,e}function h(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,"fullData"]))}function v(e,t,n,i,o){if(!this.isGhostComponent(i)){var a=r.default.get(n,"requiresDom",{compId:i}),u={type:e,name:t,targetId:i,requiresDom:a,params:n=a?n:r.default.omit(n,["requiresDom"])};this._onUpdateCallback&&this._onUpdateCallback({compId:i,type:"behavior",data:u,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId,callback:o})}}function y(e,t,n,i,o){var a=r.default.get(this._model,["components",e]);if(a){if(this._hooksManager.executeHooksAndUpdateValue(this,t,a.type,e,[n,o]),a.isDisplayed){var u=a[t],l=r.default.defaults({},n,u);if(this.isBolt()&&i&&r.default.isEqual(l,u))return;this._model.components[e][t]=l}this.isBolt()&&this.isGhostComponent(e)||o&&(this._transaction._onTransaction?_.call(this,e,t,n):o({compId:e,type:t,data:n,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId}))}}function _(e,t,n){var i=this._transaction._transactionData;if(i[e]||(i[e]={}),"registerEvent"===t)return i[e][t]||(i[e][t]=[]),void i[e][t].push(n);i[e][t]||(i[e][t]={}),r.default.assign(i[e][t],n)}function w(e,t,n,i){var o=r.default.flatMap(e,Object.keys),a=[],u=g.call(this,i);return o.forEach((function(e){this.getType(e)===n&&r.default.includes(u,r.default.get(this._model.componentsScopes,e))&&a.push(e)}),this),a}function b(e,t,n,i){var o=this,a=g.call(this,i);return(e?Object.keys(e):[]).filter((function(e){return r.default.includes(a,r.default.get(o._model.componentsScopes,e))}))}function I(e,t){var n=r.default.cloneDeep(t);n.isGhost=!0,n.state={},this._model.components[e]=n,this._model.componentsScopes[e]="GLOBAL_SCOPE"}t.RemoteModelInterface=p},function(e,t,n){"use strict";t.__esModule=!0,t.wSpyLog=function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"object"==typeof window?i.default.invoke.apply(i.default,[window,"parent.wSpy.log"].concat(t)):"object"==typeof self&&self.wSpy&&i.default.invoke.apply(i.default,[self,"wSpy.log"].concat(t))}catch(e){}};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0,t.HooksManager=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a={all:"all",data:"data"},u=function(){function e(){this._hooks={}}var t,n,r,u=e.prototype;return u.validateHookName=function(e){if(!a[e])throw"Invalid Hook Name "+e},u.unregisterAllHooks=function(){this._hooks={}},u.unregisterHooks=function(e){var t=this;i.default.forEach(e,(function(e){return delete t._hooks[e]}))},u.executeHooksAndUpdateValue=function(e,t,n,r,o){function u(a){var u=this;if(a){var l=a[n]||[],s=a["*"]||[];i.default.forEach(l.concat(s),(function(n){n.apply(u,[e,t,r].concat(o||[]))}))}}var l=this._hooks[t],s=this._hooks[a.all];u(l),u(s)},u.registerHook=function(e,t,n){if(this.validateHookName(e),n){var r=this._hooks[e];r||(this._hooks[e]=r={});var i=r[t=t||"*"];i||(r[t]=i=[]),i.push(n)}},t=e,(n=[{key:"HOOKS",get:function(){return a}}])&&o(t.prototype,n),r&&o(t,r),e}();t.HooksManager=u},function(e,t,n){"use strict";t.__esModule=!0,t.getAddedItems=function(e,t){var n=a(t),r=a(e),o=i.default.difference(n,r);return u(t,o)},t.getRemovedItems=function(e,t){var n=a(t),r=a(e),o=i.default.difference(r,n);return u(e,o)},t.getUniqueDisplayedId=l,t.getOriginalId=function(e){if(!e)return;return e.split("__")[0]},t.getItemId=function(e){if(!e)return;return e.split("__")[1]},t.getTemplateCompIds=function(e,t,n){var r=(0,o.getAllCompsUnderRoot)(i.default.get(e,"_model"),t),a=i.default.compact(i.default.map(n,(function(e){return i.default.get(e,"item._id")})));return i.default.reduce(a,(function(e,t){return e.concat(i.default.map(r,(function(e){return l(e,t)})))}),[])},t.SPLITTED_DATA_TYPES=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(2);function a(e){return i.default.map(e,(function(e){return i.default.isString(e)?e:e._id}))}function u(e,t){var n=i.default.map(e,(function(e){return i.default.isString(e)?{_id:e}:e}));return i.default.reduce(n,(function(e,n,r){return i.default.includes(t,n._id)&&e.push({item:n,index:r}),e}),[])}function l(e,t){return e+"__"+t}t.SPLITTED_DATA_TYPES=["data","design"]},function(e,t,n){"use strict";t.__esModule=!0,t.repeaters=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(18));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}t.repeaters=r},function(e,t,n){"use strict";t.__esModule=!0,t.updateRepeaterItems=function(e,t,n,u){if(u.items){var l=i.getAllCompsUnderRoot(e._model,n),s=r.default.get(e._model.components,[n,"data"]),d=o.default.items.getAddedItems(s.items,u.items);!function(e,t,n,i){(function(e,t,n){var i=r.default.get(e,"connections"),a=r.default.keys(i);r.default.forEach(a,(function(e){var a=r.default.keys(r.default.get(i,e));r.default.forEach(a,(function(a){var u=r.default.keys(r.default.get(i,[e,a]));r.default.forEach(u,(function(u){if(r.default.includes(t,u)){var l=r.default.get(i,[e,a,u]);r.default.forEach(n,(function(t){var n=o.default.structure.getUniqueDisplayedId(u,t);r.default.set(i,[e,a,n],r.default.cloneDeep(l))}))}}))}))}))})(e,t,n),function(e,t,n,i){r.default.forEach(t,(function(t){r.default.forEach(n,(function(n){var u=o.default.structure.getUniqueDisplayedId(t,n),l=e.components[t],s=(0,a.default)(l);s.displayedOnlyComponents=[],s.children=r.default.map(l.children,(function(e){return o.default.structure.getUniqueDisplayedId(e,n)})),s.parent=l.parent===i?i:o.default.structure.getUniqueDisplayedId(l.parent,n),s.displayedRoot=i,s.isDisplayed=!!r.default.get(e.components[i],"isDisplayed"),r.default.forEach(o.default.structure.SPLITTED_DATA_TYPES,(function(e){var t=s[e];t.id&&(t.id=o.default.structure.getUniqueDisplayedId(s[e].id,n),r.default.forEach(t,(function(e,i){r.default.isObject(e)&&e.id&&(t[i].id=o.default.structure.getUniqueDisplayedId(t[i].id,n))})))})),e.components[u]=s}))}))}(e,t,n,i),function(e,t,n){r.default.forEach(t,(function(t){r.default.forEach(n,(function(n){var r=o.default.structure.getUniqueDisplayedId(t,n);e.componentsScopes[r]=null}))}))}(e,t,n)}(e._model,l,r.default.map(d,"item._id"),n);var c=o.default.items.getRemovedItems(s.items,u.items);!function(e,t,n){(function(e,t,n){var i=r.default.get(e,"connections"),a=r.default.keys(i);r.default.forEach(a,(function(e){var a=r.default.keys(r.default.get(i,[e]));r.default.forEach(a,(function(a){var u=r.default.keys(r.default.get(i,[e,a]));r.default.forEach(u,(function(u){var l=o.default.structure.getItemId(u),s=o.default.structure.getOriginalId(u);l&&r.default.includes(n,l)&&r.default.includes(t,s)&&delete i[e][a][u]}))}))}))})(e,t,n),function(e,t,n){r.default.forEach(t,(function(t){r.default.forEach(n,(function(n){var r=o.default.structure.getUniqueDisplayedId(t,n);delete e.componentsScopes[r]}))}))}(e,t,n),function(e,t,n){r.default.forEach(t,(function(t){r.default.forEach(n,(function(n){var r=o.default.structure.getUniqueDisplayedId(t,n);delete e.components[r]}))}))}(e,t,n)}(e._model,l,r.default.map(c,"item._id")),r.default.forEach(l,(function(t){e._model.components[t].displayedOnlyComponents=r.default.map(u.items,(function(e){return o.default.structure.getUniqueDisplayedId(t,e)}))}))}},t.syncRepeaterItemData=function(e,t,n){var o=arguments,a=e._model;if("registerEvent"!==t&&i.isTemplateComp(a,n)){var u=r.default.get(a,["components",n]),l=arguments[3];a.components[n][t]=r.default.defaults({},l,u[t])}var s=r.default.get(e._model.components,[n,"displayedOnlyComponents"]);if(!r.default.isEmpty(s)){var d="set"+r.default.startCase(t);if("registerEvent"===t)return d="registerEvent",void r.default.forEach(s,(function(t){var n=[].concat(o);e[d].apply(e,[n[3],t].concat(n.splice(4)))}));r.default.forEach(s,(function(n){var i=[].concat(o);if("data"!==t||r.default.isFunction(r.default.last(i))){var a=[n].concat(i.splice(3));r.default.isFunction(r.default.last(a))&&a.pop(),e[d].apply(e,a)}else e.setDataWithoutUpdate.apply(e,[n].concat(i.splice(3)))}))}};var r=l(n(0)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),o=l(n(3)),a=l(n(19));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function e(t){if(!i.default.isObject(t)||!t)return t;var n;if(Array.isArray(t)){n=[];for(var r=0;r<t.length;r++)n[r]=e(t[r])}else for(var o in n={},t)t.hasOwnProperty(o)&&(n[o]=e(t[o]));return n};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0,t.convertLinkObjectToUrl=function(e,t,n){if(!t||!i.default.get(H,[t.type,"url"]))throw new Error("Provided link type is not supported");return i.default.get(H,[t.type,"url"])(t,e,n)},t.convertUrlToLinkObject=te,t.convertUrlToPageId=function(e,t,n){var r=te(e,t,null,n);switch(r.type){case D:var o=Q(r.pageId);return i.default.find(n,{id:o})?o:null;case C:case k:var a=N(H[r.type].regex,t,r.type);return function(e,t){var n=i.default.find(e,{prefix:t[0],type:"template"});return i.default.get(n,"id")}(n,a);default:throw new F}},t.getAnchorDataId=function(e){return $(e.anchorDataId)},t.getPageId=function(e){return K(e.pageId)},t.convertQueryParamsToObject=ne;var r,i=(r=n(0))&&r.__esModule?r:{default:r};function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function l(e,t,n){return(l=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&d(i,n.prototype),i}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=/^(http|https):\/\/(.*)/,p=/^mailto:([^\?]*)(?:\?subject=(.*)?)?/,g=/^\/([^ \?]*)[\?]?(.*)/,m=/^(\/?)([^ \?]*)#(top|SCROLL_TO_TOP)[\?]?(.*)/,h=/^(\/?)([^ \?]*)#(bottom|SCROLL_TO_BOTTOM)[\?]?(.*)/,v=/^document:\/\/(.*)/,y=/^wix:document:\/\/v1\/(.+)\/(.+)/,_=/^tel:(.*)/,w=/^\/([^ \?]*)#([^ \?]*)[\?]?(.*)/,b=/^#([^ \?]*)[\?]?(.*)/,I={SCROLL_TO_TOP:"top",SCROLL_TO_BOTTOM:"bottom"},D="PageLink",k="DynamicPageLink",C="DynamicPageLinkWithQueryParams",O="ExternalLink",S="EmailLink",M="DocumentLink",x="PhoneLink",T="AnchorLink",P="AnchorLink",E="SamePageAnchorLink",U="AnchorLink",R=["_blank","_self"],A="router",j="dynamicPages",B=i.default.template("<%=linkObject.pageId%>#<%=linkObject.anchorDataId%>",{variable:"linkObject"}),L=i.default.template("/<%=linkObject.pageId%>",{variable:"linkObject"}),F=function(e){function t(){var n;return(n=e.call(this,"Unsupported link type")||this).name="UnsupportedLinkTypeError",Error.captureStackTrace&&Error.captureStackTrace(o(n),t),n}return a(t,e),t}(u(Error)),W=function(e){function t(){var n;return(n=e.call(this,"Unsupported target value")||this).name="UnsupportedTargetValueError",n.supportedTargets=R,Error.captureStackTrace&&Error.captureStackTrace(o(n),t),n}return a(t,e),t}(u(Error));function V(e,t){return i.default.find(e,(function(e){return e.prefix==="/"+t[0]&&((n=e).type===j||n.type===A);var n}))}function G(e,t,n){var r=e;n&&(r=i.default.dropRight(e));var o=i.default.drop(t?i.default.dropRight(r):r);return i.default.join(o,"/")}var H={PageLink:{url:function(e,t,n){var r=Q(e.pageId),o=i.default.find(n,{id:r});return o?o.url:L({pageId:r})},link:function(e,t,n,r){var o=function(e){var t=i.default.split(e,"/");if(t.length>1){var n=i.default.join(i.default.drop(t),"/");return i.default.concat([],i.default.head(t),n)}return t}(t[1]),a={type:e,pageId:"#"+J(i.default.head(o),r).pageId};3===t.length&&t[2]&&i.default.assign(a,{queryParams:ne(t[2])||""});var u=o[1];return u&&i.default.assign(a,{tpaInnerRoute:u}),a},regex:[g]},DocumentLink:{url:i.default.template("wix:document://v1/<%=linkObject.docId%>/<%=linkObject.name%>",{variable:"linkObject"}),link:function(e,t){return{type:e,docId:t[1],name:i.default.isUndefined(t[2])?"":t[2]}},regex:[v,y]},PhoneLink:{url:i.default.template("tel:<%=linkObject.phoneNumber%>",{variable:"linkObject"}),link:function(e,t){return{type:e,phoneNumber:t[1]}},regex:[_]},EmailLink:{url:function(e){var t="mailto:<%=linkObject.recipient%>";i.default.has(e,"subject")&&(t+="?subject=<%=linkObject.subject%>");return i.default.template(t,{variable:"linkObject"})(e)},link:function(e,t){var n={type:e,recipient:i.default.escape(t[1])};return t[2]&&(n.subject=i.default.escape(t[2])),n},regex:[p]},ExternalLink:{url:i.default.template("<%=linkObject.url%>",{variable:"linkObject"}),link:function(e,t,n,r,o){if(o&&!i.default.includes(R,o))throw new W;return{type:e,url:i.default.template("<%= partA %>://<%= partB%>")({partA:t[1],partB:t[2]}),target:o||"_blank"}},regex:[f]},DynamicPageLink:{url:Y,link:function(e,t,n){var r=i.default.startsWith(i.default.last(t),"#"),o=V(n,t),a={type:e,innerRoute:G(t,r)||"/",routerId:o.id};if(r){var u=i.default.last(t).replace("#","");a.anchorDataId=i.default.get(i.default.invert(I),u,u)}return a},regex:[m,h,w,g]},DynamicPageLinkWithQueryParams:{url:Y,link:function(e,t,n){var r=i.default.last(t),o=i.default.startsWith(t[t.length-2],"#"),a=V(n,t),u={type:k,innerRoute:G(t,o,!0)||"/",routerId:a.id,queryParams:ne(r)};if(o){var l=t[t.length-2].replace("#","");u.anchorDataId=i.default.get(i.default.invert(I),l,l)}return u},regex:[m,h,w,g]},AnchorLink:{url:z,link:function(e,t,n,r){var o=t[0],a=t[1],u=t[2],l=t[3],s=J(a,r),d=s.pageId,c=s.pageIdInSiteStructure,f={type:e,pageId:"#"+d,anchorDataId:i.default.invert(I)[u]||u};if(!c){var p=i.default.find(n,(function(e){var t=e.type,n=e.prefix;return"app"===t&&new RegExp("^"+n+"[/?#]").test(o)}));if(p){var g=i.default.trimStart(p.prefix,"/"),m=i.default.trimStart(a.slice(g.length),"/");i.default.assign(f,{tpaInnerRoute:m||"#",pageId:"#"+g})}}return 4===t.length&&t[3]&&i.default.assign(f,{queryParams:ne(l)}),f},regex:[w]},SamePageAnchorLink:{url:z,link:function(e,t){var n=t[1],r={type:U,anchorDataId:i.default.invert(I)[n]||n,pageId:"#masterPage"};return 3===t.length&&t[2]&&i.default.assign(r,{queryParams:ne(t[2])}),r},regex:[b]}};function N(e,t,n){if(n===k||n===C)return q(t);var r=i.default.find(e,(function(e){return e.test(t)})),o=t.match(r);return o=o||[]}function q(e){var t=e.match(g),n=t[1].replace("#","/#").split(/[\/]+/);return i.default.includes(e,"?")&&n.push(i.default.last(t)),n}function $(e){return I[e]||e}function Y(e,t){var n=e.innerRoute&&"/"!==e.innerRoute?"/"+e.innerRoute:"",r=function(e,t){var n=i.default.find(e,{id:t.routerId})||i.default.find(e,(function(e,n){return n===t.routerId}));if(n)return i.default.startsWith(n.prefix,"/")?n.prefix:"/"+n.prefix}(t,e)+n,o=i.default.replace($(e.anchorDataId),"#",""),a={pageId:i.default.startsWith(r,"/")?r:"/"+r,anchorDataId:o};return a.anchorDataId?B(a):r}function z(e,t,n){var r=i.default.replace($(e.anchorDataId),"#","");if(ee(K(e.pageId)))return"#"+r;var o=Q(e.pageId),a=i.default.find(n,{id:o});return B(a?{pageId:a.url,anchorDataId:r}:{pageId:i.default.startsWith(o,"/")?o:"/"+o,anchorDataId:r})}function Q(e){return ee(e=K(e))?"":e.replace("#","")}function K(e){if(!e)return e;if(i.default.isPlainObject(e)){if(e.pageUriSEO)return e.pageUriSEO;if(ee(e.id))return"masterPage";throw new Error("pageId object should contain pageUriSEO")}return e}function J(e,t){var n=""===e?i.default.find(t,"isMainPage"):i.default.find(t,{url:"/"+e});return{pageId:i.default.get(n,"id",e),pageIdInSiteStructure:!!i.default.get(n,"id")}}function X(e,t){return!!V(t,e)}function Z(e){return i.default.includes(e,"?")?C:k}function ee(e){return"masterPage"===e.replace("#","")}function te(e,t,n,r){var o=function(e,t){switch(!0){case f.test(e):return O;case p.test(e):return S;case b.test(e):return E;case m.test(e):return X(q(e),t)?Z(e):T;case h.test(e):return X(q(e),t)?Z(e):P;case w.test(e):return X(q(e),t)?Z(e):U;case g.test(e):return X(q(e),t)?Z(e):D;case v.test(e):case y.test(e):return M;case _.test(e):return x;default:throw new F}}(t,e),a=N(H[o].regex,t,o);return i.default.get(H,[o,"link"])(o,a,e,r,n)}function ne(e){if(!i.default.isString(e))return{};var t=e.split("&");return i.default.reduce(t,(function(e,t){var n=t.split("=");return e[n[0]]=n[1]?decodeURIComponent(n[1]):null,e}),{})}},function(e,t,n){"use strict";t.__esModule=!0,t.applyTransformationForSetHtml=function(e){return e=function(e){void 0===e&&(e="");if(!e)return e;var t=/class\s*?=\s*["'](.*?)['"]/,n=/(class\s*?=\s*["'])(.*?)(['"])/;return e.replace(/<(ol|ul|h[1-6]|p)(.*?)>/g,(function(e,i,o){var a=o.match(t);if(!a)return"<"+i+o+' class="'+r[i]+'">';var u=a[1];return/(^|\s)font_[0-9]($|\s)/.test(u)?e:"p"===i&&/\bp[13]\b/i.test(u)?e.replace(/(.*?\bclass\s*?=.*?)\bp([13])\b(.*)/,(function(e,t,n,r){return""+t+("1"===n?"font_7":"font_9")+r})):"<"+i+o.replace(n,(function(e,t,n,o){return""+t+r[i]+" "+n+o}))+">"}))}(e)},t.applyTransformationForGetHtml=function(e){void 0===e&&(e="");var t=/(class\s*=['"][^'"]*?)\bfont_([79])\b/;return e.replace(/<(ol|ul|h[1-6]|p)(.*?)>/g,(function(e,n,i){void 0===i&&(i="");var o=new RegExp("(class\\s*=['\"].*?)"+r[n]);return o.test(i)?e=e.replace(o,"$1"):"p"===n&&t.test(i)&&(e=e.replace(t,(function(e,t,n){return t+("7"===n?"p1":"p3")}))),e.replace(/class\s*=(['"])\s*\1/,"").replace(/class\s*=(['"])\s*(.*?)\s*\1/,(function(e,t,n){return"class="+t+n+t})).replace(/(.+)\s{2,}/g,"$1 ").replace(/\s+>/,">")}))};var r={p:"font_8",h1:"font_0",h2:"font_2",h3:"font_3",h4:"font_4",h5:"font_5",h6:"font_6",ol:"font_8",ul:"font_8"}},function(e,t,n){"use strict";t.__esModule=!0,t.defaultSdkType=t.sdkTypeByWidgetId=t.sdkTypeByViewerType=void 0;t.sdkTypeByViewerType={"wysiwyg.viewer.components.SiteButton":"Button","wysiwyg.viewer.components.PopupCloseTextButton":"Button","wysiwyg.viewer.components.PopupCloseIconButton":"Button","wysiwyg.viewer.components.ClassicSection":"Section","wysiwyg.common.components.imagebutton.viewer.ImageButton":"Button","wysiwyg.viewer.components.WPhoto":"Image","wixui.ImageX":"Image","wysiwyg.viewer.components.FooterContainer":"Footer","wysiwyg.viewer.components.HeaderContainer":"Header","wysiwyg.viewer.components.WRichText":"Text","mobile.core.components.Page":"Page","wysiwyg.viewer.components.inputs.TextInput":"TextInput","wysiwyg.viewer.components.inputs.TextAreaInput":"TextBox","wysiwyg.viewer.components.inputs.DatePicker":"DatePicker","wysiwyg.viewer.components.BoxSlideShow":"Slideshow","wysiwyg.viewer.components.StripContainerSlideShow":"Slideshow","wysiwyg.viewer.components.StateBox":"MultiStateBox","wysiwyg.viewer.components.StateStrip":"MultiStateBox","wysiwyg.viewer.components.SlideShowGallery":"Gallery","wysiwyg.viewer.components.SliderGallery":"Gallery","wysiwyg.viewer.components.MatrixGallery":"Gallery","wysiwyg.viewer.components.PaginatedGridGallery":"Gallery","mobile.core.components.Container":"Box","wysiwyg.viewer.components.Group":"Box","wysiwyg.viewer.components.FormContainer":"Form","platform.components.AppController":"AppController","wysiwyg.viewer.components.svgshape.SvgShape":"VectorImage","wysiwyg.viewer.components.VectorImage":"VectorImage","wysiwyg.viewer.components.inputs.Checkbox":"Checkbox","wixui.RichTextBox":"RichTextBox","wixui.ToggleSwitch":"Switch","wixui.AddressInput":"AddressInput","wysiwyg.viewer.components.inputs.RadioGroup":"RadioButtonGroup","wysiwyg.viewer.components.inputs.CheckboxGroup":"CheckboxGroup","wysiwyg.viewer.components.BoxSlideShowSlide":"Slide","wysiwyg.viewer.components.StripContainerSlideShowSlide":"Slide","wysiwyg.viewer.components.StateBoxState":"State","wysiwyg.viewer.components.StateBoxFormState":"State","wysiwyg.viewer.components.StateStripState":"State","wysiwyg.viewer.components.inputs.ComboBoxInput":"Dropdown","wysiwyg.viewer.components.Column":"Column","wysiwyg.viewer.components.StripColumnsContainer":"ColumnStrip","wysiwyg.viewer.components.Grid":"Table","wysiwyg.viewer.components.inputs.FileUploader":"UploadButton","wysiwyg.common.components.anchor.viewer.Anchor":"Anchor","wysiwyg.viewer.components.tpapps.TPASection":"IFrame","wysiwyg.viewer.components.tpapps.TPAMultiSection":"IFrame","wysiwyg.viewer.components.tpapps.TPAGluedWidget":"IFrame","wysiwyg.viewer.components.HtmlComponent":"HtmlComponent","wysiwyg.viewer.components.GoogleMap":"GoogleMap","wysiwyg.viewer.components.Video":"Video","wysiwyg.viewer.components.HoverBox":"HoverBox","wysiwyg.viewer.components.Popover":"Popover","wysiwyg.viewer.components.MenuContainer":"MenuContainer","tpa.viewer.components.Freestyle":"Gallery","tpa.viewer.components.Honeycomb":"Gallery","tpa.viewer.components.Accordion":"Gallery","wysiwyg.viewer.components.tpapps.TPA3DCarousel":"Gallery","wysiwyg.viewer.components.tpapps.TPA3DGallery":"Gallery","tpa.viewer.components.Impress":"Gallery","tpa.viewer.components.Masonry":"Gallery","tpa.viewer.components.Collage":"Gallery","tpa.viewer.components.StripSlideshow":"Gallery","tpa.viewer.components.StripShowcase":"Gallery","tpa.viewer.components.Thumbnails":"Gallery","wysiwyg.viewer.components.tpapps.TPAWidget":"IFrame","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":"Menu","wysiwyg.viewer.components.menus.DropDownMenu":"Menu","wysiwyg.viewer.components.LoginSocialBar":"AccountNavBar","wysiwyg.viewer.components.Repeater":"Repeater","wysiwyg.viewer.components.MediaContainer":"Container","wysiwyg.viewer.components.RichContainer":"RichContainer","wysiwyg.viewer.components.mobile.TinyMenu":"MobileMenu","wysiwyg.viewer.components.QuickActionBar":"QuickActionBar","wixui.MusicPlayer":"AudioPlayer","wixui.BarChart":"BarChart","wixui.VideoPlayer":"VideoPlayer","wixui.Pagination":"Pagination","wixui.Tags":"Tags","wixui.Slider":"Slider","wixui.Captcha":"Captcha","wixui.TimePicker":"TimePicker","wixui.RatingsDisplay":"RatingsDisplay","wixui.RatingsInput":"RatingsInput","wixui.SearchBox":"SearchBox","platform.components.AppWidget":"AppWidget","wysiwyg.viewer.components.tpapps.TPAWidgetNative":"Native","wysiwyg.viewer.components.MediaBox":"MediaBox","wysiwyg.viewer.components.MediaPlayer":"VideoBox","wysiwyg.viewer.components.MediaPlayerControls":"VideoBoxMute","wysiwyg.viewer.components.MediaPlayerOverlayControls":"VideoBoxBigPlay","wixui.ProgressBar":"ProgressBar","wixui.SignatureInput":"SignatureInput","wixui.CustomElementComponent":"CustomElement","wixui.StylableButton":"Button","wixui.SelectionTagsList":"SelectionTags","wixui.StylableHorizontalMenu":"Menu","wixui.MultiStateBox":"MultiStateBox","wixui.ProGallery":"Gallery","wixui.CollapsibleText":"CollapsibleText","wixui.RangeSlider":"RangeSlider","wixui.Breadcrumbs":"Breadcrumbs"};t.sdkTypeByWidgetId={"142bb34d-3439-576a-7118-683e690a1e0d":"Gallery","aa86b56d-3c49-44fd-9976-963695e7815d":"RichContent"};t.defaultSdkType="HiddenCollapsedElement"},function(e,t,n){"use strict";t.__esModule=!0,t.generateWixCodeImageUri=function(e){return o(e)},t.generateWixCodeDocumentUri=function(e){return a(e)},t.generateWixCodeVideoUri=function(e){return u(e)},t.generateWixCodeAudioUri=function(e){return l(e)},t.extractImageRelativeUriFromWixUri=function(e){if(s.test(e)){return(e.match(s)||[0,0,e])[2]}return e},t.extractImageDataFromWixUri=function(e){if(s.test(e)){var t=e.match(s)||[0,0,e],n=t[2],r=t[3],o=t[4],a=t[5];return i.default.reduce({uri:n,width:r,height:o,title:a},d,{})}return{uri:e}};var r,i=(r=n(0))&&r.__esModule?r:{default:r};var o=i.default.template("image://v1/${uri}/${width}_${height}/${title}"),a=i.default.template("wix:document://v1/${uri}/${filename}"),u=i.default.template("wix:video://v1/${uri}/${filename}#posterUri=${posterUri}&posterWidth=${posterWidth}&posterHeight=${posterHeight}"),l=i.default.template("wix:audio://v1/${uri}/${filename}#duration=${duration}"),s=/^image:\/\/(.*)\/(.*)\/(.*)_(.*)\/(.*)/;function d(e,t,n){return t&&(e[n]=t),e}},function(e,t,n){"use strict";t.__esModule=!0,t.getSkinName=function(e){return i.default.get(u,e)||e},t.convertStyleParamForViewerType=function(e,t){var n=i.default.get(a,e),r=n||o;return i.default.get(r,t,t)};var r,i=(r=n(0))&&r.__esModule?r:{default:r};var o={backgroundColor:"bg",foregroundColor:"fg",borderColor:"brd",borderWidth:"brw",borderRadius:"rd",color:"txt"},a={"wysiwyg.viewer.components.inputs.FileUploader":{backgroundColor:"btn_bg",borderColor:"btn_brd",borderWidth:"btn_brw",borderRadius:"btn_rd",color:"btn_txt"},"wixui.FileUploaderNew":{backgroundColor:"btn_bg",borderColor:"btn_brd",borderWidth:"btn_brw",borderRadius:"btn_rd",color:"btn_txt"},"wixui.ProgressBar":{backgroundColor:"barBackgroundColor",foregroundColor:"barForegroundColor",borderColor:"borderColor",borderWidth:"borderSize",borderRadius:"borderRadius"},"wixui.SignatureInput":{backgroundColor:"padBackground",borderColor:"padBorderColor",borderWidth:"padBorderWidth"},"wixui.SearchBox":{backgroundColor:"inputBackgroundColor",borderColor:"inputBorderColor",borderWidth:"inputBorderWidth",borderRadius:"inputBorderRadius",color:"inputTextColor"}},u={"skins.input.RadioGroupDefaultSkin":"wysiwyg.common.components.radio.viewer.skins.RadioButtonDefaultSkin"}},function(e,t,n){"use strict";t.__esModule=!0,t.isSiteInSampleRatio=function(e){var t=e.sampleRatio,n=e.sampleRatioState,o=e.viewerSessionId,a=e.requestId,u=e.isDebug,l=e.biSampleByRequestId,s=function(e){return i.bind(null,e)}(t);if(function(e,t){return"none"===e||t&&"force"!==e}(n,u))return!0;!("coinFromRequestId"in r)&&a&&(r.coinFromRequestId=parseInt(a,10));if(!o)return s(r.coinFromRequestId);"coin"in r||(r.coin=parseInt(o,16));var d=s(r.coin);!d&&l&&"coinFromRequestId"in r&&(d=s(r.coinFromRequestId));return d},t.getStore=void 0;var r={};t.getStore=function(){return r};var i=function(e,t){return void 0===e&&(e=10),t%e==0}},function(e,t,n){"use strict";t.__esModule=!0,t.TypeUtils=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e){this._typesData=e}var t,n,r,a=e.prototype;return a.getSdkType=function(e,t){var n=this._typesData,r=n.sdkTypeByViewerType,i=n.sdkTypeByWidgetId,o=n.defaultSdkType;return i[t]||r[e]||o},a.getFullSdkType=function(e,t){return"$w."+this.getSdkType(e,t)},a.getPotentialViewerTypes=function(e){var t=this._typesData,n=t.sdkTypeByViewerType,r=t.sdkTypeByWidgetId,o=i.default.keys(n).filter((function(t){return n[t]===e}));return i.default.includes(i.default.values(r),e)&&o.push("wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.tpapps.TPAWidgetNative"),o},a.setType=function(e,t){this._typesData.sdkTypeByViewerType[e]=t},t=e,(n=[{key:"Types",get:function(){var e=this._typesData,t=e.sdkTypeByViewerType,n=e.sdkTypeByWidgetId,r=i.default.uniq(i.default.values(t).concat(i.default.values(n)));return i.default.zipObject(r,r)}},{key:"defaultSdkType",get:function(){return this._typesData.defaultSdkType}}])&&o(t.prototype,n),r&&o(t,r),e}();t.TypeUtils=a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(28);t.contacts=r.contacts,t.members=r.members},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29);t.contacts=r;var i=n(30);t.members=i;var o=n(31);t.errors=o},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o={id:{},firstName:{},lastName:{},picture:{},emails:{},addresses:{},phones:{},labels:{}},a={emailVerified:{},role:{},loginEmail:{},nickname:{},slug:{},language:{},status:{},creationDate:{},lastUpdateDate:{},lastLoginDate:{},profilePrivacyStatus:{}};t.serializeContactInfo=function(e){return i.reduce(e,(function(e,t,n){var r,u=a[n];return o[n]?e[n]=t:!u&&n&&e.customFields.push(((r={name:n})[function(e){return i.isDate(e)?"dateValue":i.isNumber(e)?"numValue":"strValue"}(t)]=t,r)),e}),{customFields:[]})};t.deserializeContactInfo=function(e){void 0===e&&(e={});var t=i.omit(e,Object.keys(r({customFields:{}},a))),n=e.customFields;n&&n.map((function(e){return(n={})[(t=e).name]=t.dateValue||t.numValue||t.strValue,n;var t,n})).map((function(e){return Object.assign(t,e)}));return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.serializeMemberRoles=function(e){return r.map(e&&e.groups,(function(e){return{name:e.title,description:e.description}}))};t.serializeMemberPlans=function(e,t){var n=e&&e.groups||[],i=t&&t.memberships||[];return n.map((function(e){var t=r.find(i,(function(t){return t.groupId===e.id})),n={name:e.title};return t&&t.startDate&&(n.startDate=new Date(t.startDate)),t&&t.expiryDate&&(n.expiryDate=new Date(t.expiryDate)),n}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatPlatformizedHttpError=function(e){var t,n=e.status,r=e.responseText;if(!n&&!r)return e;if(400===n)return"Bad Request: please check the user inputs.";if(404===n)return"Not Found: the requested item no longer exists.";try{t=JSON.parse(r).message}catch(e){}return(t||"unknown failure")+" ("+(n||0)+")"}},function(e,t,n){"use strict";t.__esModule=!0,t.isValidMediaSrc=function(e,t){if(a.isValidMediaItemUri(e,t))return!0;var n=c[t];return o.default.some(n,(function(t){return t.test(e)}))},t.createMediaSrc=function(e){var t=e.mediaId,n=e.type,r=e.title,i=e.width,u=e.height,l=e.posterId,s=e.watermark,d=c[n];if(o.default.some(d,(function(e){return e.test(t)})))return{item:t};return a.createMediaItemUri({mediaId:t,type:n,title:r,width:i,height:u,posterId:l,watermark:s})},t.parseMediaSrc=function(e,t){if(!o.default.includes(s,t))return{error:l.unknown_media_type};var n=c[t];if(o.default.some(n,(function(t){return t.test(e)})))return{type:t,mediaId:e};var r=a.parseMediaItemUri(e);if(r.error===l.non_string_media_id)return r;if(r.error===l.unknown_media_type||t!==r.type)return{error:l.bad_media_id};return r},t.types=t.errors=void 0;var r,i,o=(r=n(0))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(1));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var l=a.errors,s=a.types;t.types=s,t.errors=l;var d={externalUrl:/(^https?)|(^data)|(^blob)|(^\/\/)/,inlineSvg:/<svg[\s\S]*>[\s\S]*<\/svg>/im},c=((i={})[a.types.VECTOR]=[d.externalUrl,d.inlineSvg],i[a.types.IMAGE]=[d.externalUrl],i[a.types.DOCUMENT]=[],i[a.types.VIDEO]=[],i)}])}));
//# sourceMappingURL=platformUtils-bundle.js.map